(function(modules){this["webpackChunk"]=function webpackChunkCallback(chunkIds,moreModules){for(var moduleId in moreModules){modules[moduleId]=moreModules[moduleId]}while(chunkIds.length)installedChunks[chunkIds.pop()]=1};var installedModules={};var installedChunks={0:1};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{configurable:false,enumerable:true,get:getter})}};__webpack_require__.r=function(exports){Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=0)})([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _editor_editor_worker_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);var _jsonWorker_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(35);self.onmessage=function(){_editor_editor_worker_js__WEBPACK_IMPORTED_MODULE_0__["initialize"](function(ctx,createData){return new _jsonWorker_js__WEBPACK_IMPORTED_MODULE_1__["JSONWorker"](ctx,createData)})}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"initialize",function(){return initialize});var _common_services_editorSimpleWorker_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);var _base_common_worker_simpleWorker_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(33);var initialized=false;function initialize(foreignModule){if(initialized){return}initialized=true;var editorWorker=new _common_services_editorSimpleWorker_js__WEBPACK_IMPORTED_MODULE_0__["EditorSimpleWorkerImpl"](foreignModule);var simpleWorker=new _base_common_worker_simpleWorker_js__WEBPACK_IMPORTED_MODULE_1__["SimpleWorkerServer"](function(msg){self.postMessage(msg)},editorWorker);self.onmessage=function(e){simpleWorker.onmessage(e.data)}}self.onmessage=function(e){if(!initialized){initialize(null)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"BaseEditorSimpleWorker",function(){return BaseEditorSimpleWorker});__webpack_require__.d(__webpack_exports__,"EditorSimpleWorkerImpl",function(){return EditorSimpleWorkerImpl});__webpack_require__.d(__webpack_exports__,"create",function(){return create});var _base_common_uri_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3);var _base_common_winjs_base_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7);var _core_range_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8);var _diff_diffComputer_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10);var _base_common_diff_diff_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(11);var _core_position_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9);var _model_mirrorTextModel_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(15);var _modes_linkComputer_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(18);var _modes_supports_inplaceReplaceSupport_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(20);var _model_wordHelper_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(21);var _standalone_standaloneBase_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(22);var _base_common_platform_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(4);var __extends=undefined&&undefined.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var MirrorModel=function(_super){__extends(MirrorModel,_super);function MirrorModel(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(MirrorModel.prototype,"uri",{get:function(){return this._uri},enumerable:true,configurable:true});Object.defineProperty(MirrorModel.prototype,"version",{get:function(){return this._versionId},enumerable:true,configurable:true});Object.defineProperty(MirrorModel.prototype,"eol",{get:function(){return this._eol},enumerable:true,configurable:true});MirrorModel.prototype.getValue=function(){return this.getText()};MirrorModel.prototype.getLinesContent=function(){return this._lines.slice(0)};MirrorModel.prototype.getLineCount=function(){return this._lines.length};MirrorModel.prototype.getLineContent=function(lineNumber){return this._lines[lineNumber-1]};MirrorModel.prototype.getWordAtPosition=function(position,wordDefinition){var wordAtText=Object(_model_wordHelper_js__WEBPACK_IMPORTED_MODULE_9__["getWordAtText"])(position.column,Object(_model_wordHelper_js__WEBPACK_IMPORTED_MODULE_9__["ensureValidWordDefinition"])(wordDefinition),this._lines[position.lineNumber-1],0);if(wordAtText){return new _core_range_js__WEBPACK_IMPORTED_MODULE_2__["Range"](position.lineNumber,wordAtText.startColumn,position.lineNumber,wordAtText.endColumn)}return null};MirrorModel.prototype.getWordUntilPosition=function(position,wordDefinition){var wordAtPosition=this.getWordAtPosition(position,wordDefinition);if(!wordAtPosition){return{word:"",startColumn:position.column,endColumn:position.column}}return{word:this._lines[position.lineNumber-1].substring(wordAtPosition.startColumn-1,position.column-1),startColumn:wordAtPosition.startColumn,endColumn:position.column}};MirrorModel.prototype._getAllWords=function(wordDefinition){var _this=this;var result=[];this._lines.forEach(function(line){_this._wordenize(line,wordDefinition).forEach(function(info){result.push(line.substring(info.start,info.end))})});return result};MirrorModel.prototype.getAllUniqueWords=function(wordDefinition,skipWordOnce){var foundSkipWord=false;var uniqueWords=Object.create(null);return this._getAllWords(wordDefinition).filter(function(word){if(skipWordOnce&&!foundSkipWord&&skipWordOnce===word){foundSkipWord=true;return false}else if(uniqueWords[word]){return false}else{uniqueWords[word]=true;return true}})};MirrorModel.prototype._wordenize=function(content,wordDefinition){var result=[];var match;wordDefinition.lastIndex=0;while(match=wordDefinition.exec(content)){if(match[0].length===0){break}result.push({start:match.index,end:match.index+match[0].length})}return result};MirrorModel.prototype.getValueInRange=function(range){range=this._validateRange(range);if(range.startLineNumber===range.endLineNumber){return this._lines[range.startLineNumber-1].substring(range.startColumn-1,range.endColumn-1)}var lineEnding=this._eol;var startLineIndex=range.startLineNumber-1;var endLineIndex=range.endLineNumber-1;var resultLines=[];resultLines.push(this._lines[startLineIndex].substring(range.startColumn-1));for(var i=startLineIndex+1;i<endLineIndex;i++){resultLines.push(this._lines[i])}resultLines.push(this._lines[endLineIndex].substring(0,range.endColumn-1));return resultLines.join(lineEnding)};MirrorModel.prototype.offsetAt=function(position){position=this._validatePosition(position);this._ensureLineStarts();return this._lineStarts.getAccumulatedValue(position.lineNumber-2)+(position.column-1)};MirrorModel.prototype.positionAt=function(offset){offset=Math.floor(offset);offset=Math.max(0,offset);this._ensureLineStarts();var out=this._lineStarts.getIndexOf(offset);var lineLength=this._lines[out.index].length;return{lineNumber:1+out.index,column:1+Math.min(out.remainder,lineLength)}};MirrorModel.prototype._validateRange=function(range){var start=this._validatePosition({lineNumber:range.startLineNumber,column:range.startColumn});var end=this._validatePosition({lineNumber:range.endLineNumber,column:range.endColumn});if(start.lineNumber!==range.startLineNumber||start.column!==range.startColumn||end.lineNumber!==range.endLineNumber||end.column!==range.endColumn){return{startLineNumber:start.lineNumber,startColumn:start.column,endLineNumber:end.lineNumber,endColumn:end.column}}return range};MirrorModel.prototype._validatePosition=function(position){if(!_core_position_js__WEBPACK_IMPORTED_MODULE_5__["Position"].isIPosition(position)){throw new Error("bad position")}var lineNumber=position.lineNumber,column=position.column;var hasChanged=false;if(lineNumber<1){lineNumber=1;column=1;hasChanged=true}else if(lineNumber>this._lines.length){lineNumber=this._lines.length;column=this._lines[lineNumber-1].length+1;hasChanged=true}else{var maxCharacter=this._lines[lineNumber-1].length+1;if(column<1){column=1;hasChanged=true}else if(column>maxCharacter){column=maxCharacter;hasChanged=true}}if(!hasChanged){return position}else{return{lineNumber,column}}};return MirrorModel}(_model_mirrorTextModel_js__WEBPACK_IMPORTED_MODULE_6__["MirrorTextModel"]);var BaseEditorSimpleWorker=function(){function BaseEditorSimpleWorker(foreignModuleFactory){this._foreignModuleFactory=foreignModuleFactory;this._foreignModule=null}BaseEditorSimpleWorker.prototype.computeDiff=function(originalUrl,modifiedUrl,ignoreTrimWhitespace){var original=this._getModel(originalUrl);var modified=this._getModel(modifiedUrl);if(!original||!modified){return null}var originalLines=original.getLinesContent();var modifiedLines=modified.getLinesContent();var diffComputer=new _diff_diffComputer_js__WEBPACK_IMPORTED_MODULE_3__["DiffComputer"](originalLines,modifiedLines,{shouldPostProcessCharChanges:true,shouldIgnoreTrimWhitespace:ignoreTrimWhitespace,shouldMakePrettyDiff:true});return _base_common_winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"].as(diffComputer.computeDiff())};BaseEditorSimpleWorker.prototype.computeDirtyDiff=function(originalUrl,modifiedUrl,ignoreTrimWhitespace){var original=this._getModel(originalUrl);var modified=this._getModel(modifiedUrl);if(!original||!modified){return null}var originalLines=original.getLinesContent();var modifiedLines=modified.getLinesContent();var diffComputer=new _diff_diffComputer_js__WEBPACK_IMPORTED_MODULE_3__["DiffComputer"](originalLines,modifiedLines,{shouldPostProcessCharChanges:false,shouldIgnoreTrimWhitespace:ignoreTrimWhitespace,shouldMakePrettyDiff:true});return _base_common_winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"].as(diffComputer.computeDiff())};BaseEditorSimpleWorker.prototype.computeMoreMinimalEdits=function(modelUrl,edits){var model=this._getModel(modelUrl);if(!model){return _base_common_winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"].as(edits)}var result=[];var lastEol;for(var _i=0,edits_1=edits;_i<edits_1.length;_i++){var _a=edits_1[_i],range=_a.range,text=_a.text,eol=_a.eol;if(typeof eol==="number"){lastEol=eol}if(!range){continue}var original=model.getValueInRange(range);text=text.replace(/\r\n|\n|\r/g,model.eol);if(original===text){continue}if(Math.max(text.length,original.length)>BaseEditorSimpleWorker._diffLimit){result.push({range,text});continue}var changes=Object(_base_common_diff_diff_js__WEBPACK_IMPORTED_MODULE_4__["stringDiff"])(original,text,false);var editOffset=model.offsetAt(_core_range_js__WEBPACK_IMPORTED_MODULE_2__["Range"].lift(range).getStartPosition());for(var _b=0,changes_1=changes;_b<changes_1.length;_b++){var change=changes_1[_b];var start=model.positionAt(editOffset+change.originalStart);var end=model.positionAt(editOffset+change.originalStart+change.originalLength);var newEdit={text:text.substr(change.modifiedStart,change.modifiedLength),range:{startLineNumber:start.lineNumber,startColumn:start.column,endLineNumber:end.lineNumber,endColumn:end.column}};if(model.getValueInRange(newEdit.range)!==newEdit.text){result.push(newEdit)}}}if(typeof lastEol==="number"){result.push({eol:lastEol,text:undefined,range:undefined})}return _base_common_winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"].as(result)};BaseEditorSimpleWorker.prototype.computeLinks=function(modelUrl){var model=this._getModel(modelUrl);if(!model){return null}return _base_common_winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"].as(Object(_modes_linkComputer_js__WEBPACK_IMPORTED_MODULE_7__["computeLinks"])(model))};BaseEditorSimpleWorker.prototype.textualSuggest=function(modelUrl,position,wordDef,wordDefFlags){var model=this._getModel(modelUrl);if(model){var suggestions=[];var wordDefRegExp=new RegExp(wordDef,wordDefFlags);var currentWord=model.getWordUntilPosition(position,wordDefRegExp).word;for(var _i=0,_a=model.getAllUniqueWords(wordDefRegExp);_i<_a.length;_i++){var word=_a[_i];if(word!==currentWord&&isNaN(Number(word))){suggestions.push({type:"text",label:word,insertText:word,noAutoAccept:true,overwriteBefore:currentWord.length})}}return _base_common_winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"].as({suggestions})}return undefined};BaseEditorSimpleWorker.prototype.navigateValueSet=function(modelUrl,range,up,wordDef,wordDefFlags){var model=this._getModel(modelUrl);if(!model){return null}var wordDefRegExp=new RegExp(wordDef,wordDefFlags);if(range.startColumn===range.endColumn){range={startLineNumber:range.startLineNumber,startColumn:range.startColumn,endLineNumber:range.endLineNumber,endColumn:range.endColumn+1}}var selectionText=model.getValueInRange(range);var wordRange=model.getWordAtPosition({lineNumber:range.startLineNumber,column:range.startColumn},wordDefRegExp);var word=null;if(wordRange!==null){word=model.getValueInRange(wordRange)}var result=_modes_supports_inplaceReplaceSupport_js__WEBPACK_IMPORTED_MODULE_8__["BasicInplaceReplace"].INSTANCE.navigateValueSet(range,selectionText,wordRange,word,up);return _base_common_winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"].as(result)};BaseEditorSimpleWorker.prototype.loadForeignModule=function(moduleId,createData){var _this=this;var ctx={getMirrorModels:function(){return _this._getModels()}};if(this._foreignModuleFactory){this._foreignModule=this._foreignModuleFactory(ctx,createData);var methods=[];for(var prop in this._foreignModule){if(typeof this._foreignModule[prop]==="function"){methods.push(prop)}}return _base_common_winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"].as(methods)}return new _base_common_winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"](function(c,e){Promise.resolve().then(function(){var __WEBPACK_AMD_REQUIRE_ARRAY__=[__webpack_require__(32)(moduleId)];(function(foreignModule){_this._foreignModule=foreignModule.create(ctx,createData);var methods=[];for(var prop in _this._foreignModule){if(typeof _this._foreignModule[prop]==="function"){methods.push(prop)}}c(methods)}).apply(null,__WEBPACK_AMD_REQUIRE_ARRAY__)}).catch(e.bind(this))})};BaseEditorSimpleWorker.prototype.fmr=function(method,args){if(!this._foreignModule||typeof this._foreignModule[method]!=="function"){return _base_common_winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"].wrapError(new Error("Missing requestHandler or method: "+method))}try{return _base_common_winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"].as(this._foreignModule[method].apply(this._foreignModule,args))}catch(e){return _base_common_winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"].wrapError(e)}};BaseEditorSimpleWorker._diffLimit=1e4;return BaseEditorSimpleWorker}();var EditorSimpleWorkerImpl=function(_super){__extends(EditorSimpleWorkerImpl,_super);function EditorSimpleWorkerImpl(foreignModuleFactory){var _this=_super.call(this,foreignModuleFactory)||this;_this._models=Object.create(null);return _this}EditorSimpleWorkerImpl.prototype.dispose=function(){this._models=Object.create(null)};EditorSimpleWorkerImpl.prototype._getModel=function(uri){return this._models[uri]};EditorSimpleWorkerImpl.prototype._getModels=function(){var _this=this;var all=[];Object.keys(this._models).forEach(function(key){return all.push(_this._models[key])});return all};EditorSimpleWorkerImpl.prototype.acceptNewModel=function(data){this._models[data.url]=new MirrorModel(_base_common_uri_js__WEBPACK_IMPORTED_MODULE_0__["default"].parse(data.url),data.lines,data.EOL,data.versionId)};EditorSimpleWorkerImpl.prototype.acceptModelChanged=function(strURL,e){if(!this._models[strURL]){return}var model=this._models[strURL];model.onEvents(e)};EditorSimpleWorkerImpl.prototype.acceptRemovedModel=function(strURL){if(!this._models[strURL]){return}delete this._models[strURL]};return EditorSimpleWorkerImpl}(BaseEditorSimpleWorker);function create(){return new EditorSimpleWorkerImpl(null)}if(typeof importScripts==="function"){_base_common_platform_js__WEBPACK_IMPORTED_MODULE_11__["globals"].monaco=Object(_standalone_standaloneBase_js__WEBPACK_IMPORTED_MODULE_10__["createMonacoBaseAPI"])()}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _platform_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4);var __extends=undefined&&undefined.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();function _encode(ch){return"%"+ch.charCodeAt(0).toString(16).toUpperCase()}function encodeURIComponent2(str){return encodeURIComponent(str).replace(/[!'()*]/g,_encode)}function encodeNoop(str){return str.replace(/[#?]/,_encode)}var _schemePattern=/^\w[\w\d+.-]*$/;var _singleSlashStart=/^\//;var _doubleSlashStart=/^\/\//;function _validateUri(ret){if(ret.scheme&&!_schemePattern.test(ret.scheme)){throw new Error("[UriError]: Scheme contains illegal characters.")}if(ret.path){if(ret.authority){if(!_singleSlashStart.test(ret.path)){throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}}else{if(_doubleSlashStart.test(ret.path)){throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}}}var _empty="";var _slash="/";var _regexp=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;var _driveLetterPath=/^\/[a-zA-Z]:/;var _upperCaseDrive=/^(\/)?([A-Z]:)/;var _driveLetter=/^[a-zA-Z]:/;var URI=function(){function URI(schemeOrData,authority,path,query,fragment){if(typeof schemeOrData==="object"){this.scheme=schemeOrData.scheme||_empty;this.authority=schemeOrData.authority||_empty;this.path=schemeOrData.path||_empty;this.query=schemeOrData.query||_empty;this.fragment=schemeOrData.fragment||_empty}else{this.scheme=schemeOrData||_empty;this.authority=authority||_empty;this.path=path||_empty;this.query=query||_empty;this.fragment=fragment||_empty;_validateUri(this)}}URI.isUri=function(thing){if(thing instanceof URI){return true}if(!thing){return false}return typeof thing.authority==="string"&&typeof thing.fragment==="string"&&typeof thing.path==="string"&&typeof thing.query==="string"&&typeof thing.scheme==="string"};Object.defineProperty(URI.prototype,"fsPath",{get:function(){return _makeFsPath(this)},enumerable:true,configurable:true});URI.prototype.with=function(change){if(!change){return this}var scheme=change.scheme,authority=change.authority,path=change.path,query=change.query,fragment=change.fragment;if(scheme===void 0){scheme=this.scheme}else if(scheme===null){scheme=_empty}if(authority===void 0){authority=this.authority}else if(authority===null){authority=_empty}if(path===void 0){path=this.path}else if(path===null){path=_empty}if(query===void 0){query=this.query}else if(query===null){query=_empty}if(fragment===void 0){fragment=this.fragment}else if(fragment===null){fragment=_empty}if(scheme===this.scheme&&authority===this.authority&&path===this.path&&query===this.query&&fragment===this.fragment){return this}return new _URI(scheme,authority,path,query,fragment)};URI.parse=function(value){var match=_regexp.exec(value);if(!match){return new _URI(_empty,_empty,_empty,_empty,_empty)}return new _URI(match[2]||_empty,decodeURIComponent(match[4]||_empty),decodeURIComponent(match[5]||_empty),decodeURIComponent(match[7]||_empty),decodeURIComponent(match[9]||_empty))};URI.file=function(path){var authority=_empty;if(_platform_js__WEBPACK_IMPORTED_MODULE_0__["isWindows"]){path=path.replace(/\\/g,_slash)}if(path[0]===_slash&&path[1]===_slash){var idx=path.indexOf(_slash,2);if(idx===-1){authority=path.substring(2);path=_slash}else{authority=path.substring(2,idx);path=path.substring(idx)||_slash}}if(_driveLetter.test(path)){path=_slash+path}else if(path[0]!==_slash){path=_slash+path}return new _URI("file",authority,path,_empty,_empty)};URI.from=function(components){return new _URI(components.scheme,components.authority,components.path,components.query,components.fragment)};URI.prototype.toString=function(skipEncoding){if(skipEncoding===void 0){skipEncoding=false}return _asFormatted(this,skipEncoding)};URI.prototype.toJSON=function(){var res={$mid:1,fsPath:this.fsPath,external:this.toString()};if(this.path){res.path=this.path}if(this.scheme){res.scheme=this.scheme}if(this.authority){res.authority=this.authority}if(this.query){res.query=this.query}if(this.fragment){res.fragment=this.fragment}return res};URI.revive=function(data){if(!data){return data}else if(data instanceof URI){return data}else{var result=new _URI(data);result._fsPath=data.fsPath;result._formatted=data.external;return result}};return URI}();__webpack_exports__["default"]=URI;var _URI=function(_super){__extends(_URI,_super);function _URI(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._formatted=null;_this._fsPath=null;return _this}Object.defineProperty(_URI.prototype,"fsPath",{get:function(){if(!this._fsPath){this._fsPath=_makeFsPath(this)}return this._fsPath},enumerable:true,configurable:true});_URI.prototype.toString=function(skipEncoding){if(skipEncoding===void 0){skipEncoding=false}if(!skipEncoding){if(!this._formatted){this._formatted=_asFormatted(this,false)}return this._formatted}else{return _asFormatted(this,true)}};return _URI}(URI);function _makeFsPath(uri){var value;if(uri.authority&&uri.path&&uri.scheme==="file"){value="//"+uri.authority+uri.path}else if(_driveLetterPath.test(uri.path)){value=uri.path[1].toLowerCase()+uri.path.substr(2)}else{value=uri.path}if(_platform_js__WEBPACK_IMPORTED_MODULE_0__["isWindows"]){value=value.replace(/\//g,"\\")}return value}function _asFormatted(uri,skipEncoding){var encoder=!skipEncoding?encodeURIComponent2:encodeNoop;var parts=[];var scheme=uri.scheme,authority=uri.authority,path=uri.path,query=uri.query,fragment=uri.fragment;if(scheme){parts.push(scheme,":")}if(authority||scheme==="file"){parts.push("//")}if(authority){var idx=authority.indexOf("@");if(idx!==-1){var userinfo=authority.substr(0,idx);authority=authority.substr(idx+1);idx=userinfo.indexOf(":");if(idx===-1){parts.push(encoder(userinfo))}else{parts.push(encoder(userinfo.substr(0,idx)),":",encoder(userinfo.substr(idx+1)))}parts.push("@")}authority=authority.toLowerCase();idx=authority.indexOf(":");if(idx===-1){parts.push(encoder(authority))}else{parts.push(encoder(authority.substr(0,idx)),authority.substr(idx))}}if(path){var m=_upperCaseDrive.exec(path);if(m){if(m[1]){path="/"+m[2].toLowerCase()+path.substr(3)}else{path=m[2].toLowerCase()+path.substr(2)}}var lastIdx=0;while(true){var idx=path.indexOf(_slash,lastIdx);if(idx===-1){parts.push(encoder(path.substring(lastIdx)));break}parts.push(encoder(path.substring(lastIdx,idx)),_slash);lastIdx=idx+1}}if(query){parts.push("?",encoder(query))}if(fragment){parts.push("#",encoder(fragment))}return parts.join(_empty)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);(function(process,global){__webpack_require__.d(__webpack_exports__,"LANGUAGE_DEFAULT",function(){return LANGUAGE_DEFAULT});__webpack_require__.d(__webpack_exports__,"Platform",function(){return Platform});__webpack_require__.d(__webpack_exports__,"isWindows",function(){return isWindows});__webpack_require__.d(__webpack_exports__,"isMacintosh",function(){return isMacintosh});__webpack_require__.d(__webpack_exports__,"isLinux",function(){return isLinux});__webpack_require__.d(__webpack_exports__,"isNative",function(){return isNative});__webpack_require__.d(__webpack_exports__,"isWeb",function(){return isWeb});__webpack_require__.d(__webpack_exports__,"platform",function(){return platform});__webpack_require__.d(__webpack_exports__,"isRootUser",function(){return isRootUser});__webpack_require__.d(__webpack_exports__,"language",function(){return language});__webpack_require__.d(__webpack_exports__,"locale",function(){return locale});__webpack_require__.d(__webpack_exports__,"translationsConfigFile",function(){return translationsConfigFile});__webpack_require__.d(__webpack_exports__,"globals",function(){return globals});__webpack_require__.d(__webpack_exports__,"setImmediate",function(){return setImmediate});__webpack_require__.d(__webpack_exports__,"OS",function(){return OS});var _isWindows=false;var _isMacintosh=false;var _isLinux=false;var _isNative=false;var _isWeb=false;var _locale=undefined;var _language=undefined;var _translationsConfigFile=undefined;var LANGUAGE_DEFAULT="en";if(typeof process==="object"&&typeof process.nextTick==="function"&&typeof process.platform==="string"){_isWindows=process.platform==="win32";_isMacintosh=process.platform==="darwin";_isLinux=process.platform==="linux";var rawNlsConfig=process.env["VSCODE_NLS_CONFIG"];if(rawNlsConfig){try{var nlsConfig=JSON.parse(rawNlsConfig);var resolved=nlsConfig.availableLanguages["*"];_locale=nlsConfig.locale;_language=resolved?resolved:LANGUAGE_DEFAULT;_translationsConfigFile=nlsConfig._translationsConfigFile}catch(e){}}_isNative=true}else if(typeof navigator==="object"){var userAgent=navigator.userAgent;_isWindows=userAgent.indexOf("Windows")>=0;_isMacintosh=userAgent.indexOf("Macintosh")>=0;_isLinux=userAgent.indexOf("Linux")>=0;_isWeb=true;_locale=navigator.language;_language=_locale}var Platform;(function(Platform){Platform[Platform["Web"]=0]="Web";Platform[Platform["Mac"]=1]="Mac";Platform[Platform["Linux"]=2]="Linux";Platform[Platform["Windows"]=3]="Windows"})(Platform||(Platform={}));var _platform=Platform.Web;if(_isNative){if(_isMacintosh){_platform=Platform.Mac}else if(_isWindows){_platform=Platform.Windows}else if(_isLinux){_platform=Platform.Linux}}var isWindows=_isWindows;var isMacintosh=_isMacintosh;var isLinux=_isLinux;var isNative=_isNative;var isWeb=_isWeb;var platform=_platform;function isRootUser(){return _isNative&&!_isWindows&&process.getuid()===0}var language=_language;var locale=_locale;var translationsConfigFile=_translationsConfigFile;var _globals=typeof self==="object"?self:typeof global==="object"?global:{};var globals=_globals;var _setImmediate=null;function setImmediate(callback){if(_setImmediate===null){if(globals.setImmediate){_setImmediate=globals.setImmediate.bind(globals)}else if(typeof process!=="undefined"&&typeof process.nextTick==="function"){_setImmediate=process.nextTick.bind(process)}else{_setImmediate=globals.setTimeout.bind(globals)}}return _setImmediate(callback)}var OS=_isMacintosh?2:_isWindows?1:3}).call(this,__webpack_require__(5),__webpack_require__(6))},function(module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},function(module,exports){var g;g=function(){return this}();try{g=g||Function("return this")()||(1,eval)("this")}catch(e){if(typeof window==="object")g=window}module.exports=g},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);(function(global,process){__webpack_require__.d(__webpack_exports__,"Promise",function(){return Promise});__webpack_require__.d(__webpack_exports__,"TPromise",function(){return TPromise});__webpack_require__.d(__webpack_exports__,"PPromise",function(){return PPromise});var __winjs_exports;(function(){var _modules=Object.create(null);_modules["WinJS/Core/_WinJS"]={};var _winjs=function(moduleId,deps,factory){var exports={};var exportsPassedIn=false;var depsValues=deps.map(function(dep){if(dep==="exports"){exportsPassedIn=true;return exports}return _modules[dep]});var result=factory.apply({},depsValues);_modules[moduleId]=exportsPassedIn?exports:result};_winjs("WinJS/Core/_Global",[],function(){"use strict";var globalObject=typeof window!=="undefined"?window:typeof self!=="undefined"?self:typeof global!=="undefined"?global:{};return globalObject});_winjs("WinJS/Core/_BaseCoreUtils",["WinJS/Core/_Global"],function baseCoreUtilsInit(_Global){"use strict";var hasWinRT=!!_Global.Windows;function markSupportedForProcessing(func){func.supportedForProcessing=true;return func}var actualSetImmediate=null;return{hasWinRT,markSupportedForProcessing,_setImmediate:function(callback){if(actualSetImmediate===null){if(_Global.setImmediate){actualSetImmediate=_Global.setImmediate.bind(_Global)}else if(typeof process!=="undefined"&&typeof process.nextTick==="function"){actualSetImmediate=process.nextTick.bind(process)}else{actualSetImmediate=_Global.setTimeout.bind(_Global)}}actualSetImmediate(callback)}}});_winjs("WinJS/Core/_WriteProfilerMark",["WinJS/Core/_Global"],function profilerInit(_Global){"use strict";return _Global.msWriteProfilerMark||function(){}});_winjs("WinJS/Core/_Base",["WinJS/Core/_WinJS","WinJS/Core/_Global","WinJS/Core/_BaseCoreUtils","WinJS/Core/_WriteProfilerMark"],function baseInit(_WinJS,_Global,_BaseCoreUtils,_WriteProfilerMark){"use strict";function initializeProperties(target,members,prefix){var keys=Object.keys(members);var isArray=Array.isArray(target);var properties;var i,len;for(i=0,len=keys.length;i<len;i++){var key=keys[i];var enumerable=key.charCodeAt(0)!==95;var member=members[key];if(member&&typeof member==="object"){if(member.value!==undefined||typeof member.get==="function"||typeof member.set==="function"){if(member.enumerable===undefined){member.enumerable=enumerable}if(prefix&&member.setName&&typeof member.setName==="function"){member.setName(prefix+"."+key)}properties=properties||{};properties[key]=member;continue}}if(!enumerable){properties=properties||{};properties[key]={value:member,enumerable,configurable:true,writable:true};continue}if(isArray){target.forEach(function(target){target[key]=member})}else{target[key]=member}}if(properties){if(isArray){target.forEach(function(target){Object.defineProperties(target,properties)})}else{Object.defineProperties(target,properties)}}}(function(){var _rootNamespace=_WinJS;if(!_rootNamespace.Namespace){_rootNamespace.Namespace=Object.create(Object.prototype)}function createNamespace(parentNamespace,name){var currentNamespace=parentNamespace||{};if(name){var namespaceFragments=name.split(".");if(currentNamespace===_Global&&namespaceFragments[0]==="WinJS"){currentNamespace=_WinJS;namespaceFragments.splice(0,1)}for(var i=0,len=namespaceFragments.length;i<len;i++){var namespaceName=namespaceFragments[i];if(!currentNamespace[namespaceName]){Object.defineProperty(currentNamespace,namespaceName,{value:{},writable:false,enumerable:true,configurable:true})}currentNamespace=currentNamespace[namespaceName]}}return currentNamespace}function defineWithParent(parentNamespace,name,members){var currentNamespace=createNamespace(parentNamespace,name);if(members){initializeProperties(currentNamespace,members,name||"<ANONYMOUS>")}return currentNamespace}function define(name,members){return defineWithParent(_Global,name,members)}var LazyStates={uninitialized:1,working:2,initialized:3};function lazy(f){var name;var state=LazyStates.uninitialized;var result;return{setName:function(value){name=value},get:function(){switch(state){case LazyStates.initialized:return result;case LazyStates.uninitialized:state=LazyStates.working;try{_WriteProfilerMark("WinJS.Namespace._lazy:"+name+",StartTM");result=f()}finally{_WriteProfilerMark("WinJS.Namespace._lazy:"+name+",StopTM");state=LazyStates.uninitialized}f=null;state=LazyStates.initialized;return result;case LazyStates.working:throw"Illegal: reentrancy on initialization";default:throw"Illegal"}},set:function(value){switch(state){case LazyStates.working:throw"Illegal: reentrancy on initialization";default:state=LazyStates.initialized;result=value;break}},enumerable:true,configurable:true}}function moduleDefine(exports,name,members){var target=[exports];var publicNS=null;if(name){publicNS=createNamespace(_Global,name);target.push(publicNS)}initializeProperties(target,members,name||"<ANONYMOUS>");return publicNS}Object.defineProperties(_rootNamespace.Namespace,{defineWithParent:{value:defineWithParent,writable:true,enumerable:true,configurable:true},define:{value:define,writable:true,enumerable:true,configurable:true},_lazy:{value:lazy,writable:true,enumerable:true,configurable:true},_moduleDefine:{value:moduleDefine,writable:true,enumerable:true,configurable:true}})})();(function(){function define(constructor,instanceMembers,staticMembers){constructor=constructor||function(){};_BaseCoreUtils.markSupportedForProcessing(constructor);if(instanceMembers){initializeProperties(constructor.prototype,instanceMembers)}if(staticMembers){initializeProperties(constructor,staticMembers)}return constructor}function derive(baseClass,constructor,instanceMembers,staticMembers){if(baseClass){constructor=constructor||function(){};var basePrototype=baseClass.prototype;constructor.prototype=Object.create(basePrototype);_BaseCoreUtils.markSupportedForProcessing(constructor);Object.defineProperty(constructor.prototype,"constructor",{value:constructor,writable:true,configurable:true,enumerable:true});if(instanceMembers){initializeProperties(constructor.prototype,instanceMembers)}if(staticMembers){initializeProperties(constructor,staticMembers)}return constructor}else{return define(constructor,instanceMembers,staticMembers)}}function mix(constructor){constructor=constructor||function(){};var i,len;for(i=1,len=arguments.length;i<len;i++){initializeProperties(constructor.prototype,arguments[i])}return constructor}_WinJS.Namespace.define("WinJS.Class",{define,derive,mix})})();return{Namespace:_WinJS.Namespace,Class:_WinJS.Class}});_winjs("WinJS/Core/_ErrorFromName",["WinJS/Core/_Base"],function errorsInit(_Base){"use strict";var ErrorFromName=_Base.Class.derive(Error,function(name,message){this.name=name;this.message=message||name},{},{supportedForProcessing:false});_Base.Namespace.define("WinJS",{ErrorFromName});return ErrorFromName});_winjs("WinJS/Core/_Events",["exports","WinJS/Core/_Base"],function eventsInit(exports,_Base){"use strict";function createEventProperty(name){var eventPropStateName="_on"+name+"state";return{get:function(){var state=this[eventPropStateName];return state&&state.userHandler},set:function(handler){var state=this[eventPropStateName];if(handler){if(!state){state={wrapper:function(evt){return state.userHandler(evt)},userHandler:handler};Object.defineProperty(this,eventPropStateName,{value:state,enumerable:false,writable:true,configurable:true});this.addEventListener(name,state.wrapper,false)}state.userHandler=handler}else if(state){this.removeEventListener(name,state.wrapper,false);this[eventPropStateName]=null}},enumerable:true}}function createEventProperties(){var props={};for(var i=0,len=arguments.length;i<len;i++){var name=arguments[i];props["on"+name]=createEventProperty(name)}return props}var EventMixinEvent=_Base.Class.define(function EventMixinEvent_ctor(type,detail,target){this.detail=detail;this.target=target;this.timeStamp=Date.now();this.type=type},{bubbles:{value:false,writable:false},cancelable:{value:false,writable:false},currentTarget:{get:function(){return this.target}},defaultPrevented:{get:function(){return this._preventDefaultCalled}},trusted:{value:false,writable:false},eventPhase:{value:0,writable:false},target:null,timeStamp:null,type:null,preventDefault:function(){this._preventDefaultCalled=true},stopImmediatePropagation:function(){this._stopImmediatePropagationCalled=true},stopPropagation:function(){}},{supportedForProcessing:false});var eventMixin={_listeners:null,addEventListener:function(type,listener,useCapture){useCapture=useCapture||false;this._listeners=this._listeners||{};var eventListeners=this._listeners[type]=this._listeners[type]||[];for(var i=0,len=eventListeners.length;i<len;i++){var l=eventListeners[i];if(l.useCapture===useCapture&&l.listener===listener){return}}eventListeners.push({listener,useCapture})},dispatchEvent:function(type,details){var listeners=this._listeners&&this._listeners[type];if(listeners){var eventValue=new EventMixinEvent(type,details,this);listeners=listeners.slice(0,listeners.length);for(var i=0,len=listeners.length;i<len&&!eventValue._stopImmediatePropagationCalled;i++){listeners[i].listener(eventValue)}return eventValue.defaultPrevented||false}return false},removeEventListener:function(type,listener,useCapture){useCapture=useCapture||false;var listeners=this._listeners&&this._listeners[type];if(listeners){for(var i=0,len=listeners.length;i<len;i++){var l=listeners[i];if(l.listener===listener&&l.useCapture===useCapture){listeners.splice(i,1);if(listeners.length===0){delete this._listeners[type]}break}}}}};_Base.Namespace._moduleDefine(exports,"WinJS.Utilities",{_createEventProperty:createEventProperty,createEventProperties,eventMixin})});_winjs("WinJS/Core/_Trace",["WinJS/Core/_Global"],function traceInit(_Global){"use strict";function nop(v){return v}return{_traceAsyncOperationStarting:_Global.Debug&&_Global.Debug.msTraceAsyncOperationStarting&&_Global.Debug.msTraceAsyncOperationStarting.bind(_Global.Debug)||nop,_traceAsyncOperationCompleted:_Global.Debug&&_Global.Debug.msTraceAsyncOperationCompleted&&_Global.Debug.msTraceAsyncOperationCompleted.bind(_Global.Debug)||nop,_traceAsyncCallbackStarting:_Global.Debug&&_Global.Debug.msTraceAsyncCallbackStarting&&_Global.Debug.msTraceAsyncCallbackStarting.bind(_Global.Debug)||nop,_traceAsyncCallbackCompleted:_Global.Debug&&_Global.Debug.msTraceAsyncCallbackCompleted&&_Global.Debug.msTraceAsyncCallbackCompleted.bind(_Global.Debug)||nop}});_winjs("WinJS/Promise/_StateMachine",["WinJS/Core/_Global","WinJS/Core/_BaseCoreUtils","WinJS/Core/_Base","WinJS/Core/_ErrorFromName","WinJS/Core/_Events","WinJS/Core/_Trace"],function promiseStateMachineInit(_Global,_BaseCoreUtils,_Base,_ErrorFromName,_Events,_Trace){"use strict";_Global.Debug&&(_Global.Debug.setNonUserCodeExceptions=true);var ListenerType=_Base.Class.mix(_Base.Class.define(null,{},{supportedForProcessing:false}),_Events.eventMixin);var promiseEventListeners=new ListenerType;promiseEventListeners._listeners={};var errorET="error";var canceledName="Canceled";var tagWithStack=false;var tag={promise:1,thenPromise:2,errorPromise:4,exceptionPromise:8,completePromise:16};tag.all=tag.promise|tag.thenPromise|tag.errorPromise|tag.exceptionPromise|tag.completePromise;var error_number=1;var state_created,state_working,state_waiting,state_waiting_canceled,state_canceled,state_canceling,state_success_notify,state_success,state_error_notify,state_error;function _(){}state_created={name:"created",enter:function(promise){promise._setState(state_working)},cancel:_,done:_,then:_,_completed:_,_error:_,_notify:_,_progress:_,_setCompleteValue:_,_setErrorValue:_};state_working={name:"working",enter:_,cancel:function(promise){promise._setState(state_canceled)},done,then,_completed:completed,_error:error,_notify:_,_progress:progress,_setCompleteValue:setCompleteValue,_setErrorValue:setErrorValue};state_waiting={name:"waiting",enter:function(promise){var waitedUpon=promise._value;if(waitedUpon instanceof ThenPromise&&waitedUpon._state!==state_error&&waitedUpon._state!==state_success){pushListener(waitedUpon,{promise})}else{var error=function(value){if(waitedUpon._errorId){promise._chainedError(value,waitedUpon)}else{callonerror(promise,value,detailsForHandledError,waitedUpon,error);promise._error(value)}};error.handlesOnError=true;waitedUpon.then(promise._completed.bind(promise),error,promise._progress.bind(promise))}},cancel:function(promise){promise._setState(state_waiting_canceled)},done,then,_completed:completed,_error:error,_notify:_,_progress:progress,_setCompleteValue:setCompleteValue,_setErrorValue:setErrorValue};state_waiting_canceled={name:"waiting_canceled",enter:function(promise){promise._setState(state_canceling);var waitedUpon=promise._value;if(waitedUpon.cancel){waitedUpon.cancel()}},cancel:_,done,then,_completed:completed,_error:error,_notify:_,_progress:progress,_setCompleteValue:setCompleteValue,_setErrorValue:setErrorValue};state_canceled={name:"canceled",enter:function(promise){promise._setState(state_canceling);promise._cancelAction()},cancel:_,done,then,_completed:completed,_error:error,_notify:_,_progress:progress,_setCompleteValue:setCompleteValue,_setErrorValue:setErrorValue};state_canceling={name:"canceling",enter:function(promise){var error=new Error(canceledName);error.name=error.message;promise._value=error;promise._setState(state_error_notify)},cancel:_,done:_,then:_,_completed:_,_error:_,_notify:_,_progress:_,_setCompleteValue:_,_setErrorValue:_};state_success_notify={name:"complete_notify",enter:function(promise){promise.done=CompletePromise.prototype.done;promise.then=CompletePromise.prototype.then;if(promise._listeners){var queue=[promise];var p;while(queue.length){p=queue.shift();p._state._notify(p,queue)}}promise._setState(state_success)},cancel:_,done:null,then:null,_completed:_,_error:_,_notify:notifySuccess,_progress:_,_setCompleteValue:_,_setErrorValue:_};state_success={name:"success",enter:function(promise){promise.done=CompletePromise.prototype.done;promise.then=CompletePromise.prototype.then;promise._cleanupAction()},cancel:_,done:null,then:null,_completed:_,_error:_,_notify:notifySuccess,_progress:_,_setCompleteValue:_,_setErrorValue:_};state_error_notify={name:"error_notify",enter:function(promise){promise.done=ErrorPromise.prototype.done;promise.then=ErrorPromise.prototype.then;if(promise._listeners){var queue=[promise];var p;while(queue.length){p=queue.shift();p._state._notify(p,queue)}}promise._setState(state_error)},cancel:_,done:null,then:null,_completed:_,_error:_,_notify:notifyError,_progress:_,_setCompleteValue:_,_setErrorValue:_};state_error={name:"error",enter:function(promise){promise.done=ErrorPromise.prototype.done;promise.then=ErrorPromise.prototype.then;promise._cleanupAction()},cancel:_,done:null,then:null,_completed:_,_error:_,_notify:notifyError,_progress:_,_setCompleteValue:_,_setErrorValue:_};var PromiseStateMachine=_Base.Class.define(null,{_listeners:null,_nextState:null,_state:null,_value:null,cancel:function(){this._state.cancel(this);this._run()},done:function Promise_done(onComplete,onError,onProgress){this._state.done(this,onComplete,onError,onProgress)},then:function Promise_then(onComplete,onError,onProgress){return this._state.then(this,onComplete,onError,onProgress)},_chainedError:function(value,context){var result=this._state._error(this,value,detailsForChainedError,context);this._run();return result},_completed:function(value){var result=this._state._completed(this,value);this._run();return result},_error:function(value){var result=this._state._error(this,value,detailsForError);this._run();return result},_progress:function(value){this._state._progress(this,value)},_setState:function(state){this._nextState=state},_setCompleteValue:function(value){this._state._setCompleteValue(this,value);this._run()},_setChainedErrorValue:function(value,context){var result=this._state._setErrorValue(this,value,detailsForChainedError,context);this._run();return result},_setExceptionValue:function(value){var result=this._state._setErrorValue(this,value,detailsForException);this._run();return result},_run:function(){while(this._nextState){this._state=this._nextState;this._nextState=null;this._state.enter(this)}}},{supportedForProcessing:false});function completed(promise,value){var targetState;if(value&&typeof value==="object"&&typeof value.then==="function"){targetState=state_waiting}else{targetState=state_success_notify}promise._value=value;promise._setState(targetState)}function createErrorDetails(exception,error,promise,id,parent,handler){return{exception,error,promise,handler,id,parent}}function detailsForHandledError(promise,errorValue,context,handler){var exception=context._isException;var errorId=context._errorId;return createErrorDetails(exception?errorValue:null,exception?null:errorValue,promise,errorId,context,handler)}function detailsForChainedError(promise,errorValue,context){var exception=context._isException;var errorId=context._errorId;setErrorInfo(promise,errorId,exception);return createErrorDetails(exception?errorValue:null,exception?null:errorValue,promise,errorId,context)}function detailsForError(promise,errorValue){var errorId=++error_number;setErrorInfo(promise,errorId);return createErrorDetails(null,errorValue,promise,errorId)}function detailsForException(promise,exceptionValue){var errorId=++error_number;setErrorInfo(promise,errorId,true);return createErrorDetails(exceptionValue,null,promise,errorId)}function done(promise,onComplete,onError,onProgress){var asyncOpID=_Trace._traceAsyncOperationStarting("WinJS.Promise.done");pushListener(promise,{c:onComplete,e:onError,p:onProgress,asyncOpID})}function error(promise,value,onerrorDetails,context){promise._value=value;callonerror(promise,value,onerrorDetails,context);promise._setState(state_error_notify)}function notifySuccess(promise,queue){var value=promise._value;var listeners=promise._listeners;if(!listeners){return}promise._listeners=null;var i,len;for(i=0,len=Array.isArray(listeners)?listeners.length:1;i<len;i++){var listener=len===1?listeners:listeners[i];var onComplete=listener.c;var target=listener.promise;_Trace._traceAsyncOperationCompleted(listener.asyncOpID,_Global.Debug&&_Global.Debug.MS_ASYNC_OP_STATUS_SUCCESS);if(target){_Trace._traceAsyncCallbackStarting(listener.asyncOpID);try{target._setCompleteValue(onComplete?onComplete(value):value)}catch(ex){target._setExceptionValue(ex)}finally{_Trace._traceAsyncCallbackCompleted()}if(target._state!==state_waiting&&target._listeners){queue.push(target)}}else{CompletePromise.prototype.done.call(promise,onComplete)}}}function notifyError(promise,queue){var value=promise._value;var listeners=promise._listeners;if(!listeners){return}promise._listeners=null;var i,len;for(i=0,len=Array.isArray(listeners)?listeners.length:1;i<len;i++){var listener=len===1?listeners:listeners[i];var onError=listener.e;var target=listener.promise;var errorID=_Global.Debug&&(value&&value.name===canceledName?_Global.Debug.MS_ASYNC_OP_STATUS_CANCELED:_Global.Debug.MS_ASYNC_OP_STATUS_ERROR);_Trace._traceAsyncOperationCompleted(listener.asyncOpID,errorID);if(target){var asyncCallbackStarted=false;try{if(onError){_Trace._traceAsyncCallbackStarting(listener.asyncOpID);asyncCallbackStarted=true;if(!onError.handlesOnError){callonerror(target,value,detailsForHandledError,promise,onError)}target._setCompleteValue(onError(value))}else{target._setChainedErrorValue(value,promise)}}catch(ex){target._setExceptionValue(ex)}finally{if(asyncCallbackStarted){_Trace._traceAsyncCallbackCompleted()}}if(target._state!==state_waiting&&target._listeners){queue.push(target)}}else{ErrorPromise.prototype.done.call(promise,null,onError)}}}function callonerror(promise,value,onerrorDetailsGenerator,context,handler){if(promiseEventListeners._listeners[errorET]){if(value instanceof Error&&value.message===canceledName){return}promiseEventListeners.dispatchEvent(errorET,onerrorDetailsGenerator(promise,value,context,handler))}}function progress(promise,value){var listeners=promise._listeners;if(listeners){var i,len;for(i=0,len=Array.isArray(listeners)?listeners.length:1;i<len;i++){var listener=len===1?listeners:listeners[i];var onProgress=listener.p;if(onProgress){try{onProgress(value)}catch(ex){}}if(!(listener.c||listener.e)&&listener.promise){listener.promise._progress(value)}}}}function pushListener(promise,listener){var listeners=promise._listeners;if(listeners){listeners=Array.isArray(listeners)?listeners:[listeners];listeners.push(listener)}else{listeners=listener}promise._listeners=listeners}function setErrorInfo(promise,errorId,isException){promise._isException=isException||false;promise._errorId=errorId}function setErrorValue(promise,value,onerrorDetails,context){promise._value=value;callonerror(promise,value,onerrorDetails,context);promise._setState(state_error)}function setCompleteValue(promise,value){var targetState;if(value&&typeof value==="object"&&typeof value.then==="function"){targetState=state_waiting}else{targetState=state_success}promise._value=value;promise._setState(targetState)}function then(promise,onComplete,onError,onProgress){var result=new ThenPromise(promise);var asyncOpID=_Trace._traceAsyncOperationStarting("WinJS.Promise.then");pushListener(promise,{promise:result,c:onComplete,e:onError,p:onProgress,asyncOpID});return result}var ThenPromise=_Base.Class.derive(PromiseStateMachine,function(creator){if(tagWithStack&&(tagWithStack===true||tagWithStack&tag.thenPromise)){this._stack=Promise._getStack()}this._creator=creator;this._setState(state_created);this._run()},{_creator:null,_cancelAction:function(){if(this._creator){this._creator.cancel()}},_cleanupAction:function(){this._creator=null}},{supportedForProcessing:false});var ErrorPromise=_Base.Class.define(function ErrorPromise_ctor(value){if(tagWithStack&&(tagWithStack===true||tagWithStack&tag.errorPromise)){this._stack=Promise._getStack()}this._value=value;callonerror(this,value,detailsForError)},{cancel:function(){},done:function ErrorPromise_done(unused,onError){var value=this._value;if(onError){try{if(!onError.handlesOnError){callonerror(null,value,detailsForHandledError,this,onError)}var result=onError(value);if(result&&typeof result==="object"&&typeof result.done==="function"){result.done()}return}catch(ex){value=ex}}if(value instanceof Error&&value.message===canceledName){return}Promise._doneHandler(value)},then:function ErrorPromise_then(unused,onError){if(!onError){return this}var result;var value=this._value;try{if(!onError.handlesOnError){callonerror(null,value,detailsForHandledError,this,onError)}result=new CompletePromise(onError(value))}catch(ex){if(ex===value){result=this}else{result=new ExceptionPromise(ex)}}return result}},{supportedForProcessing:false});var ExceptionPromise=_Base.Class.derive(ErrorPromise,function ExceptionPromise_ctor(value){if(tagWithStack&&(tagWithStack===true||tagWithStack&tag.exceptionPromise)){this._stack=Promise._getStack()}this._value=value;callonerror(this,value,detailsForException)},{},{supportedForProcessing:false});var CompletePromise=_Base.Class.define(function CompletePromise_ctor(value){if(tagWithStack&&(tagWithStack===true||tagWithStack&tag.completePromise)){this._stack=Promise._getStack()}if(value&&typeof value==="object"&&typeof value.then==="function"){var result=new ThenPromise(null);result._setCompleteValue(value);return result}this._value=value},{cancel:function(){},done:function CompletePromise_done(onComplete){if(!onComplete){return}try{var result=onComplete(this._value);if(result&&typeof result==="object"&&typeof result.done==="function"){result.done()}}catch(ex){Promise._doneHandler(ex)}},then:function CompletePromise_then(onComplete){try{var newValue=onComplete?onComplete(this._value):this._value;return newValue===this._value?this:new CompletePromise(newValue)}catch(ex){return new ExceptionPromise(ex)}}},{supportedForProcessing:false});function timeout(timeoutMS){var id;return new Promise(function(c){if(timeoutMS){id=_Global.setTimeout(c,timeoutMS)}else{_BaseCoreUtils._setImmediate(c)}},function(){if(id){_Global.clearTimeout(id)}})}function timeoutWithPromise(timeout,promise){var cancelPromise=function(){promise.cancel()};var cancelTimeout=function(){timeout.cancel()};timeout.then(cancelPromise);promise.then(cancelTimeout,cancelTimeout);return promise}var staticCanceledPromise;var Promise=_Base.Class.derive(PromiseStateMachine,function Promise_ctor(init,oncancel){if(tagWithStack&&(tagWithStack===true||tagWithStack&tag.promise)){this._stack=Promise._getStack()}this._oncancel=oncancel;this._setState(state_created);this._run();try{var complete=this._completed.bind(this);var error=this._error.bind(this);var progress=this._progress.bind(this);init(complete,error,progress)}catch(ex){this._setExceptionValue(ex)}},{_oncancel:null,_cancelAction:function(){try{if(this._oncancel){this._oncancel()}else{throw new Error("Promise did not implement oncancel")}}catch(ex){var msg=ex.message;var stack=ex.stack;promiseEventListeners.dispatchEvent("error",ex)}},_cleanupAction:function(){this._oncancel=null}},{addEventListener:function Promise_addEventListener(eventType,listener,capture){promiseEventListeners.addEventListener(eventType,listener,capture)},any:function Promise_any(values){return new Promise(function(complete,error){var keys=Object.keys(values);if(keys.length===0){complete()}var canceled=0;keys.forEach(function(key){Promise.as(values[key]).then(function(){complete({key,value:values[key]})},function(e){if(e instanceof Error&&e.name===canceledName){if(++canceled===keys.length){complete(Promise.cancel)}return}error({key,value:values[key]})})})},function(){var keys=Object.keys(values);keys.forEach(function(key){var promise=Promise.as(values[key]);if(typeof promise.cancel==="function"){promise.cancel()}})})},as:function Promise_as(value){if(value&&typeof value==="object"&&typeof value.then==="function"){return value}return new CompletePromise(value)},cancel:{get:function(){return staticCanceledPromise=staticCanceledPromise||new ErrorPromise(new _ErrorFromName(canceledName))}},dispatchEvent:function Promise_dispatchEvent(eventType,details){return promiseEventListeners.dispatchEvent(eventType,details)},is:function Promise_is(value){return value&&typeof value==="object"&&typeof value.then==="function"},join:function Promise_join(values){return new Promise(function(complete,error,progress){var keys=Object.keys(values);var errors=Array.isArray(values)?[]:{};var results=Array.isArray(values)?[]:{};var undefineds=0;var pending=keys.length;var argDone=function(key){if(--pending===0){var errorCount=Object.keys(errors).length;if(errorCount===0){complete(results)}else{var canceledCount=0;keys.forEach(function(key){var e=errors[key];if(e instanceof Error&&e.name===canceledName){canceledCount++}});if(canceledCount===errorCount){complete(Promise.cancel)}else{error(errors)}}}else{progress({Key:key,Done:true})}};keys.forEach(function(key){var value=values[key];if(value===undefined){undefineds++}else{Promise.then(value,function(value){results[key]=value;argDone(key)},function(value){errors[key]=value;argDone(key)})}});pending-=undefineds;if(pending===0){complete(results);return}},function(){Object.keys(values).forEach(function(key){var promise=Promise.as(values[key]);if(typeof promise.cancel==="function"){promise.cancel()}})})},removeEventListener:function Promise_removeEventListener(eventType,listener,capture){promiseEventListeners.removeEventListener(eventType,listener,capture)},supportedForProcessing:false,then:function Promise_then(value,onComplete,onError,onProgress){return Promise.as(value).then(onComplete,onError,onProgress)},thenEach:function Promise_thenEach(values,onComplete,onError,onProgress){var result=Array.isArray(values)?[]:{};Object.keys(values).forEach(function(key){result[key]=Promise.as(values[key]).then(onComplete,onError,onProgress)});return Promise.join(result)},timeout:function Promise_timeout(time,promise){var to=timeout(time);return promise?timeoutWithPromise(to,promise):to},wrap:function Promise_wrap(value){return new CompletePromise(value)},wrapError:function Promise_wrapError(error){return new ErrorPromise(error)},_veryExpensiveTagWithStack:{get:function(){return tagWithStack},set:function(value){tagWithStack=value}},_veryExpensiveTagWithStack_tag:tag,_getStack:function(){if(_Global.Debug&&_Global.Debug.debuggerEnabled){try{throw new Error}catch(e){return e.stack}}},_cancelBlocker:function Promise__cancelBlocker(input,oncancel){if(!Promise.is(input)){return Promise.wrap(input)}var complete;var error;var output=new Promise(function(c,e){complete=c;error=e},function(){complete=null;error=null;oncancel&&oncancel()});input.then(function(v){complete&&complete(v)},function(e){error&&error(e)});return output}});Object.defineProperties(Promise,_Events.createEventProperties(errorET));Promise._doneHandler=function(value){_BaseCoreUtils._setImmediate(function Promise_done_rethrow(){throw value})};return{PromiseStateMachine,Promise,state_created}});_winjs("WinJS/Promise",["WinJS/Core/_Base","WinJS/Promise/_StateMachine"],function promiseInit(_Base,_StateMachine){"use strict";_Base.Namespace.define("WinJS",{Promise:_StateMachine.Promise});return _StateMachine.Promise});__winjs_exports=_modules["WinJS/Core/_WinJS"];__winjs_exports.TPromise=__winjs_exports.Promise;__winjs_exports.PPromise=__winjs_exports.Promise})();var Promise=__winjs_exports.Promise;var TPromise=__winjs_exports.TPromise;var PPromise=__winjs_exports.PPromise}).call(this,__webpack_require__(6),__webpack_require__(5))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"Range",function(){return Range});var _position_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9);var Range=function(){function Range(startLineNumber,startColumn,endLineNumber,endColumn){if(startLineNumber>endLineNumber||startLineNumber===endLineNumber&&startColumn>endColumn){this.startLineNumber=endLineNumber;this.startColumn=endColumn;this.endLineNumber=startLineNumber;this.endColumn=startColumn}else{this.startLineNumber=startLineNumber;this.startColumn=startColumn;this.endLineNumber=endLineNumber;this.endColumn=endColumn}}Range.prototype.isEmpty=function(){return Range.isEmpty(this)};Range.isEmpty=function(range){return range.startLineNumber===range.endLineNumber&&range.startColumn===range.endColumn};Range.prototype.containsPosition=function(position){return Range.containsPosition(this,position)};Range.containsPosition=function(range,position){if(position.lineNumber<range.startLineNumber||position.lineNumber>range.endLineNumber){return false}if(position.lineNumber===range.startLineNumber&&position.column<range.startColumn){return false}if(position.lineNumber===range.endLineNumber&&position.column>range.endColumn){return false}return true};Range.prototype.containsRange=function(range){return Range.containsRange(this,range)};Range.containsRange=function(range,otherRange){if(otherRange.startLineNumber<range.startLineNumber||otherRange.endLineNumber<range.startLineNumber){return false}if(otherRange.startLineNumber>range.endLineNumber||otherRange.endLineNumber>range.endLineNumber){return false}if(otherRange.startLineNumber===range.startLineNumber&&otherRange.startColumn<range.startColumn){return false}if(otherRange.endLineNumber===range.endLineNumber&&otherRange.endColumn>range.endColumn){return false}return true};Range.prototype.plusRange=function(range){return Range.plusRange(this,range)};Range.plusRange=function(a,b){var startLineNumber;var startColumn;var endLineNumber;var endColumn;if(b.startLineNumber<a.startLineNumber){startLineNumber=b.startLineNumber;startColumn=b.startColumn}else if(b.startLineNumber===a.startLineNumber){startLineNumber=b.startLineNumber;startColumn=Math.min(b.startColumn,a.startColumn)}else{startLineNumber=a.startLineNumber;startColumn=a.startColumn}if(b.endLineNumber>a.endLineNumber){endLineNumber=b.endLineNumber;endColumn=b.endColumn}else if(b.endLineNumber===a.endLineNumber){endLineNumber=b.endLineNumber;endColumn=Math.max(b.endColumn,a.endColumn)}else{endLineNumber=a.endLineNumber;endColumn=a.endColumn}return new Range(startLineNumber,startColumn,endLineNumber,endColumn)};Range.prototype.intersectRanges=function(range){return Range.intersectRanges(this,range)};Range.intersectRanges=function(a,b){var resultStartLineNumber=a.startLineNumber;var resultStartColumn=a.startColumn;var resultEndLineNumber=a.endLineNumber;var resultEndColumn=a.endColumn;var otherStartLineNumber=b.startLineNumber;var otherStartColumn=b.startColumn;var otherEndLineNumber=b.endLineNumber;var otherEndColumn=b.endColumn;if(resultStartLineNumber<otherStartLineNumber){resultStartLineNumber=otherStartLineNumber;resultStartColumn=otherStartColumn}else if(resultStartLineNumber===otherStartLineNumber){resultStartColumn=Math.max(resultStartColumn,otherStartColumn)}if(resultEndLineNumber>otherEndLineNumber){resultEndLineNumber=otherEndLineNumber;resultEndColumn=otherEndColumn}else if(resultEndLineNumber===otherEndLineNumber){resultEndColumn=Math.min(resultEndColumn,otherEndColumn)}if(resultStartLineNumber>resultEndLineNumber){return null}if(resultStartLineNumber===resultEndLineNumber&&resultStartColumn>resultEndColumn){return null}return new Range(resultStartLineNumber,resultStartColumn,resultEndLineNumber,resultEndColumn)};Range.prototype.equalsRange=function(other){return Range.equalsRange(this,other)};Range.equalsRange=function(a,b){return!!a&&!!b&&a.startLineNumber===b.startLineNumber&&a.startColumn===b.startColumn&&a.endLineNumber===b.endLineNumber&&a.endColumn===b.endColumn};Range.prototype.getEndPosition=function(){return new _position_js__WEBPACK_IMPORTED_MODULE_0__["Position"](this.endLineNumber,this.endColumn)};Range.prototype.getStartPosition=function(){return new _position_js__WEBPACK_IMPORTED_MODULE_0__["Position"](this.startLineNumber,this.startColumn)};Range.prototype.toString=function(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"};Range.prototype.setEndPosition=function(endLineNumber,endColumn){return new Range(this.startLineNumber,this.startColumn,endLineNumber,endColumn)};Range.prototype.setStartPosition=function(startLineNumber,startColumn){return new Range(startLineNumber,startColumn,this.endLineNumber,this.endColumn)};Range.prototype.collapseToStart=function(){return Range.collapseToStart(this)};Range.collapseToStart=function(range){return new Range(range.startLineNumber,range.startColumn,range.startLineNumber,range.startColumn)};Range.fromPositions=function(start,end){if(end===void 0){end=start}return new Range(start.lineNumber,start.column,end.lineNumber,end.column)};Range.lift=function(range){if(!range){return null}return new Range(range.startLineNumber,range.startColumn,range.endLineNumber,range.endColumn)};Range.isIRange=function(obj){return obj&&typeof obj.startLineNumber==="number"&&typeof obj.startColumn==="number"&&typeof obj.endLineNumber==="number"&&typeof obj.endColumn==="number"};Range.areIntersectingOrTouching=function(a,b){if(a.endLineNumber<b.startLineNumber||a.endLineNumber===b.startLineNumber&&a.endColumn<b.startColumn){return false}if(b.endLineNumber<a.startLineNumber||b.endLineNumber===a.startLineNumber&&b.endColumn<a.startColumn){return false}return true};Range.compareRangesUsingStarts=function(a,b){var aStartLineNumber=a.startLineNumber|0;var bStartLineNumber=b.startLineNumber|0;if(aStartLineNumber===bStartLineNumber){var aStartColumn=a.startColumn|0;var bStartColumn=b.startColumn|0;if(aStartColumn===bStartColumn){var aEndLineNumber=a.endLineNumber|0;var bEndLineNumber=b.endLineNumber|0;if(aEndLineNumber===bEndLineNumber){var aEndColumn=a.endColumn|0;var bEndColumn=b.endColumn|0;return aEndColumn-bEndColumn}return aEndLineNumber-bEndLineNumber}return aStartColumn-bStartColumn}return aStartLineNumber-bStartLineNumber};Range.compareRangesUsingEnds=function(a,b){if(a.endLineNumber===b.endLineNumber){if(a.endColumn===b.endColumn){if(a.startLineNumber===b.startLineNumber){return a.startColumn-b.startColumn}return a.startLineNumber-b.startLineNumber}return a.endColumn-b.endColumn}return a.endLineNumber-b.endLineNumber};Range.spansMultipleLines=function(range){return range.endLineNumber>range.startLineNumber};return Range}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"Position",function(){return Position});var Position=function(){function Position(lineNumber,column){this.lineNumber=lineNumber;this.column=column}Position.prototype.equals=function(other){return Position.equals(this,other)};Position.equals=function(a,b){if(!a&&!b){return true}return!!a&&!!b&&a.lineNumber===b.lineNumber&&a.column===b.column};Position.prototype.isBefore=function(other){return Position.isBefore(this,other)};Position.isBefore=function(a,b){if(a.lineNumber<b.lineNumber){return true}if(b.lineNumber<a.lineNumber){return false}return a.column<b.column};Position.prototype.isBeforeOrEqual=function(other){return Position.isBeforeOrEqual(this,other)};Position.isBeforeOrEqual=function(a,b){if(a.lineNumber<b.lineNumber){return true}if(b.lineNumber<a.lineNumber){return false}return a.column<=b.column};Position.compare=function(a,b){var aLineNumber=a.lineNumber|0;var bLineNumber=b.lineNumber|0;if(aLineNumber===bLineNumber){var aColumn=a.column|0;var bColumn=b.column|0;return aColumn-bColumn}return aLineNumber-bLineNumber};Position.prototype.clone=function(){return new Position(this.lineNumber,this.column)};Position.prototype.toString=function(){return"("+this.lineNumber+","+this.column+")"};Position.lift=function(pos){return new Position(pos.lineNumber,pos.column)};Position.isIPosition=function(obj){return obj&&typeof obj.lineNumber==="number"&&typeof obj.column==="number"};return Position}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"DiffComputer",function(){return DiffComputer});var _base_common_diff_diff_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11);var _base_common_strings_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(13);var __extends=undefined&&undefined.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var MAXIMUM_RUN_TIME=5e3;var MINIMUM_MATCHING_CHARACTER_LENGTH=3;function computeDiff(originalSequence,modifiedSequence,continueProcessingPredicate,pretty){var diffAlgo=new _base_common_diff_diff_js__WEBPACK_IMPORTED_MODULE_0__["LcsDiff"](originalSequence,modifiedSequence,continueProcessingPredicate);return diffAlgo.ComputeDiff(pretty)}var MarkerSequence=function(){function MarkerSequence(buffer,startMarkers,endMarkers){this.buffer=buffer;this.startMarkers=startMarkers;this.endMarkers=endMarkers}MarkerSequence.prototype.getLength=function(){return this.startMarkers.length};MarkerSequence.prototype.getElementHash=function(i){return this.buffer.substring(this.startMarkers[i].offset,this.endMarkers[i].offset)};MarkerSequence.prototype.getStartLineNumber=function(i){if(i===this.startMarkers.length){return this.startMarkers[i-1].lineNumber+1}return this.startMarkers[i].lineNumber};MarkerSequence.prototype.getStartColumn=function(i){return this.startMarkers[i].column};MarkerSequence.prototype.getEndLineNumber=function(i){return this.endMarkers[i].lineNumber};MarkerSequence.prototype.getEndColumn=function(i){return this.endMarkers[i].column};return MarkerSequence}();var LineMarkerSequence=function(_super){__extends(LineMarkerSequence,_super);function LineMarkerSequence(lines){var _this=this;var buffer="";var startMarkers=[];var endMarkers=[];for(var pos=0,i=0,length_1=lines.length;i<length_1;i++){buffer+=lines[i];var startColumn=LineMarkerSequence._getFirstNonBlankColumn(lines[i],1);var endColumn=LineMarkerSequence._getLastNonBlankColumn(lines[i],1);startMarkers.push({offset:pos+startColumn-1,lineNumber:i+1,column:startColumn});endMarkers.push({offset:pos+endColumn-1,lineNumber:i+1,column:endColumn});pos+=lines[i].length}_this=_super.call(this,buffer,startMarkers,endMarkers)||this;return _this}LineMarkerSequence._getFirstNonBlankColumn=function(txt,defaultValue){var r=_base_common_strings_js__WEBPACK_IMPORTED_MODULE_1__["firstNonWhitespaceIndex"](txt);if(r===-1){return defaultValue}return r+1};LineMarkerSequence._getLastNonBlankColumn=function(txt,defaultValue){var r=_base_common_strings_js__WEBPACK_IMPORTED_MODULE_1__["lastNonWhitespaceIndex"](txt);if(r===-1){return defaultValue}return r+2};LineMarkerSequence.prototype.getCharSequence=function(startIndex,endIndex){var startMarkers=[];var endMarkers=[];for(var index=startIndex;index<=endIndex;index++){var startMarker=this.startMarkers[index];var endMarker=this.endMarkers[index];for(var i=startMarker.offset;i<endMarker.offset;i++){startMarkers.push({offset:i,lineNumber:startMarker.lineNumber,column:startMarker.column+(i-startMarker.offset)});endMarkers.push({offset:i+1,lineNumber:startMarker.lineNumber,column:startMarker.column+(i-startMarker.offset)+1})}}return new MarkerSequence(this.buffer,startMarkers,endMarkers)};return LineMarkerSequence}(MarkerSequence);var CharChange=function(){function CharChange(originalStartLineNumber,originalStartColumn,originalEndLineNumber,originalEndColumn,modifiedStartLineNumber,modifiedStartColumn,modifiedEndLineNumber,modifiedEndColumn){this.originalStartLineNumber=originalStartLineNumber;this.originalStartColumn=originalStartColumn;this.originalEndLineNumber=originalEndLineNumber;this.originalEndColumn=originalEndColumn;this.modifiedStartLineNumber=modifiedStartLineNumber;this.modifiedStartColumn=modifiedStartColumn;this.modifiedEndLineNumber=modifiedEndLineNumber;this.modifiedEndColumn=modifiedEndColumn}CharChange.createFromDiffChange=function(diffChange,originalCharSequence,modifiedCharSequence){var originalStartLineNumber;var originalStartColumn;var originalEndLineNumber;var originalEndColumn;var modifiedStartLineNumber;var modifiedStartColumn;var modifiedEndLineNumber;var modifiedEndColumn;if(diffChange.originalLength===0){originalStartLineNumber=0;originalStartColumn=0;originalEndLineNumber=0;originalEndColumn=0}else{originalStartLineNumber=originalCharSequence.getStartLineNumber(diffChange.originalStart);originalStartColumn=originalCharSequence.getStartColumn(diffChange.originalStart);originalEndLineNumber=originalCharSequence.getEndLineNumber(diffChange.originalStart+diffChange.originalLength-1);originalEndColumn=originalCharSequence.getEndColumn(diffChange.originalStart+diffChange.originalLength-1)}if(diffChange.modifiedLength===0){modifiedStartLineNumber=0;modifiedStartColumn=0;modifiedEndLineNumber=0;modifiedEndColumn=0}else{modifiedStartLineNumber=modifiedCharSequence.getStartLineNumber(diffChange.modifiedStart);modifiedStartColumn=modifiedCharSequence.getStartColumn(diffChange.modifiedStart);modifiedEndLineNumber=modifiedCharSequence.getEndLineNumber(diffChange.modifiedStart+diffChange.modifiedLength-1);modifiedEndColumn=modifiedCharSequence.getEndColumn(diffChange.modifiedStart+diffChange.modifiedLength-1)}return new CharChange(originalStartLineNumber,originalStartColumn,originalEndLineNumber,originalEndColumn,modifiedStartLineNumber,modifiedStartColumn,modifiedEndLineNumber,modifiedEndColumn)};return CharChange}();function postProcessCharChanges(rawChanges){if(rawChanges.length<=1){return rawChanges}var result=[rawChanges[0]];var prevChange=result[0];for(var i=1,len=rawChanges.length;i<len;i++){var currChange=rawChanges[i];var originalMatchingLength=currChange.originalStart-(prevChange.originalStart+prevChange.originalLength);var modifiedMatchingLength=currChange.modifiedStart-(prevChange.modifiedStart+prevChange.modifiedLength);var matchingLength=Math.min(originalMatchingLength,modifiedMatchingLength);if(matchingLength<MINIMUM_MATCHING_CHARACTER_LENGTH){prevChange.originalLength=currChange.originalStart+currChange.originalLength-prevChange.originalStart;prevChange.modifiedLength=currChange.modifiedStart+currChange.modifiedLength-prevChange.modifiedStart}else{result.push(currChange);prevChange=currChange}}return result}var LineChange=function(){function LineChange(originalStartLineNumber,originalEndLineNumber,modifiedStartLineNumber,modifiedEndLineNumber,charChanges){this.originalStartLineNumber=originalStartLineNumber;this.originalEndLineNumber=originalEndLineNumber;this.modifiedStartLineNumber=modifiedStartLineNumber;this.modifiedEndLineNumber=modifiedEndLineNumber;this.charChanges=charChanges}LineChange.createFromDiffResult=function(diffChange,originalLineSequence,modifiedLineSequence,continueProcessingPredicate,shouldPostProcessCharChanges){var originalStartLineNumber;var originalEndLineNumber;var modifiedStartLineNumber;var modifiedEndLineNumber;var charChanges;if(diffChange.originalLength===0){originalStartLineNumber=originalLineSequence.getStartLineNumber(diffChange.originalStart)-1;originalEndLineNumber=0}else{originalStartLineNumber=originalLineSequence.getStartLineNumber(diffChange.originalStart);originalEndLineNumber=originalLineSequence.getEndLineNumber(diffChange.originalStart+diffChange.originalLength-1)}if(diffChange.modifiedLength===0){modifiedStartLineNumber=modifiedLineSequence.getStartLineNumber(diffChange.modifiedStart)-1;modifiedEndLineNumber=0}else{modifiedStartLineNumber=modifiedLineSequence.getStartLineNumber(diffChange.modifiedStart);modifiedEndLineNumber=modifiedLineSequence.getEndLineNumber(diffChange.modifiedStart+diffChange.modifiedLength-1)}if(diffChange.originalLength!==0&&diffChange.modifiedLength!==0&&continueProcessingPredicate()){var originalCharSequence=originalLineSequence.getCharSequence(diffChange.originalStart,diffChange.originalStart+diffChange.originalLength-1);var modifiedCharSequence=modifiedLineSequence.getCharSequence(diffChange.modifiedStart,diffChange.modifiedStart+diffChange.modifiedLength-1);var rawChanges=computeDiff(originalCharSequence,modifiedCharSequence,continueProcessingPredicate,false);if(shouldPostProcessCharChanges){rawChanges=postProcessCharChanges(rawChanges)}charChanges=[];for(var i=0,length_2=rawChanges.length;i<length_2;i++){charChanges.push(CharChange.createFromDiffChange(rawChanges[i],originalCharSequence,modifiedCharSequence))}}return new LineChange(originalStartLineNumber,originalEndLineNumber,modifiedStartLineNumber,modifiedEndLineNumber,charChanges)};return LineChange}();var DiffComputer=function(){function DiffComputer(originalLines,modifiedLines,opts){this.shouldPostProcessCharChanges=opts.shouldPostProcessCharChanges;this.shouldIgnoreTrimWhitespace=opts.shouldIgnoreTrimWhitespace;this.shouldMakePrettyDiff=opts.shouldMakePrettyDiff;this.maximumRunTimeMs=MAXIMUM_RUN_TIME;this.originalLines=originalLines;this.modifiedLines=modifiedLines;this.original=new LineMarkerSequence(originalLines);this.modified=new LineMarkerSequence(modifiedLines)}DiffComputer.prototype.computeDiff=function(){if(this.original.getLength()===1&&this.original.getElementHash(0).length===0){return[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.getLength(),charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]}if(this.modified.getLength()===1&&this.modified.getElementHash(0).length===0){return[{originalStartLineNumber:1,originalEndLineNumber:this.original.getLength(),modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]}this.computationStartTime=(new Date).getTime();var rawChanges=computeDiff(this.original,this.modified,this._continueProcessingPredicate.bind(this),this.shouldMakePrettyDiff);if(this.shouldIgnoreTrimWhitespace){var lineChanges=[];for(var i=0,length_3=rawChanges.length;i<length_3;i++){lineChanges.push(LineChange.createFromDiffResult(rawChanges[i],this.original,this.modified,this._continueProcessingPredicate.bind(this),this.shouldPostProcessCharChanges))}return lineChanges}var result=[];var originalLineIndex=0;var modifiedLineIndex=0;for(var i=-1,len=rawChanges.length;i<len;i++){var nextChange=i+1<len?rawChanges[i+1]:null;var originalStop=nextChange?nextChange.originalStart:this.originalLines.length;var modifiedStop=nextChange?nextChange.modifiedStart:this.modifiedLines.length;while(originalLineIndex<originalStop&&modifiedLineIndex<modifiedStop){var originalLine=this.originalLines[originalLineIndex];var modifiedLine=this.modifiedLines[modifiedLineIndex];if(originalLine!==modifiedLine){{var originalStartColumn=LineMarkerSequence._getFirstNonBlankColumn(originalLine,1);var modifiedStartColumn=LineMarkerSequence._getFirstNonBlankColumn(modifiedLine,1);while(originalStartColumn>1&&modifiedStartColumn>1){var originalChar=originalLine.charCodeAt(originalStartColumn-2);var modifiedChar=modifiedLine.charCodeAt(modifiedStartColumn-2);if(originalChar!==modifiedChar){break}originalStartColumn--;modifiedStartColumn--}if(originalStartColumn>1||modifiedStartColumn>1){this._pushTrimWhitespaceCharChange(result,originalLineIndex+1,1,originalStartColumn,modifiedLineIndex+1,1,modifiedStartColumn)}}{var originalEndColumn=LineMarkerSequence._getLastNonBlankColumn(originalLine,1);var modifiedEndColumn=LineMarkerSequence._getLastNonBlankColumn(modifiedLine,1);var originalMaxColumn=originalLine.length+1;var modifiedMaxColumn=modifiedLine.length+1;while(originalEndColumn<originalMaxColumn&&modifiedEndColumn<modifiedMaxColumn){var originalChar=originalLine.charCodeAt(originalEndColumn-1);var modifiedChar=originalLine.charCodeAt(modifiedEndColumn-1);if(originalChar!==modifiedChar){break}originalEndColumn++;modifiedEndColumn++}if(originalEndColumn<originalMaxColumn||modifiedEndColumn<modifiedMaxColumn){this._pushTrimWhitespaceCharChange(result,originalLineIndex+1,originalEndColumn,originalMaxColumn,modifiedLineIndex+1,modifiedEndColumn,modifiedMaxColumn)}}}originalLineIndex++;modifiedLineIndex++}if(nextChange){result.push(LineChange.createFromDiffResult(nextChange,this.original,this.modified,this._continueProcessingPredicate.bind(this),this.shouldPostProcessCharChanges));originalLineIndex+=nextChange.originalLength;modifiedLineIndex+=nextChange.modifiedLength}}return result};DiffComputer.prototype._pushTrimWhitespaceCharChange=function(result,originalLineNumber,originalStartColumn,originalEndColumn,modifiedLineNumber,modifiedStartColumn,modifiedEndColumn){if(this._mergeTrimWhitespaceCharChange(result,originalLineNumber,originalStartColumn,originalEndColumn,modifiedLineNumber,modifiedStartColumn,modifiedEndColumn)){return}result.push(new LineChange(originalLineNumber,originalLineNumber,modifiedLineNumber,modifiedLineNumber,[new CharChange(originalLineNumber,originalStartColumn,originalLineNumber,originalEndColumn,modifiedLineNumber,modifiedStartColumn,modifiedLineNumber,modifiedEndColumn)]))};DiffComputer.prototype._mergeTrimWhitespaceCharChange=function(result,originalLineNumber,originalStartColumn,originalEndColumn,modifiedLineNumber,modifiedStartColumn,modifiedEndColumn){var len=result.length;if(len===0){return false}var prevChange=result[len-1];if(prevChange.originalEndLineNumber===0||prevChange.modifiedEndLineNumber===0){return false}if(prevChange.originalEndLineNumber+1===originalLineNumber&&prevChange.modifiedEndLineNumber+1===modifiedLineNumber){prevChange.originalEndLineNumber=originalLineNumber;prevChange.modifiedEndLineNumber=modifiedLineNumber;prevChange.charChanges.push(new CharChange(originalLineNumber,originalStartColumn,originalLineNumber,originalEndColumn,modifiedLineNumber,modifiedStartColumn,modifiedLineNumber,modifiedEndColumn));return true}return false};DiffComputer.prototype._continueProcessingPredicate=function(){if(this.maximumRunTimeMs===0){return true}var now=(new Date).getTime();return now-this.computationStartTime<this.maximumRunTimeMs};return DiffComputer}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"stringDiff",function(){return stringDiff});__webpack_require__.d(__webpack_exports__,"Debug",function(){return Debug});__webpack_require__.d(__webpack_exports__,"MyArray",function(){return MyArray});__webpack_require__.d(__webpack_exports__,"LcsDiff",function(){return LcsDiff});var _diffChange_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12);function createStringSequence(a){return{getLength:function(){return a.length},getElementHash:function(pos){return a[pos]}}}function stringDiff(original,modified,pretty){return new LcsDiff(createStringSequence(original),createStringSequence(modified)).ComputeDiff(pretty)}var Debug=function(){function Debug(){}Debug.Assert=function(condition,message){if(!condition){throw new Error(message)}};return Debug}();var MyArray=function(){function MyArray(){}MyArray.Copy=function(sourceArray,sourceIndex,destinationArray,destinationIndex,length){for(var i=0;i<length;i++){destinationArray[destinationIndex+i]=sourceArray[sourceIndex+i]}};return MyArray}();var MaxDifferencesHistory=1447;var DiffChangeHelper=function(){function DiffChangeHelper(){this.m_changes=[];this.m_originalStart=Number.MAX_VALUE;this.m_modifiedStart=Number.MAX_VALUE;this.m_originalCount=0;this.m_modifiedCount=0}DiffChangeHelper.prototype.MarkNextChange=function(){if(this.m_originalCount>0||this.m_modifiedCount>0){this.m_changes.push(new _diffChange_js__WEBPACK_IMPORTED_MODULE_0__["DiffChange"](this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount))}this.m_originalCount=0;this.m_modifiedCount=0;this.m_originalStart=Number.MAX_VALUE;this.m_modifiedStart=Number.MAX_VALUE};DiffChangeHelper.prototype.AddOriginalElement=function(originalIndex,modifiedIndex){this.m_originalStart=Math.min(this.m_originalStart,originalIndex);this.m_modifiedStart=Math.min(this.m_modifiedStart,modifiedIndex);this.m_originalCount++};DiffChangeHelper.prototype.AddModifiedElement=function(originalIndex,modifiedIndex){this.m_originalStart=Math.min(this.m_originalStart,originalIndex);this.m_modifiedStart=Math.min(this.m_modifiedStart,modifiedIndex);this.m_modifiedCount++};DiffChangeHelper.prototype.getChanges=function(){if(this.m_originalCount>0||this.m_modifiedCount>0){this.MarkNextChange()}return this.m_changes};DiffChangeHelper.prototype.getReverseChanges=function(){if(this.m_originalCount>0||this.m_modifiedCount>0){this.MarkNextChange()}this.m_changes.reverse();return this.m_changes};return DiffChangeHelper}();var hasOwnProperty=Object.prototype.hasOwnProperty;var LcsDiff=function(){function LcsDiff(originalSequence,newSequence,continueProcessingPredicate){if(continueProcessingPredicate===void 0){continueProcessingPredicate=null}this.OriginalSequence=originalSequence;this.ModifiedSequence=newSequence;this.ContinueProcessingPredicate=continueProcessingPredicate;this.m_originalIds=[];this.m_modifiedIds=[];this.m_forwardHistory=[];this.m_reverseHistory=[];this.ComputeUniqueIdentifiers()}LcsDiff.prototype.ComputeUniqueIdentifiers=function(){var originalSequenceLength=this.OriginalSequence.getLength();var modifiedSequenceLength=this.ModifiedSequence.getLength();this.m_originalIds=new Array(originalSequenceLength);this.m_modifiedIds=new Array(modifiedSequenceLength);var hashTable={};var currentUniqueId=1;var i;for(i=0;i<originalSequenceLength;i++){var originalElementHash=this.OriginalSequence.getElementHash(i);if(!hasOwnProperty.call(hashTable,originalElementHash)){this.m_originalIds[i]=currentUniqueId++;hashTable[originalElementHash]=this.m_originalIds[i]}else{this.m_originalIds[i]=hashTable[originalElementHash]}}for(i=0;i<modifiedSequenceLength;i++){var modifiedElementHash=this.ModifiedSequence.getElementHash(i);if(!hasOwnProperty.call(hashTable,modifiedElementHash)){this.m_modifiedIds[i]=currentUniqueId++;hashTable[modifiedElementHash]=this.m_modifiedIds[i]}else{this.m_modifiedIds[i]=hashTable[modifiedElementHash]}}};LcsDiff.prototype.ElementsAreEqual=function(originalIndex,newIndex){return this.m_originalIds[originalIndex]===this.m_modifiedIds[newIndex]};LcsDiff.prototype.OriginalElementsAreEqual=function(index1,index2){return this.m_originalIds[index1]===this.m_originalIds[index2]};LcsDiff.prototype.ModifiedElementsAreEqual=function(index1,index2){return this.m_modifiedIds[index1]===this.m_modifiedIds[index2]};LcsDiff.prototype.ComputeDiff=function(pretty){return this._ComputeDiff(0,this.OriginalSequence.getLength()-1,0,this.ModifiedSequence.getLength()-1,pretty)};LcsDiff.prototype._ComputeDiff=function(originalStart,originalEnd,modifiedStart,modifiedEnd,pretty){var quitEarlyArr=[false];var changes=this.ComputeDiffRecursive(originalStart,originalEnd,modifiedStart,modifiedEnd,quitEarlyArr);if(pretty){return this.ShiftChanges(changes)}return changes};LcsDiff.prototype.ComputeDiffRecursive=function(originalStart,originalEnd,modifiedStart,modifiedEnd,quitEarlyArr){quitEarlyArr[0]=false;while(originalStart<=originalEnd&&modifiedStart<=modifiedEnd&&this.ElementsAreEqual(originalStart,modifiedStart)){originalStart++;modifiedStart++}while(originalEnd>=originalStart&&modifiedEnd>=modifiedStart&&this.ElementsAreEqual(originalEnd,modifiedEnd)){originalEnd--;modifiedEnd--}if(originalStart>originalEnd||modifiedStart>modifiedEnd){var changes=void 0;if(modifiedStart<=modifiedEnd){Debug.Assert(originalStart===originalEnd+1,"originalStart should only be one more than originalEnd");changes=[new _diffChange_js__WEBPACK_IMPORTED_MODULE_0__["DiffChange"](originalStart,0,modifiedStart,modifiedEnd-modifiedStart+1)]}else if(originalStart<=originalEnd){Debug.Assert(modifiedStart===modifiedEnd+1,"modifiedStart should only be one more than modifiedEnd");changes=[new _diffChange_js__WEBPACK_IMPORTED_MODULE_0__["DiffChange"](originalStart,originalEnd-originalStart+1,modifiedStart,0)]}else{Debug.Assert(originalStart===originalEnd+1,"originalStart should only be one more than originalEnd");Debug.Assert(modifiedStart===modifiedEnd+1,"modifiedStart should only be one more than modifiedEnd");changes=[]}return changes}var midOriginalArr=[0],midModifiedArr=[0];var result=this.ComputeRecursionPoint(originalStart,originalEnd,modifiedStart,modifiedEnd,midOriginalArr,midModifiedArr,quitEarlyArr);var midOriginal=midOriginalArr[0];var midModified=midModifiedArr[0];if(result!==null){return result}else if(!quitEarlyArr[0]){var leftChanges=this.ComputeDiffRecursive(originalStart,midOriginal,modifiedStart,midModified,quitEarlyArr);var rightChanges=[];if(!quitEarlyArr[0]){rightChanges=this.ComputeDiffRecursive(midOriginal+1,originalEnd,midModified+1,modifiedEnd,quitEarlyArr)}else{rightChanges=[new _diffChange_js__WEBPACK_IMPORTED_MODULE_0__["DiffChange"](midOriginal+1,originalEnd-(midOriginal+1)+1,midModified+1,modifiedEnd-(midModified+1)+1)]}return this.ConcatenateChanges(leftChanges,rightChanges)}return[new _diffChange_js__WEBPACK_IMPORTED_MODULE_0__["DiffChange"](originalStart,originalEnd-originalStart+1,modifiedStart,modifiedEnd-modifiedStart+1)]};LcsDiff.prototype.WALKTRACE=function(diagonalForwardBase,diagonalForwardStart,diagonalForwardEnd,diagonalForwardOffset,diagonalReverseBase,diagonalReverseStart,diagonalReverseEnd,diagonalReverseOffset,forwardPoints,reversePoints,originalIndex,originalEnd,midOriginalArr,modifiedIndex,modifiedEnd,midModifiedArr,deltaIsEven,quitEarlyArr){var forwardChanges=null,reverseChanges=null;var changeHelper=new DiffChangeHelper;var diagonalMin=diagonalForwardStart;var diagonalMax=diagonalForwardEnd;var diagonalRelative=midOriginalArr[0]-midModifiedArr[0]-diagonalForwardOffset;var lastOriginalIndex=Number.MIN_VALUE;var historyIndex=this.m_forwardHistory.length-1;var diagonal;do{diagonal=diagonalRelative+diagonalForwardBase;if(diagonal===diagonalMin||diagonal<diagonalMax&&forwardPoints[diagonal-1]<forwardPoints[diagonal+1]){originalIndex=forwardPoints[diagonal+1];modifiedIndex=originalIndex-diagonalRelative-diagonalForwardOffset;if(originalIndex<lastOriginalIndex){changeHelper.MarkNextChange()}lastOriginalIndex=originalIndex;changeHelper.AddModifiedElement(originalIndex+1,modifiedIndex);diagonalRelative=diagonal+1-diagonalForwardBase}else{originalIndex=forwardPoints[diagonal-1]+1;modifiedIndex=originalIndex-diagonalRelative-diagonalForwardOffset;if(originalIndex<lastOriginalIndex){changeHelper.MarkNextChange()}lastOriginalIndex=originalIndex-1;changeHelper.AddOriginalElement(originalIndex,modifiedIndex+1);diagonalRelative=diagonal-1-diagonalForwardBase}if(historyIndex>=0){forwardPoints=this.m_forwardHistory[historyIndex];diagonalForwardBase=forwardPoints[0];diagonalMin=1;diagonalMax=forwardPoints.length-1}}while(--historyIndex>=-1);forwardChanges=changeHelper.getReverseChanges();if(quitEarlyArr[0]){var originalStartPoint=midOriginalArr[0]+1;var modifiedStartPoint=midModifiedArr[0]+1;if(forwardChanges!==null&&forwardChanges.length>0){var lastForwardChange=forwardChanges[forwardChanges.length-1];originalStartPoint=Math.max(originalStartPoint,lastForwardChange.getOriginalEnd());modifiedStartPoint=Math.max(modifiedStartPoint,lastForwardChange.getModifiedEnd())}reverseChanges=[new _diffChange_js__WEBPACK_IMPORTED_MODULE_0__["DiffChange"](originalStartPoint,originalEnd-originalStartPoint+1,modifiedStartPoint,modifiedEnd-modifiedStartPoint+1)]}else{changeHelper=new DiffChangeHelper;diagonalMin=diagonalReverseStart;diagonalMax=diagonalReverseEnd;diagonalRelative=midOriginalArr[0]-midModifiedArr[0]-diagonalReverseOffset;lastOriginalIndex=Number.MAX_VALUE;historyIndex=deltaIsEven?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{diagonal=diagonalRelative+diagonalReverseBase;if(diagonal===diagonalMin||diagonal<diagonalMax&&reversePoints[diagonal-1]>=reversePoints[diagonal+1]){originalIndex=reversePoints[diagonal+1]-1;modifiedIndex=originalIndex-diagonalRelative-diagonalReverseOffset;if(originalIndex>lastOriginalIndex){changeHelper.MarkNextChange()}lastOriginalIndex=originalIndex+1;changeHelper.AddOriginalElement(originalIndex+1,modifiedIndex+1);diagonalRelative=diagonal+1-diagonalReverseBase}else{originalIndex=reversePoints[diagonal-1];modifiedIndex=originalIndex-diagonalRelative-diagonalReverseOffset;if(originalIndex>lastOriginalIndex){changeHelper.MarkNextChange()}lastOriginalIndex=originalIndex;changeHelper.AddModifiedElement(originalIndex+1,modifiedIndex+1);diagonalRelative=diagonal-1-diagonalReverseBase}if(historyIndex>=0){reversePoints=this.m_reverseHistory[historyIndex];diagonalReverseBase=reversePoints[0];diagonalMin=1;diagonalMax=reversePoints.length-1}}while(--historyIndex>=-1);reverseChanges=changeHelper.getChanges()}return this.ConcatenateChanges(forwardChanges,reverseChanges)};LcsDiff.prototype.ComputeRecursionPoint=function(originalStart,originalEnd,modifiedStart,modifiedEnd,midOriginalArr,midModifiedArr,quitEarlyArr){var originalIndex,modifiedIndex;var diagonalForwardStart=0,diagonalForwardEnd=0;var diagonalReverseStart=0,diagonalReverseEnd=0;var numDifferences;originalStart--;modifiedStart--;midOriginalArr[0]=0;midModifiedArr[0]=0;this.m_forwardHistory=[];this.m_reverseHistory=[];var maxDifferences=originalEnd-originalStart+(modifiedEnd-modifiedStart);var numDiagonals=maxDifferences+1;var forwardPoints=new Array(numDiagonals);var reversePoints=new Array(numDiagonals);var diagonalForwardBase=modifiedEnd-modifiedStart;var diagonalReverseBase=originalEnd-originalStart;var diagonalForwardOffset=originalStart-modifiedStart;var diagonalReverseOffset=originalEnd-modifiedEnd;var delta=diagonalReverseBase-diagonalForwardBase;var deltaIsEven=delta%2===0;forwardPoints[diagonalForwardBase]=originalStart;reversePoints[diagonalReverseBase]=originalEnd;quitEarlyArr[0]=false;var diagonal,tempOriginalIndex;for(numDifferences=1;numDifferences<=maxDifferences/2+1;numDifferences++){var furthestOriginalIndex=0;var furthestModifiedIndex=0;diagonalForwardStart=this.ClipDiagonalBound(diagonalForwardBase-numDifferences,numDifferences,diagonalForwardBase,numDiagonals);diagonalForwardEnd=this.ClipDiagonalBound(diagonalForwardBase+numDifferences,numDifferences,diagonalForwardBase,numDiagonals);for(diagonal=diagonalForwardStart;diagonal<=diagonalForwardEnd;diagonal+=2){if(diagonal===diagonalForwardStart||diagonal<diagonalForwardEnd&&forwardPoints[diagonal-1]<forwardPoints[diagonal+1]){originalIndex=forwardPoints[diagonal+1]}else{originalIndex=forwardPoints[diagonal-1]+1}modifiedIndex=originalIndex-(diagonal-diagonalForwardBase)-diagonalForwardOffset;tempOriginalIndex=originalIndex;while(originalIndex<originalEnd&&modifiedIndex<modifiedEnd&&this.ElementsAreEqual(originalIndex+1,modifiedIndex+1)){originalIndex++;modifiedIndex++}forwardPoints[diagonal]=originalIndex;if(originalIndex+modifiedIndex>furthestOriginalIndex+furthestModifiedIndex){furthestOriginalIndex=originalIndex;furthestModifiedIndex=modifiedIndex}if(!deltaIsEven&&Math.abs(diagonal-diagonalReverseBase)<=numDifferences-1){if(originalIndex>=reversePoints[diagonal]){midOriginalArr[0]=originalIndex;midModifiedArr[0]=modifiedIndex;if(tempOriginalIndex<=reversePoints[diagonal]&&MaxDifferencesHistory>0&&numDifferences<=MaxDifferencesHistory+1){return this.WALKTRACE(diagonalForwardBase,diagonalForwardStart,diagonalForwardEnd,diagonalForwardOffset,diagonalReverseBase,diagonalReverseStart,diagonalReverseEnd,diagonalReverseOffset,forwardPoints,reversePoints,originalIndex,originalEnd,midOriginalArr,modifiedIndex,modifiedEnd,midModifiedArr,deltaIsEven,quitEarlyArr)}else{return null}}}}var matchLengthOfLongest=(furthestOriginalIndex-originalStart+(furthestModifiedIndex-modifiedStart)-numDifferences)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(furthestOriginalIndex,this.OriginalSequence,matchLengthOfLongest)){quitEarlyArr[0]=true;midOriginalArr[0]=furthestOriginalIndex;midModifiedArr[0]=furthestModifiedIndex;if(matchLengthOfLongest>0&&MaxDifferencesHistory>0&&numDifferences<=MaxDifferencesHistory+1){return this.WALKTRACE(diagonalForwardBase,diagonalForwardStart,diagonalForwardEnd,diagonalForwardOffset,diagonalReverseBase,diagonalReverseStart,diagonalReverseEnd,diagonalReverseOffset,forwardPoints,reversePoints,originalIndex,originalEnd,midOriginalArr,modifiedIndex,modifiedEnd,midModifiedArr,deltaIsEven,quitEarlyArr)}else{originalStart++;modifiedStart++;return[new _diffChange_js__WEBPACK_IMPORTED_MODULE_0__["DiffChange"](originalStart,originalEnd-originalStart+1,modifiedStart,modifiedEnd-modifiedStart+1)]}}diagonalReverseStart=this.ClipDiagonalBound(diagonalReverseBase-numDifferences,numDifferences,diagonalReverseBase,numDiagonals);diagonalReverseEnd=this.ClipDiagonalBound(diagonalReverseBase+numDifferences,numDifferences,diagonalReverseBase,numDiagonals);for(diagonal=diagonalReverseStart;diagonal<=diagonalReverseEnd;diagonal+=2){if(diagonal===diagonalReverseStart||diagonal<diagonalReverseEnd&&reversePoints[diagonal-1]>=reversePoints[diagonal+1]){originalIndex=reversePoints[diagonal+1]-1}else{originalIndex=reversePoints[diagonal-1]}modifiedIndex=originalIndex-(diagonal-diagonalReverseBase)-diagonalReverseOffset;tempOriginalIndex=originalIndex;while(originalIndex>originalStart&&modifiedIndex>modifiedStart&&this.ElementsAreEqual(originalIndex,modifiedIndex)){originalIndex--;modifiedIndex--}reversePoints[diagonal]=originalIndex;if(deltaIsEven&&Math.abs(diagonal-diagonalForwardBase)<=numDifferences){if(originalIndex<=forwardPoints[diagonal]){midOriginalArr[0]=originalIndex;midModifiedArr[0]=modifiedIndex;if(tempOriginalIndex>=forwardPoints[diagonal]&&MaxDifferencesHistory>0&&numDifferences<=MaxDifferencesHistory+1){return this.WALKTRACE(diagonalForwardBase,diagonalForwardStart,diagonalForwardEnd,diagonalForwardOffset,diagonalReverseBase,diagonalReverseStart,diagonalReverseEnd,diagonalReverseOffset,forwardPoints,reversePoints,originalIndex,originalEnd,midOriginalArr,modifiedIndex,modifiedEnd,midModifiedArr,deltaIsEven,quitEarlyArr)}else{return null}}}}if(numDifferences<=MaxDifferencesHistory){var temp=new Array(diagonalForwardEnd-diagonalForwardStart+2);temp[0]=diagonalForwardBase-diagonalForwardStart+1;MyArray.Copy(forwardPoints,diagonalForwardStart,temp,1,diagonalForwardEnd-diagonalForwardStart+1);this.m_forwardHistory.push(temp);temp=new Array(diagonalReverseEnd-diagonalReverseStart+2);temp[0]=diagonalReverseBase-diagonalReverseStart+1;MyArray.Copy(reversePoints,diagonalReverseStart,temp,1,diagonalReverseEnd-diagonalReverseStart+1);this.m_reverseHistory.push(temp)}}return this.WALKTRACE(diagonalForwardBase,diagonalForwardStart,diagonalForwardEnd,diagonalForwardOffset,diagonalReverseBase,diagonalReverseStart,diagonalReverseEnd,diagonalReverseOffset,forwardPoints,reversePoints,originalIndex,originalEnd,midOriginalArr,modifiedIndex,modifiedEnd,midModifiedArr,deltaIsEven,quitEarlyArr)};LcsDiff.prototype.ShiftChanges=function(changes){var mergedDiffs;do{mergedDiffs=false;for(var i=0;i<changes.length;i++){var change=changes[i];var originalStop=i<changes.length-1?changes[i+1].originalStart:this.OriginalSequence.getLength();var modifiedStop=i<changes.length-1?changes[i+1].modifiedStart:this.ModifiedSequence.getLength();var checkOriginal=change.originalLength>0;var checkModified=change.modifiedLength>0;while(change.originalStart+change.originalLength<originalStop&&change.modifiedStart+change.modifiedLength<modifiedStop&&(!checkOriginal||this.OriginalElementsAreEqual(change.originalStart,change.originalStart+change.originalLength))&&(!checkModified||this.ModifiedElementsAreEqual(change.modifiedStart,change.modifiedStart+change.modifiedLength))){change.originalStart++;change.modifiedStart++}}var result=new Array;var mergedChangeArr=[null];for(var i=0;i<changes.length;i++){if(i<changes.length-1&&this.ChangesOverlap(changes[i],changes[i+1],mergedChangeArr)){mergedDiffs=true;result.push(mergedChangeArr[0]);i++}else{result.push(changes[i])}}changes=result}while(mergedDiffs);for(var i=changes.length-1;i>=0;i--){var change=changes[i];var originalStop=0;var modifiedStop=0;if(i>0){var prevChange=changes[i-1];if(prevChange.originalLength>0){originalStop=prevChange.originalStart+prevChange.originalLength}if(prevChange.modifiedLength>0){modifiedStop=prevChange.modifiedStart+prevChange.modifiedLength}}var checkOriginal=change.originalLength>0;var checkModified=change.modifiedLength>0;var bestDelta=0;var bestScore=this._boundaryScore(change.originalStart,change.originalLength,change.modifiedStart,change.modifiedLength);for(var delta=1;;delta++){var originalStart=change.originalStart-delta;var modifiedStart=change.modifiedStart-delta;if(originalStart<originalStop||modifiedStart<modifiedStop){break}if(checkOriginal&&!this.OriginalElementsAreEqual(originalStart,originalStart+change.originalLength)){break}if(checkModified&&!this.ModifiedElementsAreEqual(modifiedStart,modifiedStart+change.modifiedLength)){break}var score=this._boundaryScore(originalStart,change.originalLength,modifiedStart,change.modifiedLength);if(score>bestScore){bestScore=score;bestDelta=delta}}change.originalStart-=bestDelta;change.modifiedStart-=bestDelta}return changes};LcsDiff.prototype._OriginalIsBoundary=function(index){if(index<=0||index>=this.OriginalSequence.getLength()-1){return true}return/^\s*$/.test(this.OriginalSequence.getElementHash(index))};LcsDiff.prototype._OriginalRegionIsBoundary=function(originalStart,originalLength){if(this._OriginalIsBoundary(originalStart)||this._OriginalIsBoundary(originalStart-1)){return true}if(originalLength>0){var originalEnd=originalStart+originalLength;if(this._OriginalIsBoundary(originalEnd-1)||this._OriginalIsBoundary(originalEnd)){return true}}return false};LcsDiff.prototype._ModifiedIsBoundary=function(index){if(index<=0||index>=this.ModifiedSequence.getLength()-1){return true}return/^\s*$/.test(this.ModifiedSequence.getElementHash(index))};LcsDiff.prototype._ModifiedRegionIsBoundary=function(modifiedStart,modifiedLength){if(this._ModifiedIsBoundary(modifiedStart)||this._ModifiedIsBoundary(modifiedStart-1)){return true}if(modifiedLength>0){var modifiedEnd=modifiedStart+modifiedLength;if(this._ModifiedIsBoundary(modifiedEnd-1)||this._ModifiedIsBoundary(modifiedEnd)){return true}}return false};LcsDiff.prototype._boundaryScore=function(originalStart,originalLength,modifiedStart,modifiedLength){var originalScore=this._OriginalRegionIsBoundary(originalStart,originalLength)?1:0;var modifiedScore=this._ModifiedRegionIsBoundary(modifiedStart,modifiedLength)?1:0;return originalScore+modifiedScore};LcsDiff.prototype.ConcatenateChanges=function(left,right){var mergedChangeArr=[];var result=null;if(left.length===0||right.length===0){return right.length>0?right:left}else if(this.ChangesOverlap(left[left.length-1],right[0],mergedChangeArr)){result=new Array(left.length+right.length-1);MyArray.Copy(left,0,result,0,left.length-1);result[left.length-1]=mergedChangeArr[0];MyArray.Copy(right,1,result,left.length,right.length-1);return result}else{result=new Array(left.length+right.length);MyArray.Copy(left,0,result,0,left.length);MyArray.Copy(right,0,result,left.length,right.length);return result}};LcsDiff.prototype.ChangesOverlap=function(left,right,mergedChangeArr){Debug.Assert(left.originalStart<=right.originalStart,"Left change is not less than or equal to right change");Debug.Assert(left.modifiedStart<=right.modifiedStart,"Left change is not less than or equal to right change");if(left.originalStart+left.originalLength>=right.originalStart||left.modifiedStart+left.modifiedLength>=right.modifiedStart){var originalStart=left.originalStart;var originalLength=left.originalLength;var modifiedStart=left.modifiedStart;var modifiedLength=left.modifiedLength;if(left.originalStart+left.originalLength>=right.originalStart){originalLength=right.originalStart+right.originalLength-left.originalStart}if(left.modifiedStart+left.modifiedLength>=right.modifiedStart){modifiedLength=right.modifiedStart+right.modifiedLength-left.modifiedStart}mergedChangeArr[0]=new _diffChange_js__WEBPACK_IMPORTED_MODULE_0__["DiffChange"](originalStart,originalLength,modifiedStart,modifiedLength);return true}else{mergedChangeArr[0]=null;return false}};LcsDiff.prototype.ClipDiagonalBound=function(diagonal,numDifferences,diagonalBaseIndex,numDiagonals){if(diagonal>=0&&diagonal<numDiagonals){return diagonal}var diagonalsBelow=diagonalBaseIndex;var diagonalsAbove=numDiagonals-diagonalBaseIndex-1;var diffEven=numDifferences%2===0;if(diagonal<0){var lowerBoundEven=diagonalsBelow%2===0;return diffEven===lowerBoundEven?0:1}else{var upperBoundEven=diagonalsAbove%2===0;return diffEven===upperBoundEven?numDiagonals-1:numDiagonals-2}};return LcsDiff}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"DiffChange",function(){return DiffChange});var DiffChange=function(){function DiffChange(originalStart,originalLength,modifiedStart,modifiedLength){this.originalStart=originalStart;this.originalLength=originalLength;this.modifiedStart=modifiedStart;this.modifiedLength=modifiedLength}DiffChange.prototype.getOriginalEnd=function(){return this.originalStart+this.originalLength};DiffChange.prototype.getModifiedEnd=function(){return this.modifiedStart+this.modifiedLength};return DiffChange}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"empty",function(){return empty});__webpack_require__.d(__webpack_exports__,"isFalsyOrWhitespace",function(){return isFalsyOrWhitespace});__webpack_require__.d(__webpack_exports__,"pad",function(){return pad});__webpack_require__.d(__webpack_exports__,"format",function(){return format});__webpack_require__.d(__webpack_exports__,"escape",function(){return escape});__webpack_require__.d(__webpack_exports__,"escapeRegExpCharacters",function(){return escapeRegExpCharacters});__webpack_require__.d(__webpack_exports__,"trim",function(){return trim});__webpack_require__.d(__webpack_exports__,"ltrim",function(){return ltrim});__webpack_require__.d(__webpack_exports__,"rtrim",function(){return rtrim});__webpack_require__.d(__webpack_exports__,"convertSimple2RegExpPattern",function(){return convertSimple2RegExpPattern});__webpack_require__.d(__webpack_exports__,"stripWildcards",function(){return stripWildcards});__webpack_require__.d(__webpack_exports__,"startsWith",function(){return startsWith});__webpack_require__.d(__webpack_exports__,"endsWith",function(){return endsWith});__webpack_require__.d(__webpack_exports__,"createRegExp",function(){return createRegExp});__webpack_require__.d(__webpack_exports__,"regExpLeadsToEndlessLoop",function(){return regExpLeadsToEndlessLoop});__webpack_require__.d(__webpack_exports__,"regExpContainsBackreference",function(){return regExpContainsBackreference});__webpack_require__.d(__webpack_exports__,"canNormalize",function(){return canNormalize});__webpack_require__.d(__webpack_exports__,"normalizeNFC",function(){return normalizeNFC});__webpack_require__.d(__webpack_exports__,"normalizeNFD",function(){return normalizeNFD});__webpack_require__.d(__webpack_exports__,"firstNonWhitespaceIndex",function(){return firstNonWhitespaceIndex});__webpack_require__.d(__webpack_exports__,"getLeadingWhitespace",function(){return getLeadingWhitespace});__webpack_require__.d(__webpack_exports__,"lastNonWhitespaceIndex",function(){return lastNonWhitespaceIndex});__webpack_require__.d(__webpack_exports__,"compare",function(){return compare});__webpack_require__.d(__webpack_exports__,"compareIgnoreCase",function(){return compareIgnoreCase});__webpack_require__.d(__webpack_exports__,"equalsIgnoreCase",function(){return equalsIgnoreCase});__webpack_require__.d(__webpack_exports__,"startsWithIgnoreCase",function(){return startsWithIgnoreCase});__webpack_require__.d(__webpack_exports__,"commonPrefixLength",function(){return commonPrefixLength});__webpack_require__.d(__webpack_exports__,"commonSuffixLength",function(){return commonSuffixLength});__webpack_require__.d(__webpack_exports__,"overlap",function(){return overlap});__webpack_require__.d(__webpack_exports__,"isHighSurrogate",function(){return isHighSurrogate});__webpack_require__.d(__webpack_exports__,"isLowSurrogate",function(){return isLowSurrogate});__webpack_require__.d(__webpack_exports__,"containsRTL",function(){return containsRTL});__webpack_require__.d(__webpack_exports__,"containsEmoji",function(){return containsEmoji});__webpack_require__.d(__webpack_exports__,"isBasicASCII",function(){return isBasicASCII});__webpack_require__.d(__webpack_exports__,"containsFullWidthCharacter",function(){return containsFullWidthCharacter});__webpack_require__.d(__webpack_exports__,"isFullWidthCharacter",function(){return isFullWidthCharacter});__webpack_require__.d(__webpack_exports__,"lcut",function(){return lcut});__webpack_require__.d(__webpack_exports__,"removeAnsiEscapeCodes",function(){return removeAnsiEscapeCodes});__webpack_require__.d(__webpack_exports__,"UTF8_BOM_CHARACTER",function(){return UTF8_BOM_CHARACTER});__webpack_require__.d(__webpack_exports__,"startsWithUTF8BOM",function(){return startsWithUTF8BOM});__webpack_require__.d(__webpack_exports__,"stripUTF8BOM",function(){return stripUTF8BOM});__webpack_require__.d(__webpack_exports__,"safeBtoa",function(){return safeBtoa});__webpack_require__.d(__webpack_exports__,"repeat",function(){return repeat});__webpack_require__.d(__webpack_exports__,"fuzzyContains",function(){return fuzzyContains});__webpack_require__.d(__webpack_exports__,"containsUppercaseCharacter",function(){return containsUppercaseCharacter});var _map_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14);var empty="";function isFalsyOrWhitespace(str){if(!str||typeof str!=="string"){return true}return str.trim().length===0}function pad(n,l,char){if(char===void 0){char="0"}var str=""+n;var r=[str];for(var i=str.length;i<l;i++){r.push(char)}return r.reverse().join("")}var _formatRegexp=/{(\d+)}/g;function format(value){var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}if(args.length===0){return value}return value.replace(_formatRegexp,function(match,group){var idx=parseInt(group,10);return isNaN(idx)||idx<0||idx>=args.length?match:args[idx]})}function escape(html){return html.replace(/[<|>|&]/g,function(match){switch(match){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return match}})}function escapeRegExpCharacters(value){return value.replace(/[\-\\\{\}\*\+\?\|\^\$\.\[\]\(\)\#]/g,"\\$&")}function trim(haystack,needle){if(needle===void 0){needle=" "}var trimmed=ltrim(haystack,needle);return rtrim(trimmed,needle)}function ltrim(haystack,needle){if(!haystack||!needle){return haystack}var needleLen=needle.length;if(needleLen===0||haystack.length===0){return haystack}var offset=0,idx=-1;while((idx=haystack.indexOf(needle,offset))===offset){offset=offset+needleLen}return haystack.substring(offset)}function rtrim(haystack,needle){if(!haystack||!needle){return haystack}var needleLen=needle.length,haystackLen=haystack.length;if(needleLen===0||haystackLen===0){return haystack}var offset=haystackLen,idx=-1;while(true){idx=haystack.lastIndexOf(needle,offset-1);if(idx===-1||idx+needleLen!==offset){break}if(idx===0){return""}offset=idx}return haystack.substring(0,offset)}function convertSimple2RegExpPattern(pattern){return pattern.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function stripWildcards(pattern){return pattern.replace(/\*/g,"")}function startsWith(haystack,needle){if(haystack.length<needle.length){return false}if(haystack===needle){return true}for(var i=0;i<needle.length;i++){if(haystack[i]!==needle[i]){return false}}return true}function endsWith(haystack,needle){var diff=haystack.length-needle.length;if(diff>0){return haystack.indexOf(needle,diff)===diff}else if(diff===0){return haystack===needle}else{return false}}function createRegExp(searchString,isRegex,options){if(options===void 0){options={}}if(!searchString){throw new Error("Cannot create regex from empty string")}if(!isRegex){searchString=escapeRegExpCharacters(searchString)}if(options.wholeWord){if(!/\B/.test(searchString.charAt(0))){searchString="\\b"+searchString}if(!/\B/.test(searchString.charAt(searchString.length-1))){searchString=searchString+"\\b"}}var modifiers="";if(options.global){modifiers+="g"}if(!options.matchCase){modifiers+="i"}if(options.multiline){modifiers+="m"}return new RegExp(searchString,modifiers)}function regExpLeadsToEndlessLoop(regexp){if(regexp.source==="^"||regexp.source==="^$"||regexp.source==="$"||regexp.source==="^\\s*$"){return false}var match=regexp.exec("");return match&&regexp.lastIndex===0}function regExpContainsBackreference(regexpValue){return!!regexpValue.match(/([^\\]|^)(\\\\)*\\\d+/)}var canNormalize=typeof"".normalize==="function";var nfcCache=new _map_js__WEBPACK_IMPORTED_MODULE_0__["LRUCache"](1e4);function normalizeNFC(str){return normalize(str,"NFC",nfcCache)}var nfdCache=new _map_js__WEBPACK_IMPORTED_MODULE_0__["LRUCache"](1e4);function normalizeNFD(str){return normalize(str,"NFD",nfdCache)}var nonAsciiCharactersPattern=/[^\u0000-\u0080]/;function normalize(str,form,normalizedCache){if(!canNormalize||!str){return str}var cached=normalizedCache.get(str);if(cached){return cached}var res;if(nonAsciiCharactersPattern.test(str)){res=str.normalize(form)}else{res=str}normalizedCache.set(str,res);return res}function firstNonWhitespaceIndex(str){for(var i=0,len=str.length;i<len;i++){var chCode=str.charCodeAt(i);if(chCode!==32&&chCode!==9){return i}}return-1}function getLeadingWhitespace(str,start,end){if(start===void 0){start=0}if(end===void 0){end=str.length}for(var i=start;i<end;i++){var chCode=str.charCodeAt(i);if(chCode!==32&&chCode!==9){return str.substring(start,i)}}return str.substring(start,end)}function lastNonWhitespaceIndex(str,startIndex){if(startIndex===void 0){startIndex=str.length-1}for(var i=startIndex;i>=0;i--){var chCode=str.charCodeAt(i);if(chCode!==32&&chCode!==9){return i}}return-1}function compare(a,b){if(a<b){return-1}else if(a>b){return 1}else{return 0}}function compareIgnoreCase(a,b){var len=Math.min(a.length,b.length);for(var i=0;i<len;i++){var codeA=a.charCodeAt(i);var codeB=b.charCodeAt(i);if(codeA===codeB){continue}if(isUpperAsciiLetter(codeA)){codeA+=32}if(isUpperAsciiLetter(codeB)){codeB+=32}var diff=codeA-codeB;if(diff===0){continue}else if(isLowerAsciiLetter(codeA)&&isLowerAsciiLetter(codeB)){return diff}else{return compare(a.toLowerCase(),b.toLowerCase())}}if(a.length<b.length){return-1}else if(a.length>b.length){return 1}else{return 0}}function isLowerAsciiLetter(code){return code>=97&&code<=122}function isUpperAsciiLetter(code){return code>=65&&code<=90}function isAsciiLetter(code){return isLowerAsciiLetter(code)||isUpperAsciiLetter(code)}function equalsIgnoreCase(a,b){var len1=a?a.length:0;var len2=b?b.length:0;if(len1!==len2){return false}return doEqualsIgnoreCase(a,b)}function doEqualsIgnoreCase(a,b,stopAt){if(stopAt===void 0){stopAt=a.length}if(typeof a!=="string"||typeof b!=="string"){return false}for(var i=0;i<stopAt;i++){var codeA=a.charCodeAt(i);var codeB=b.charCodeAt(i);if(codeA===codeB){continue}if(isAsciiLetter(codeA)&&isAsciiLetter(codeB)){var diff=Math.abs(codeA-codeB);if(diff!==0&&diff!==32){return false}}else{if(String.fromCharCode(codeA).toLowerCase()!==String.fromCharCode(codeB).toLowerCase()){return false}}}return true}function startsWithIgnoreCase(str,candidate){var candidateLength=candidate.length;if(candidate.length>str.length){return false}return doEqualsIgnoreCase(str,candidate,candidateLength)}function commonPrefixLength(a,b){var i,len=Math.min(a.length,b.length);for(i=0;i<len;i++){if(a.charCodeAt(i)!==b.charCodeAt(i)){return i}}return len}function commonSuffixLength(a,b){var i,len=Math.min(a.length,b.length);var aLastIndex=a.length-1;var bLastIndex=b.length-1;for(i=0;i<len;i++){if(a.charCodeAt(aLastIndex-i)!==b.charCodeAt(bLastIndex-i)){return i}}return len}function substrEquals(a,aStart,aEnd,b,bStart,bEnd){while(aStart<aEnd&&bStart<bEnd){if(a[aStart]!==b[bStart]){return false}aStart+=1;bStart+=1}return true}function overlap(a,b){var aEnd=a.length;var bEnd=b.length;var aStart=aEnd-bEnd;if(aStart===0){return a===b?aEnd:0}else if(aStart<0){bEnd+=aStart;aStart=0}while(aStart<aEnd&&bEnd>0){if(substrEquals(a,aStart,aEnd,b,0,bEnd)){return bEnd}bEnd-=1;aStart+=1}return 0}function isHighSurrogate(charCode){return 55296<=charCode&&charCode<=56319}function isLowSurrogate(charCode){return 56320<=charCode&&charCode<=57343}var CONTAINS_RTL=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u08BD\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE33\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDCFF]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD50-\uDFFF]|\uD83B[\uDC00-\uDEBB])/;function containsRTL(str){return CONTAINS_RTL.test(str)}var CONTAINS_EMOJI=/(?:[\u231A\u231B\u23F0\u23F3\u2600-\u27BF\u2B50\u2B55]|\uD83C[\uDDE6-\uDDFF\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F\uDE80-\uDEF8]|\uD83E[\uDD00-\uDDE6])/;function containsEmoji(str){return CONTAINS_EMOJI.test(str)}var IS_BASIC_ASCII=/^[\t\n\r\x20-\x7E]*$/;function isBasicASCII(str){return IS_BASIC_ASCII.test(str)}function containsFullWidthCharacter(str){for(var i=0,len=str.length;i<len;i++){if(isFullWidthCharacter(str.charCodeAt(i))){return true}}return false}function isFullWidthCharacter(charCode){charCode=+charCode;return charCode>=11904&&charCode<=55215||charCode>=63744&&charCode<=64255||charCode>=65281&&charCode<=65374}function lcut(text,n){if(text.length<n){return text}var re=/\b/g;var i=0;while(re.test(text)){if(text.length-re.lastIndex<n){break}i=re.lastIndex;re.lastIndex+=1}return text.substring(i).replace(/^\s/,empty)}var EL=/\x1B\x5B[12]?K/g;var COLOR_START=/\x1b\[\d+m/g;var COLOR_END=/\x1b\[0?m/g;function removeAnsiEscapeCodes(str){if(str){str=str.replace(EL,"");str=str.replace(COLOR_START,"");str=str.replace(COLOR_END,"")}return str}var UTF8_BOM_CHARACTER=String.fromCharCode(65279);function startsWithUTF8BOM(str){return str&&str.length>0&&str.charCodeAt(0)===65279}function stripUTF8BOM(str){return startsWithUTF8BOM(str)?str.substr(1):str}function safeBtoa(str){return btoa(encodeURIComponent(str))}function repeat(s,count){var result="";for(var i=0;i<count;i++){result+=s}return result}function fuzzyContains(target,query){if(!target||!query){return false}if(target.length<query.length){return false}var queryLen=query.length;var targetLower=target.toLowerCase();var index=0;var lastIndexOf=-1;while(index<queryLen){var indexOf=targetLower.indexOf(query[index],lastIndexOf+1);if(indexOf<0){return false}lastIndexOf=indexOf;index++}return true}function containsUppercaseCharacter(target,ignoreEscapedChars){if(ignoreEscapedChars===void 0){ignoreEscapedChars=false}if(!target){return false}if(ignoreEscapedChars){target=target.replace(/\\./g,"")}return target.toLowerCase()!==target}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"values",function(){return values});__webpack_require__.d(__webpack_exports__,"keys",function(){return keys});__webpack_require__.d(__webpack_exports__,"getOrSet",function(){return getOrSet});__webpack_require__.d(__webpack_exports__,"StringIterator",function(){return StringIterator});__webpack_require__.d(__webpack_exports__,"PathIterator",function(){return PathIterator});__webpack_require__.d(__webpack_exports__,"TernarySearchTree",function(){return TernarySearchTree});__webpack_require__.d(__webpack_exports__,"ResourceMap",function(){return ResourceMap});__webpack_require__.d(__webpack_exports__,"StrictResourceMap",function(){return StrictResourceMap});__webpack_require__.d(__webpack_exports__,"Touch",function(){return Touch});__webpack_require__.d(__webpack_exports__,"LinkedMap",function(){return LinkedMap});__webpack_require__.d(__webpack_exports__,"LRUCache",function(){return LRUCache});var _uri_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3);var __extends=undefined&&undefined.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();function values(forEachable){var result=[];forEachable.forEach(function(value){return result.push(value)});return result}function keys(map){var result=[];map.forEach(function(value,key){return result.push(key)});return result}function getOrSet(map,key,value){var result=map.get(key);if(result===void 0){result=value;map.set(key,result)}return result}var StringIterator=function(){function StringIterator(){this._value="";this._pos=0}StringIterator.prototype.reset=function(key){this._value=key;this._pos=0;return this};StringIterator.prototype.next=function(){this._pos+=1;return this};StringIterator.prototype.join=function(parts){return parts.join("")};StringIterator.prototype.hasNext=function(){return this._pos<this._value.length-1};StringIterator.prototype.cmp=function(a){var aCode=a.charCodeAt(0);var thisCode=this._value.charCodeAt(this._pos);return aCode-thisCode};StringIterator.prototype.value=function(){return this._value[this._pos]};return StringIterator}();var PathIterator=function(){function PathIterator(){}PathIterator.prototype.reset=function(key){this._value=key.replace(/\\$|\/$/,"");this._from=0;this._to=0;return this.next()};PathIterator.prototype.hasNext=function(){return this._to<this._value.length};PathIterator.prototype.join=function(parts){return parts.join("/")};PathIterator.prototype.next=function(){this._from=this._to;var justSeps=true;for(;this._to<this._value.length;this._to++){var ch=this._value.charCodeAt(this._to);if(ch===PathIterator._fwd||ch===PathIterator._bwd){if(justSeps){this._from++}else{break}}else{justSeps=false}}return this};PathIterator.prototype.cmp=function(a){var aPos=0;var aLen=a.length;var thisPos=this._from;while(aPos<aLen&&thisPos<this._to){var cmp=a.charCodeAt(aPos)-this._value.charCodeAt(thisPos);if(cmp!==0){return cmp}aPos+=1;thisPos+=1}if(aLen===this._to-this._from){return 0}else if(aPos<aLen){return-1}else{return 1}};PathIterator.prototype.value=function(){return this._value.substring(this._from,this._to)};PathIterator._fwd="/".charCodeAt(0);PathIterator._bwd="\\".charCodeAt(0);return PathIterator}();var TernarySearchTreeNode=function(){function TernarySearchTreeNode(){}TernarySearchTreeNode.prototype.isEmpty=function(){return!this.left&&!this.mid&&!this.right&&!this.element};return TernarySearchTreeNode}();var TernarySearchTree=function(){function TernarySearchTree(segments){this._iter=segments}TernarySearchTree.forPaths=function(){return new TernarySearchTree(new PathIterator)};TernarySearchTree.forStrings=function(){return new TernarySearchTree(new StringIterator)};TernarySearchTree.prototype.clear=function(){this._root=undefined};TernarySearchTree.prototype.set=function(key,element){var iter=this._iter.reset(key);var node;if(!this._root){this._root=new TernarySearchTreeNode;this._root.str=iter.value()}node=this._root;while(true){var val=iter.cmp(node.str);if(val>0){if(!node.left){node.left=new TernarySearchTreeNode;node.left.str=iter.value()}node=node.left}else if(val<0){if(!node.right){node.right=new TernarySearchTreeNode;node.right.str=iter.value()}node=node.right}else if(iter.hasNext()){iter.next();if(!node.mid){node.mid=new TernarySearchTreeNode;node.mid.str=iter.value()}node=node.mid}else{break}}var oldElement=node.element;node.element=element;return oldElement};TernarySearchTree.prototype.get=function(key){var iter=this._iter.reset(key);var node=this._root;while(node){var val=iter.cmp(node.str);if(val>0){node=node.left}else if(val<0){node=node.right}else if(iter.hasNext()){iter.next();node=node.mid}else{break}}return node?node.element:undefined};TernarySearchTree.prototype.delete=function(key){var iter=this._iter.reset(key);var stack=[];var node=this._root;while(node){var val=iter.cmp(node.str);if(val>0){stack.push([1,node]);node=node.left}else if(val<0){stack.push([-1,node]);node=node.right}else if(iter.hasNext()){iter.next();stack.push([0,node]);node=node.mid}else{node.element=undefined;while(stack.length>0&&node.isEmpty()){var _a=stack.pop(),dir=_a[0],parent_1=_a[1];switch(dir){case 1:parent_1.left=undefined;break;case 0:parent_1.mid=undefined;break;case-1:parent_1.right=undefined;break}node=parent_1}break}}};TernarySearchTree.prototype.findSubstr=function(key){var iter=this._iter.reset(key);var node=this._root;var candidate;while(node){var val=iter.cmp(node.str);if(val>0){node=node.left}else if(val<0){node=node.right}else if(iter.hasNext()){iter.next();candidate=node.element||candidate;node=node.mid}else{break}}return node&&node.element||candidate};TernarySearchTree.prototype.findSuperstr=function(key){var iter=this._iter.reset(key);var node=this._root;while(node){var val=iter.cmp(node.str);if(val>0){node=node.left}else if(val<0){node=node.right}else if(iter.hasNext()){iter.next();node=node.mid}else{if(!node.mid){return undefined}var ret=new TernarySearchTree(this._iter);ret._root=node.mid;return ret}}return undefined};TernarySearchTree.prototype.forEach=function(callback){this._forEach(this._root,[],callback)};TernarySearchTree.prototype._forEach=function(node,parts,callback){if(node){this._forEach(node.left,parts,callback);parts.push(node.str);if(node.element){callback(node.element,this._iter.join(parts))}this._forEach(node.mid,parts,callback);parts.pop();this._forEach(node.right,parts,callback)}};return TernarySearchTree}();var ResourceMap=function(){function ResourceMap(ignoreCase){this.ignoreCase=ignoreCase;this.map=new Map}ResourceMap.prototype.set=function(resource,value){this.map.set(this.toKey(resource),value)};ResourceMap.prototype.get=function(resource){return this.map.get(this.toKey(resource))};ResourceMap.prototype.has=function(resource){return this.map.has(this.toKey(resource))};Object.defineProperty(ResourceMap.prototype,"size",{get:function(){return this.map.size},enumerable:true,configurable:true});ResourceMap.prototype.clear=function(){this.map.clear()};ResourceMap.prototype.delete=function(resource){return this.map.delete(this.toKey(resource))};ResourceMap.prototype.forEach=function(clb){this.map.forEach(clb)};ResourceMap.prototype.values=function(){return values(this.map)};ResourceMap.prototype.toKey=function(resource){var key=resource.toString();if(this.ignoreCase){key=key.toLowerCase()}return key};return ResourceMap}();var StrictResourceMap=function(_super){__extends(StrictResourceMap,_super);function StrictResourceMap(){return _super.call(this)||this}StrictResourceMap.prototype.keys=function(){return keys(this.map).map(function(key){return _uri_js__WEBPACK_IMPORTED_MODULE_0__["default"].parse(key)})};return StrictResourceMap}(ResourceMap);var Touch;(function(Touch){Touch[Touch["None"]=0]="None";Touch[Touch["AsOld"]=1]="AsOld";Touch[Touch["AsNew"]=2]="AsNew"})(Touch||(Touch={}));var LinkedMap=function(){function LinkedMap(){this._map=new Map;this._head=undefined;this._tail=undefined;this._size=0}LinkedMap.prototype.clear=function(){this._map.clear();this._head=undefined;this._tail=undefined;this._size=0};LinkedMap.prototype.isEmpty=function(){return!this._head&&!this._tail};Object.defineProperty(LinkedMap.prototype,"size",{get:function(){return this._size},enumerable:true,configurable:true});LinkedMap.prototype.has=function(key){return this._map.has(key)};LinkedMap.prototype.get=function(key,touch){if(touch===void 0){touch=Touch.None}var item=this._map.get(key);if(!item){return undefined}if(touch!==Touch.None){this.touch(item,touch)}return item.value};LinkedMap.prototype.set=function(key,value,touch){if(touch===void 0){touch=Touch.None}var item=this._map.get(key);if(item){item.value=value;if(touch!==Touch.None){this.touch(item,touch)}}else{item={key,value,next:undefined,previous:undefined};switch(touch){case Touch.None:this.addItemLast(item);break;case Touch.AsOld:this.addItemFirst(item);break;case Touch.AsNew:this.addItemLast(item);break;default:this.addItemLast(item);break}this._map.set(key,item);this._size++}};LinkedMap.prototype.delete=function(key){return!!this.remove(key)};LinkedMap.prototype.remove=function(key){var item=this._map.get(key);if(!item){return undefined}this._map.delete(key);this.removeItem(item);this._size--;return item.value};LinkedMap.prototype.shift=function(){if(!this._head&&!this._tail){return undefined}if(!this._head||!this._tail){throw new Error("Invalid list")}var item=this._head;this._map.delete(item.key);this.removeItem(item);this._size--;return item.value};LinkedMap.prototype.forEach=function(callbackfn,thisArg){var current=this._head;while(current){if(thisArg){callbackfn.bind(thisArg)(current.value,current.key,this)}else{callbackfn(current.value,current.key,this)}current=current.next}};LinkedMap.prototype.values=function(){var result=[];var current=this._head;while(current){result.push(current.value);current=current.next}return result};LinkedMap.prototype.keys=function(){var result=[];var current=this._head;while(current){result.push(current.key);current=current.next}return result};LinkedMap.prototype.trimOld=function(newSize){if(newSize>=this.size){return}if(newSize===0){this.clear();return}var current=this._head;var currentSize=this.size;while(current&&currentSize>newSize){this._map.delete(current.key);current=current.next;currentSize--}this._head=current;this._size=currentSize;current.previous=void 0};LinkedMap.prototype.addItemFirst=function(item){if(!this._head&&!this._tail){this._tail=item}else if(!this._head){throw new Error("Invalid list")}else{item.next=this._head;this._head.previous=item}this._head=item};LinkedMap.prototype.addItemLast=function(item){if(!this._head&&!this._tail){this._head=item}else if(!this._tail){throw new Error("Invalid list")}else{item.previous=this._tail;this._tail.next=item}this._tail=item};LinkedMap.prototype.removeItem=function(item){if(item===this._head&&item===this._tail){this._head=void 0;this._tail=void 0}else if(item===this._head){this._head=item.next}else if(item===this._tail){this._tail=item.previous}else{var next=item.next;var previous=item.previous;if(!next||!previous){throw new Error("Invalid list")}next.previous=previous;previous.next=next}};LinkedMap.prototype.touch=function(item,touch){if(!this._head||!this._tail){throw new Error("Invalid list")}if(touch!==Touch.AsOld&&touch!==Touch.AsNew){return}if(touch===Touch.AsOld){if(item===this._head){return}var next=item.next;var previous=item.previous;if(item===this._tail){previous.next=void 0;this._tail=previous}else{next.previous=previous;previous.next=next}item.previous=void 0;item.next=this._head;this._head.previous=item;this._head=item}else if(touch===Touch.AsNew){if(item===this._tail){return}var next=item.next;var previous=item.previous;if(item===this._head){next.previous=void 0;this._head=next}else{next.previous=previous;previous.next=next}item.next=void 0;item.previous=this._tail;this._tail.next=item;this._tail=item}};return LinkedMap}();var LRUCache=function(_super){__extends(LRUCache,_super);function LRUCache(limit,ratio){if(ratio===void 0){ratio=1}var _this=_super.call(this)||this;_this._limit=limit;_this._ratio=Math.min(Math.max(0,ratio),1);return _this}Object.defineProperty(LRUCache.prototype,"limit",{get:function(){return this._limit},set:function(limit){this._limit=limit;this.checkTrim()},enumerable:true,configurable:true});Object.defineProperty(LRUCache.prototype,"ratio",{get:function(){return this._ratio},set:function(ratio){this._ratio=Math.min(Math.max(0,ratio),1);this.checkTrim()},enumerable:true,configurable:true});LRUCache.prototype.get=function(key){return _super.prototype.get.call(this,key,Touch.AsNew)};LRUCache.prototype.peek=function(key){return _super.prototype.get.call(this,key,Touch.None)};LRUCache.prototype.set=function(key,value){_super.prototype.set.call(this,key,value,Touch.AsNew);this.checkTrim()};LRUCache.prototype.checkTrim=function(){if(this.size>this._limit){this.trimOld(Math.round(this._limit*this._ratio))}};return LRUCache}(LinkedMap)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"MirrorTextModel",function(){return MirrorTextModel});var _viewModel_prefixSumComputer_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(16);var _core_position_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9);var MirrorTextModel=function(){function MirrorTextModel(uri,lines,eol,versionId){this._uri=uri;this._lines=lines;this._eol=eol;this._versionId=versionId}MirrorTextModel.prototype.dispose=function(){this._lines.length=0};Object.defineProperty(MirrorTextModel.prototype,"version",{get:function(){return this._versionId},enumerable:true,configurable:true});MirrorTextModel.prototype.getText=function(){return this._lines.join(this._eol)};MirrorTextModel.prototype.onEvents=function(e){if(e.eol&&e.eol!==this._eol){this._eol=e.eol;this._lineStarts=null}var changes=e.changes;for(var i=0,len=changes.length;i<len;i++){var change=changes[i];this._acceptDeleteRange(change.range);this._acceptInsertText(new _core_position_js__WEBPACK_IMPORTED_MODULE_1__["Position"](change.range.startLineNumber,change.range.startColumn),change.text)}this._versionId=e.versionId};MirrorTextModel.prototype._ensureLineStarts=function(){if(!this._lineStarts){var eolLength=this._eol.length;var linesLength=this._lines.length;var lineStartValues=new Uint32Array(linesLength);for(var i=0;i<linesLength;i++){lineStartValues[i]=this._lines[i].length+eolLength}this._lineStarts=new _viewModel_prefixSumComputer_js__WEBPACK_IMPORTED_MODULE_0__["PrefixSumComputer"](lineStartValues)}};MirrorTextModel.prototype._setLineText=function(lineIndex,newValue){this._lines[lineIndex]=newValue;if(this._lineStarts){this._lineStarts.changeValue(lineIndex,this._lines[lineIndex].length+this._eol.length)}};MirrorTextModel.prototype._acceptDeleteRange=function(range){if(range.startLineNumber===range.endLineNumber){if(range.startColumn===range.endColumn){return}this._setLineText(range.startLineNumber-1,this._lines[range.startLineNumber-1].substring(0,range.startColumn-1)+this._lines[range.startLineNumber-1].substring(range.endColumn-1));return}this._setLineText(range.startLineNumber-1,this._lines[range.startLineNumber-1].substring(0,range.startColumn-1)+this._lines[range.endLineNumber-1].substring(range.endColumn-1));this._lines.splice(range.startLineNumber,range.endLineNumber-range.startLineNumber);if(this._lineStarts){this._lineStarts.removeValues(range.startLineNumber,range.endLineNumber-range.startLineNumber)}};MirrorTextModel.prototype._acceptInsertText=function(position,insertText){if(insertText.length===0){return}var insertLines=insertText.split(/\r\n|\r|\n/);if(insertLines.length===1){this._setLineText(position.lineNumber-1,this._lines[position.lineNumber-1].substring(0,position.column-1)+insertLines[0]+this._lines[position.lineNumber-1].substring(position.column-1));return}insertLines[insertLines.length-1]+=this._lines[position.lineNumber-1].substring(position.column-1);this._setLineText(position.lineNumber-1,this._lines[position.lineNumber-1].substring(0,position.column-1)+insertLines[0]);var newLengths=new Uint32Array(insertLines.length-1);for(var i=1;i<insertLines.length;i++){this._lines.splice(position.lineNumber+i-1,0,insertLines[i]);newLengths[i-1]=insertLines[i].length+this._eol.length}if(this._lineStarts){this._lineStarts.insertValues(position.lineNumber,newLengths)}};return MirrorTextModel}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"PrefixSumIndexOfResult",function(){return PrefixSumIndexOfResult});__webpack_require__.d(__webpack_exports__,"PrefixSumComputer",function(){return PrefixSumComputer});__webpack_require__.d(__webpack_exports__,"PrefixSumComputerWithCache",function(){return PrefixSumComputerWithCache});var _core_uint_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(17);var PrefixSumIndexOfResult=function(){function PrefixSumIndexOfResult(index,remainder){this.index=index;this.remainder=remainder}return PrefixSumIndexOfResult}();var PrefixSumComputer=function(){function PrefixSumComputer(values){this.values=values;this.prefixSum=new Uint32Array(values.length);this.prefixSumValidIndex=new Int32Array(1);this.prefixSumValidIndex[0]=-1}PrefixSumComputer.prototype.getCount=function(){return this.values.length};PrefixSumComputer.prototype.insertValues=function(insertIndex,insertValues){insertIndex=Object(_core_uint_js__WEBPACK_IMPORTED_MODULE_0__["toUint32"])(insertIndex);var oldValues=this.values;var oldPrefixSum=this.prefixSum;var insertValuesLen=insertValues.length;if(insertValuesLen===0){return false}this.values=new Uint32Array(oldValues.length+insertValuesLen);this.values.set(oldValues.subarray(0,insertIndex),0);this.values.set(oldValues.subarray(insertIndex),insertIndex+insertValuesLen);this.values.set(insertValues,insertIndex);if(insertIndex-1<this.prefixSumValidIndex[0]){this.prefixSumValidIndex[0]=insertIndex-1}this.prefixSum=new Uint32Array(this.values.length);if(this.prefixSumValidIndex[0]>=0){this.prefixSum.set(oldPrefixSum.subarray(0,this.prefixSumValidIndex[0]+1))}return true};PrefixSumComputer.prototype.changeValue=function(index,value){index=Object(_core_uint_js__WEBPACK_IMPORTED_MODULE_0__["toUint32"])(index);value=Object(_core_uint_js__WEBPACK_IMPORTED_MODULE_0__["toUint32"])(value);if(this.values[index]===value){return false}this.values[index]=value;if(index-1<this.prefixSumValidIndex[0]){this.prefixSumValidIndex[0]=index-1}return true};PrefixSumComputer.prototype.removeValues=function(startIndex,cnt){startIndex=Object(_core_uint_js__WEBPACK_IMPORTED_MODULE_0__["toUint32"])(startIndex);cnt=Object(_core_uint_js__WEBPACK_IMPORTED_MODULE_0__["toUint32"])(cnt);var oldValues=this.values;var oldPrefixSum=this.prefixSum;if(startIndex>=oldValues.length){return false}var maxCnt=oldValues.length-startIndex;if(cnt>=maxCnt){cnt=maxCnt}if(cnt===0){return false}this.values=new Uint32Array(oldValues.length-cnt);this.values.set(oldValues.subarray(0,startIndex),0);this.values.set(oldValues.subarray(startIndex+cnt),startIndex);this.prefixSum=new Uint32Array(this.values.length);if(startIndex-1<this.prefixSumValidIndex[0]){this.prefixSumValidIndex[0]=startIndex-1}if(this.prefixSumValidIndex[0]>=0){this.prefixSum.set(oldPrefixSum.subarray(0,this.prefixSumValidIndex[0]+1))}return true};PrefixSumComputer.prototype.getTotalValue=function(){if(this.values.length===0){return 0}return this._getAccumulatedValue(this.values.length-1)};PrefixSumComputer.prototype.getAccumulatedValue=function(index){if(index<0){return 0}index=Object(_core_uint_js__WEBPACK_IMPORTED_MODULE_0__["toUint32"])(index);return this._getAccumulatedValue(index)};PrefixSumComputer.prototype._getAccumulatedValue=function(index){if(index<=this.prefixSumValidIndex[0]){return this.prefixSum[index]}var startIndex=this.prefixSumValidIndex[0]+1;if(startIndex===0){this.prefixSum[0]=this.values[0];startIndex++}if(index>=this.values.length){index=this.values.length-1}for(var i=startIndex;i<=index;i++){this.prefixSum[i]=this.prefixSum[i-1]+this.values[i]}this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],index);return this.prefixSum[index]};PrefixSumComputer.prototype.getIndexOf=function(accumulatedValue){accumulatedValue=Math.floor(accumulatedValue);this.getTotalValue();var low=0;var high=this.values.length-1;var mid;var midStop;var midStart;while(low<=high){mid=low+(high-low)/2|0;midStop=this.prefixSum[mid];midStart=midStop-this.values[mid];if(accumulatedValue<midStart){high=mid-1}else if(accumulatedValue>=midStop){low=mid+1}else{break}}return new PrefixSumIndexOfResult(mid,accumulatedValue-midStart)};return PrefixSumComputer}();var PrefixSumComputerWithCache=function(){function PrefixSumComputerWithCache(values){this._cacheAccumulatedValueStart=0;this._cache=null;this._actual=new PrefixSumComputer(values);this._bustCache()}PrefixSumComputerWithCache.prototype._bustCache=function(){this._cacheAccumulatedValueStart=0;this._cache=null};PrefixSumComputerWithCache.prototype.insertValues=function(insertIndex,insertValues){if(this._actual.insertValues(insertIndex,insertValues)){this._bustCache()}};PrefixSumComputerWithCache.prototype.changeValue=function(index,value){if(this._actual.changeValue(index,value)){this._bustCache()}};PrefixSumComputerWithCache.prototype.removeValues=function(startIndex,cnt){if(this._actual.removeValues(startIndex,cnt)){this._bustCache()}};PrefixSumComputerWithCache.prototype.getTotalValue=function(){return this._actual.getTotalValue()};PrefixSumComputerWithCache.prototype.getAccumulatedValue=function(index){return this._actual.getAccumulatedValue(index)};PrefixSumComputerWithCache.prototype.getIndexOf=function(accumulatedValue){accumulatedValue=Math.floor(accumulatedValue);if(this._cache!==null){var cacheIndex=accumulatedValue-this._cacheAccumulatedValueStart;if(cacheIndex>=0&&cacheIndex<this._cache.length){return this._cache[cacheIndex]}}return this._actual.getIndexOf(accumulatedValue)};PrefixSumComputerWithCache.prototype.warmUpCache=function(accumulatedValueStart,accumulatedValueEnd){var newCache=[];for(var accumulatedValue=accumulatedValueStart;accumulatedValue<=accumulatedValueEnd;accumulatedValue++){newCache[accumulatedValue-accumulatedValueStart]=this.getIndexOf(accumulatedValue)}this._cache=newCache;this._cacheAccumulatedValueStart=accumulatedValueStart};return PrefixSumComputerWithCache}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"Uint8Matrix",function(){return Uint8Matrix});__webpack_require__.d(__webpack_exports__,"toUint8",function(){return toUint8});__webpack_require__.d(__webpack_exports__,"toUint32",function(){return toUint32});__webpack_require__.d(__webpack_exports__,"toUint32Array",function(){return toUint32Array});var Uint8Matrix=function(){function Uint8Matrix(rows,cols,defaultValue){var data=new Uint8Array(rows*cols);for(var i=0,len=rows*cols;i<len;i++){data[i]=defaultValue}this._data=data;this.rows=rows;this.cols=cols}Uint8Matrix.prototype.get=function(row,col){return this._data[row*this.cols+col]};Uint8Matrix.prototype.set=function(row,col,value){this._data[row*this.cols+col]=value};return Uint8Matrix}();function toUint8(v){if(v<0){return 0}if(v>255){return 255}return v|0}function toUint32(v){if(v<0){return 0}if(v>4294967295){return 4294967295}return v|0}function toUint32Array(arr){var len=arr.length;var r=new Uint32Array(len);for(var i=0;i<len;i++){r[i]=toUint32(arr[i])}return r}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"computeLinks",function(){return computeLinks});var _core_characterClassifier_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(19);var _core_uint_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(17);var StateMachine=function(){function StateMachine(edges){var maxCharCode=0;var maxState=0;for(var i=0,len=edges.length;i<len;i++){var _a=edges[i],from=_a[0],chCode=_a[1],to=_a[2];if(chCode>maxCharCode){maxCharCode=chCode}if(from>maxState){maxState=from}if(to>maxState){maxState=to}}maxCharCode++;maxState++;var states=new _core_uint_js__WEBPACK_IMPORTED_MODULE_1__["Uint8Matrix"](maxState,maxCharCode,0);for(var i=0,len=edges.length;i<len;i++){var _b=edges[i],from=_b[0],chCode=_b[1],to=_b[2];states.set(from,chCode,to)}this._states=states;this._maxCharCode=maxCharCode}StateMachine.prototype.nextState=function(currentState,chCode){if(chCode<0||chCode>=this._maxCharCode){return 0}return this._states.get(currentState,chCode)};return StateMachine}();var _stateMachine=null;function getStateMachine(){if(_stateMachine===null){_stateMachine=new StateMachine([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])}return _stateMachine}var _classifier=null;function getClassifier(){if(_classifier===null){_classifier=new _core_characterClassifier_js__WEBPACK_IMPORTED_MODULE_0__["CharacterClassifier"](0);var FORCE_TERMINATION_CHARACTERS=" \t<>'\"、。｡､，．：；？！＠＃＄％＆＊‘“〈《「『【〔（［｛｢｣｝］）〕】』」》〉”’｀～…";for(var i=0;i<FORCE_TERMINATION_CHARACTERS.length;i++){_classifier.set(FORCE_TERMINATION_CHARACTERS.charCodeAt(i),1)}var CANNOT_END_WITH_CHARACTERS=".,;";for(var i=0;i<CANNOT_END_WITH_CHARACTERS.length;i++){_classifier.set(CANNOT_END_WITH_CHARACTERS.charCodeAt(i),2)}}return _classifier}var LinkComputer=function(){function LinkComputer(){}LinkComputer._createLink=function(classifier,line,lineNumber,linkBeginIndex,linkEndIndex){var lastIncludedCharIndex=linkEndIndex-1;do{var chCode=line.charCodeAt(lastIncludedCharIndex);var chClass=classifier.get(chCode);if(chClass!==2){break}lastIncludedCharIndex--}while(lastIncludedCharIndex>linkBeginIndex);if(linkBeginIndex>0){var charCodeBeforeLink=line.charCodeAt(linkBeginIndex-1);var lastCharCodeInLink=line.charCodeAt(lastIncludedCharIndex);if(charCodeBeforeLink===40&&lastCharCodeInLink===41||charCodeBeforeLink===91&&lastCharCodeInLink===93||charCodeBeforeLink===123&&lastCharCodeInLink===125){lastIncludedCharIndex--}}return{range:{startLineNumber:lineNumber,startColumn:linkBeginIndex+1,endLineNumber:lineNumber,endColumn:lastIncludedCharIndex+2},url:line.substring(linkBeginIndex,lastIncludedCharIndex+1)}};LinkComputer.computeLinks=function(model){var stateMachine=getStateMachine();var classifier=getClassifier();var result=[];for(var i=1,lineCount=model.getLineCount();i<=lineCount;i++){var line=model.getLineContent(i);var len=line.length;var j=0;var linkBeginIndex=0;var linkBeginChCode=0;var state=1;var hasOpenParens=false;var hasOpenSquareBracket=false;var hasOpenCurlyBracket=false;while(j<len){var resetStateMachine=false;var chCode=line.charCodeAt(j);if(state===13){var chClass=void 0;switch(chCode){case 40:hasOpenParens=true;chClass=0;break;case 41:chClass=hasOpenParens?0:1;break;case 91:hasOpenSquareBracket=true;chClass=0;break;case 93:chClass=hasOpenSquareBracket?0:1;break;case 123:hasOpenCurlyBracket=true;chClass=0;break;case 125:chClass=hasOpenCurlyBracket?0:1;break;case 39:chClass=linkBeginChCode===34||linkBeginChCode===96?0:1;break;case 34:chClass=linkBeginChCode===39||linkBeginChCode===96?0:1;break;case 96:chClass=linkBeginChCode===39||linkBeginChCode===34?0:1;break;default:chClass=classifier.get(chCode)}if(chClass===1){result.push(LinkComputer._createLink(classifier,line,i,linkBeginIndex,j));resetStateMachine=true}}else if(state===12){var chClass=classifier.get(chCode);if(chClass===1){resetStateMachine=true}else{state=13}}else{state=stateMachine.nextState(state,chCode);if(state===0){resetStateMachine=true}}if(resetStateMachine){state=1;hasOpenParens=false;hasOpenSquareBracket=false;hasOpenCurlyBracket=false;linkBeginIndex=j+1;linkBeginChCode=chCode}j++}if(state===13){result.push(LinkComputer._createLink(classifier,line,i,linkBeginIndex,len))}}return result};return LinkComputer}();function computeLinks(model){if(!model||typeof model.getLineCount!=="function"||typeof model.getLineContent!=="function"){return[]}return LinkComputer.computeLinks(model)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"CharacterClassifier",function(){return CharacterClassifier});__webpack_require__.d(__webpack_exports__,"CharacterSet",function(){return CharacterSet});var _uint_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(17);var CharacterClassifier=function(){function CharacterClassifier(_defaultValue){var defaultValue=Object(_uint_js__WEBPACK_IMPORTED_MODULE_0__["toUint8"])(_defaultValue);this._defaultValue=defaultValue;this._asciiMap=CharacterClassifier._createAsciiMap(defaultValue);this._map=new Map}CharacterClassifier._createAsciiMap=function(defaultValue){var asciiMap=new Uint8Array(256);for(var i=0;i<256;i++){asciiMap[i]=defaultValue}return asciiMap};CharacterClassifier.prototype.set=function(charCode,_value){var value=Object(_uint_js__WEBPACK_IMPORTED_MODULE_0__["toUint8"])(_value);if(charCode>=0&&charCode<256){this._asciiMap[charCode]=value}else{this._map.set(charCode,value)}};CharacterClassifier.prototype.get=function(charCode){if(charCode>=0&&charCode<256){return this._asciiMap[charCode]}else{return this._map.get(charCode)||this._defaultValue}};return CharacterClassifier}();var CharacterSet=function(){function CharacterSet(){this._actual=new CharacterClassifier(0)}CharacterSet.prototype.add=function(charCode){this._actual.set(charCode,1)};CharacterSet.prototype.has=function(charCode){return this._actual.get(charCode)===1};return CharacterSet}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"BasicInplaceReplace",function(){return BasicInplaceReplace});var BasicInplaceReplace=function(){function BasicInplaceReplace(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}BasicInplaceReplace.prototype.navigateValueSet=function(range1,text1,range2,text2,up){if(range1&&text1){var result=this.doNavigateValueSet(text1,up);if(result){return{range:range1,value:result}}}if(range2&&text2){var result=this.doNavigateValueSet(text2,up);if(result){return{range:range2,value:result}}}return null};BasicInplaceReplace.prototype.doNavigateValueSet=function(text,up){var numberResult=this.numberReplace(text,up);if(numberResult!==null){return numberResult}return this.textReplace(text,up)};BasicInplaceReplace.prototype.numberReplace=function(value,up){var precision=Math.pow(10,value.length-(value.lastIndexOf(".")+1));var n1=Number(value);var n2=parseFloat(value);if(!isNaN(n1)&&!isNaN(n2)&&n1===n2){if(n1===0&&!up){return null}else{n1=Math.floor(n1*precision);n1+=up?precision:-precision;return String(n1/precision)}}return null};BasicInplaceReplace.prototype.textReplace=function(value,up){return this.valueSetsReplace(this._defaultValueSet,value,up)};BasicInplaceReplace.prototype.valueSetsReplace=function(valueSets,value,up){var result=null;for(var i=0,len=valueSets.length;result===null&&i<len;i++){result=this.valueSetReplace(valueSets[i],value,up)}return result};BasicInplaceReplace.prototype.valueSetReplace=function(valueSet,value,up){var idx=valueSet.indexOf(value);if(idx>=0){idx+=up?+1:-1;if(idx<0){idx=valueSet.length-1}else{idx%=valueSet.length}return valueSet[idx]}return null};BasicInplaceReplace.INSTANCE=new BasicInplaceReplace;return BasicInplaceReplace}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"USUAL_WORD_SEPARATORS",function(){return USUAL_WORD_SEPARATORS});__webpack_require__.d(__webpack_exports__,"DEFAULT_WORD_REGEXP",function(){return DEFAULT_WORD_REGEXP});__webpack_require__.d(__webpack_exports__,"ensureValidWordDefinition",function(){return ensureValidWordDefinition});__webpack_require__.d(__webpack_exports__,"getWordAtText",function(){return getWordAtText});var USUAL_WORD_SEPARATORS="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function createWordRegExp(allowInWords){if(allowInWords===void 0){allowInWords=""}var source="(-?\\d*\\.\\d\\w*)|([^";for(var i=0;i<USUAL_WORD_SEPARATORS.length;i++){if(allowInWords.indexOf(USUAL_WORD_SEPARATORS[i])>=0){continue}source+="\\"+USUAL_WORD_SEPARATORS[i]}source+="\\s]+)";return new RegExp(source,"g")}var DEFAULT_WORD_REGEXP=createWordRegExp();function ensureValidWordDefinition(wordDefinition){var result=DEFAULT_WORD_REGEXP;if(wordDefinition&&wordDefinition instanceof RegExp){if(!wordDefinition.global){var flags="g";if(wordDefinition.ignoreCase){flags+="i"}if(wordDefinition.multiline){flags+="m"}result=new RegExp(wordDefinition.source,flags)}else{result=wordDefinition}}result.lastIndex=0;return result}function getWordAtPosFast(column,wordDefinition,text,textOffset){var pos=column-1-textOffset;var start=text.lastIndexOf(" ",pos-1)+1;var end=text.indexOf(" ",pos);if(end===-1){end=text.length}wordDefinition.lastIndex=start;var match;while(match=wordDefinition.exec(text)){if(match.index<=pos&&wordDefinition.lastIndex>=pos){return{word:match[0],startColumn:textOffset+1+match.index,endColumn:textOffset+1+wordDefinition.lastIndex}}}return null}function getWordAtPosSlow(column,wordDefinition,text,textOffset){var pos=column-1-textOffset;wordDefinition.lastIndex=0;var match;while(match=wordDefinition.exec(text)){if(match.index>pos){return null}else if(wordDefinition.lastIndex>=pos){return{word:match[0],startColumn:textOffset+1+match.index,endColumn:textOffset+1+wordDefinition.lastIndex}}}return null}function getWordAtText(column,wordDefinition,text,textOffset){wordDefinition.lastIndex=0;var match=wordDefinition.exec(text);if(!match){return null}var ret=match[0].indexOf(" ")>=0?getWordAtPosSlow(column,wordDefinition,text,textOffset):getWordAtPosFast(column,wordDefinition,text,textOffset);wordDefinition.lastIndex=0;return ret}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"Severity",function(){return Severity});__webpack_require__.d(__webpack_exports__,"MarkerSeverity",function(){return MarkerSeverity});__webpack_require__.d(__webpack_exports__,"KeyMod",function(){return KeyMod});__webpack_require__.d(__webpack_exports__,"KeyCode",function(){return KeyCode});__webpack_require__.d(__webpack_exports__,"createMonacoBaseAPI",function(){return createMonacoBaseAPI});var _base_common_event_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(23);var _base_common_keyCodes_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(28);var _core_position_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9);var _core_range_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8);var _core_selection_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(29);var _base_common_winjs_base_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(7);var _base_common_cancellation_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(30);var _core_token_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(31);var _base_common_uri_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(3);var Severity;(function(Severity){Severity[Severity["Ignore"]=0]="Ignore";Severity[Severity["Info"]=1]="Info";Severity[Severity["Warning"]=2]="Warning";Severity[Severity["Error"]=3]="Error"})(Severity||(Severity={}));var MarkerSeverity;(function(MarkerSeverity){MarkerSeverity[MarkerSeverity["Hint"]=1]="Hint";MarkerSeverity[MarkerSeverity["Info"]=2]="Info";MarkerSeverity[MarkerSeverity["Warning"]=4]="Warning";MarkerSeverity[MarkerSeverity["Error"]=8]="Error"})(MarkerSeverity||(MarkerSeverity={}));var KeyMod=function(){function KeyMod(){}KeyMod.chord=function(firstPart,secondPart){return Object(_base_common_keyCodes_js__WEBPACK_IMPORTED_MODULE_1__["KeyChord"])(firstPart,secondPart)};KeyMod.CtrlCmd=2048;KeyMod.Shift=1024;KeyMod.Alt=512;KeyMod.WinCtrl=256;return KeyMod}();var KeyCode;(function(KeyCode){KeyCode[KeyCode["Unknown"]=0]="Unknown";KeyCode[KeyCode["Backspace"]=1]="Backspace";KeyCode[KeyCode["Tab"]=2]="Tab";KeyCode[KeyCode["Enter"]=3]="Enter";KeyCode[KeyCode["Shift"]=4]="Shift";KeyCode[KeyCode["Ctrl"]=5]="Ctrl";KeyCode[KeyCode["Alt"]=6]="Alt";KeyCode[KeyCode["PauseBreak"]=7]="PauseBreak";KeyCode[KeyCode["CapsLock"]=8]="CapsLock";KeyCode[KeyCode["Escape"]=9]="Escape";KeyCode[KeyCode["Space"]=10]="Space";KeyCode[KeyCode["PageUp"]=11]="PageUp";KeyCode[KeyCode["PageDown"]=12]="PageDown";KeyCode[KeyCode["End"]=13]="End";KeyCode[KeyCode["Home"]=14]="Home";KeyCode[KeyCode["LeftArrow"]=15]="LeftArrow";KeyCode[KeyCode["UpArrow"]=16]="UpArrow";KeyCode[KeyCode["RightArrow"]=17]="RightArrow";KeyCode[KeyCode["DownArrow"]=18]="DownArrow";KeyCode[KeyCode["Insert"]=19]="Insert";KeyCode[KeyCode["Delete"]=20]="Delete";KeyCode[KeyCode["KEY_0"]=21]="KEY_0";KeyCode[KeyCode["KEY_1"]=22]="KEY_1";KeyCode[KeyCode["KEY_2"]=23]="KEY_2";KeyCode[KeyCode["KEY_3"]=24]="KEY_3";KeyCode[KeyCode["KEY_4"]=25]="KEY_4";KeyCode[KeyCode["KEY_5"]=26]="KEY_5";KeyCode[KeyCode["KEY_6"]=27]="KEY_6";KeyCode[KeyCode["KEY_7"]=28]="KEY_7";KeyCode[KeyCode["KEY_8"]=29]="KEY_8";KeyCode[KeyCode["KEY_9"]=30]="KEY_9";KeyCode[KeyCode["KEY_A"]=31]="KEY_A";KeyCode[KeyCode["KEY_B"]=32]="KEY_B";KeyCode[KeyCode["KEY_C"]=33]="KEY_C";KeyCode[KeyCode["KEY_D"]=34]="KEY_D";KeyCode[KeyCode["KEY_E"]=35]="KEY_E";KeyCode[KeyCode["KEY_F"]=36]="KEY_F";KeyCode[KeyCode["KEY_G"]=37]="KEY_G";KeyCode[KeyCode["KEY_H"]=38]="KEY_H";KeyCode[KeyCode["KEY_I"]=39]="KEY_I";KeyCode[KeyCode["KEY_J"]=40]="KEY_J";KeyCode[KeyCode["KEY_K"]=41]="KEY_K";KeyCode[KeyCode["KEY_L"]=42]="KEY_L";KeyCode[KeyCode["KEY_M"]=43]="KEY_M";KeyCode[KeyCode["KEY_N"]=44]="KEY_N";KeyCode[KeyCode["KEY_O"]=45]="KEY_O";KeyCode[KeyCode["KEY_P"]=46]="KEY_P";KeyCode[KeyCode["KEY_Q"]=47]="KEY_Q";KeyCode[KeyCode["KEY_R"]=48]="KEY_R";KeyCode[KeyCode["KEY_S"]=49]="KEY_S";KeyCode[KeyCode["KEY_T"]=50]="KEY_T";KeyCode[KeyCode["KEY_U"]=51]="KEY_U";KeyCode[KeyCode["KEY_V"]=52]="KEY_V";KeyCode[KeyCode["KEY_W"]=53]="KEY_W";KeyCode[KeyCode["KEY_X"]=54]="KEY_X";KeyCode[KeyCode["KEY_Y"]=55]="KEY_Y";KeyCode[KeyCode["KEY_Z"]=56]="KEY_Z";KeyCode[KeyCode["Meta"]=57]="Meta";KeyCode[KeyCode["ContextMenu"]=58]="ContextMenu";KeyCode[KeyCode["F1"]=59]="F1";KeyCode[KeyCode["F2"]=60]="F2";KeyCode[KeyCode["F3"]=61]="F3";KeyCode[KeyCode["F4"]=62]="F4";KeyCode[KeyCode["F5"]=63]="F5";KeyCode[KeyCode["F6"]=64]="F6";KeyCode[KeyCode["F7"]=65]="F7";KeyCode[KeyCode["F8"]=66]="F8";KeyCode[KeyCode["F9"]=67]="F9";KeyCode[KeyCode["F10"]=68]="F10";KeyCode[KeyCode["F11"]=69]="F11";KeyCode[KeyCode["F12"]=70]="F12";KeyCode[KeyCode["F13"]=71]="F13";KeyCode[KeyCode["F14"]=72]="F14";KeyCode[KeyCode["F15"]=73]="F15";KeyCode[KeyCode["F16"]=74]="F16";KeyCode[KeyCode["F17"]=75]="F17";KeyCode[KeyCode["F18"]=76]="F18";KeyCode[KeyCode["F19"]=77]="F19";KeyCode[KeyCode["NumLock"]=78]="NumLock";KeyCode[KeyCode["ScrollLock"]=79]="ScrollLock";KeyCode[KeyCode["US_SEMICOLON"]=80]="US_SEMICOLON";KeyCode[KeyCode["US_EQUAL"]=81]="US_EQUAL";KeyCode[KeyCode["US_COMMA"]=82]="US_COMMA";KeyCode[KeyCode["US_MINUS"]=83]="US_MINUS";KeyCode[KeyCode["US_DOT"]=84]="US_DOT";KeyCode[KeyCode["US_SLASH"]=85]="US_SLASH";KeyCode[KeyCode["US_BACKTICK"]=86]="US_BACKTICK";KeyCode[KeyCode["US_OPEN_SQUARE_BRACKET"]=87]="US_OPEN_SQUARE_BRACKET";KeyCode[KeyCode["US_BACKSLASH"]=88]="US_BACKSLASH";KeyCode[KeyCode["US_CLOSE_SQUARE_BRACKET"]=89]="US_CLOSE_SQUARE_BRACKET";KeyCode[KeyCode["US_QUOTE"]=90]="US_QUOTE";KeyCode[KeyCode["OEM_8"]=91]="OEM_8";KeyCode[KeyCode["OEM_102"]=92]="OEM_102";KeyCode[KeyCode["NUMPAD_0"]=93]="NUMPAD_0";KeyCode[KeyCode["NUMPAD_1"]=94]="NUMPAD_1";KeyCode[KeyCode["NUMPAD_2"]=95]="NUMPAD_2";KeyCode[KeyCode["NUMPAD_3"]=96]="NUMPAD_3";KeyCode[KeyCode["NUMPAD_4"]=97]="NUMPAD_4";KeyCode[KeyCode["NUMPAD_5"]=98]="NUMPAD_5";KeyCode[KeyCode["NUMPAD_6"]=99]="NUMPAD_6";KeyCode[KeyCode["NUMPAD_7"]=100]="NUMPAD_7";KeyCode[KeyCode["NUMPAD_8"]=101]="NUMPAD_8";KeyCode[KeyCode["NUMPAD_9"]=102]="NUMPAD_9";KeyCode[KeyCode["NUMPAD_MULTIPLY"]=103]="NUMPAD_MULTIPLY";KeyCode[KeyCode["NUMPAD_ADD"]=104]="NUMPAD_ADD";KeyCode[KeyCode["NUMPAD_SEPARATOR"]=105]="NUMPAD_SEPARATOR";KeyCode[KeyCode["NUMPAD_SUBTRACT"]=106]="NUMPAD_SUBTRACT";KeyCode[KeyCode["NUMPAD_DECIMAL"]=107]="NUMPAD_DECIMAL";KeyCode[KeyCode["NUMPAD_DIVIDE"]=108]="NUMPAD_DIVIDE";KeyCode[KeyCode["KEY_IN_COMPOSITION"]=109]="KEY_IN_COMPOSITION";KeyCode[KeyCode["ABNT_C1"]=110]="ABNT_C1";KeyCode[KeyCode["ABNT_C2"]=111]="ABNT_C2";KeyCode[KeyCode["MAX_VALUE"]=112]="MAX_VALUE"})(KeyCode||(KeyCode={}));function createMonacoBaseAPI(){return{editor:undefined,languages:undefined,CancellationTokenSource:_base_common_cancellation_js__WEBPACK_IMPORTED_MODULE_6__["CancellationTokenSource"],Emitter:_base_common_event_js__WEBPACK_IMPORTED_MODULE_0__["Emitter"],KeyCode,KeyMod,Position:_core_position_js__WEBPACK_IMPORTED_MODULE_2__["Position"],Range:_core_range_js__WEBPACK_IMPORTED_MODULE_3__["Range"],Selection:_core_selection_js__WEBPACK_IMPORTED_MODULE_4__["Selection"],SelectionDirection:_core_selection_js__WEBPACK_IMPORTED_MODULE_4__["SelectionDirection"],Severity,MarkerSeverity,Promise:_base_common_winjs_base_js__WEBPACK_IMPORTED_MODULE_5__["TPromise"],Uri:_base_common_uri_js__WEBPACK_IMPORTED_MODULE_8__["default"],Token:_core_token_js__WEBPACK_IMPORTED_MODULE_7__["Token"]}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"Event",function(){return Event});__webpack_require__.d(__webpack_exports__,"Emitter",function(){return Emitter});__webpack_require__.d(__webpack_exports__,"EventMultiplexer",function(){return EventMultiplexer});__webpack_require__.d(__webpack_exports__,"fromCallback",function(){return fromCallback});__webpack_require__.d(__webpack_exports__,"fromPromise",function(){return fromPromise});__webpack_require__.d(__webpack_exports__,"toPromise",function(){return toPromise});__webpack_require__.d(__webpack_exports__,"once",function(){return once});__webpack_require__.d(__webpack_exports__,"anyEvent",function(){return anyEvent});__webpack_require__.d(__webpack_exports__,"debounceEvent",function(){return debounceEvent});__webpack_require__.d(__webpack_exports__,"EventBufferer",function(){return EventBufferer});__webpack_require__.d(__webpack_exports__,"mapEvent",function(){return mapEvent});__webpack_require__.d(__webpack_exports__,"forEach",function(){return forEach});__webpack_require__.d(__webpack_exports__,"filterEvent",function(){return filterEvent});__webpack_require__.d(__webpack_exports__,"chain",function(){return chain});__webpack_require__.d(__webpack_exports__,"stopwatch",function(){return stopwatch});__webpack_require__.d(__webpack_exports__,"buffer",function(){return buffer});__webpack_require__.d(__webpack_exports__,"echo",function(){return echo});__webpack_require__.d(__webpack_exports__,"Relay",function(){return Relay});__webpack_require__.d(__webpack_exports__,"fromNodeEventEmitter",function(){return fromNodeEventEmitter});__webpack_require__.d(__webpack_exports__,"latch",function(){return latch});var _lifecycle_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(24);var _winjs_base_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7);var _functional_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(25);var _errors_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(26);var _linkedList_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(27);var Event;(function(Event){var _disposable={dispose:function(){}};Event.None=function(){return _disposable}})(Event||(Event={}));var Emitter=function(){function Emitter(_options){this._options=_options}Object.defineProperty(Emitter.prototype,"event",{get:function(){var _this=this;if(!this._event){this._event=function(listener,thisArgs,disposables){if(!_this._listeners){_this._listeners=new _linkedList_js__WEBPACK_IMPORTED_MODULE_4__["LinkedList"]}var firstListener=_this._listeners.isEmpty();if(firstListener&&_this._options&&_this._options.onFirstListenerAdd){_this._options.onFirstListenerAdd(_this)}var remove=_this._listeners.push(!thisArgs?listener:[listener,thisArgs]);if(firstListener&&_this._options&&_this._options.onFirstListenerDidAdd){_this._options.onFirstListenerDidAdd(_this)}if(_this._options&&_this._options.onListenerDidAdd){_this._options.onListenerDidAdd(_this,listener,thisArgs)}var result;result={dispose:function(){result.dispose=Emitter._noop;if(!_this._disposed){remove();if(_this._options&&_this._options.onLastListenerRemove&&_this._listeners.isEmpty()){_this._options.onLastListenerRemove(_this)}}}};if(Array.isArray(disposables)){disposables.push(result)}return result}}return this._event},enumerable:true,configurable:true});Emitter.prototype.fire=function(event){if(this._listeners){if(!this._deliveryQueue){this._deliveryQueue=[]}for(var iter=this._listeners.iterator(),e=iter.next();!e.done;e=iter.next()){this._deliveryQueue.push([e.value,event])}while(this._deliveryQueue.length>0){var _a=this._deliveryQueue.shift(),listener=_a[0],event_1=_a[1];try{if(typeof listener==="function"){listener.call(undefined,event_1)}else{listener[0].call(listener[1],event_1)}}catch(e){Object(_errors_js__WEBPACK_IMPORTED_MODULE_3__["onUnexpectedError"])(e)}}}};Emitter.prototype.dispose=function(){if(this._listeners){this._listeners=undefined}if(this._deliveryQueue){this._deliveryQueue.length=0}this._disposed=true};Emitter._noop=function(){};return Emitter}();var EventMultiplexer=function(){function EventMultiplexer(){var _this=this;this.hasListeners=false;this.events=[];this.emitter=new Emitter({onFirstListenerAdd:function(){return _this.onFirstListenerAdd()},onLastListenerRemove:function(){return _this.onLastListenerRemove()}})}Object.defineProperty(EventMultiplexer.prototype,"event",{get:function(){return this.emitter.event},enumerable:true,configurable:true});EventMultiplexer.prototype.add=function(event){var _this=this;var e={event,listener:null};this.events.push(e);if(this.hasListeners){this.hook(e)}var dispose=function(){if(_this.hasListeners){_this.unhook(e)}var idx=_this.events.indexOf(e);_this.events.splice(idx,1)};return Object(_lifecycle_js__WEBPACK_IMPORTED_MODULE_0__["toDisposable"])(Object(_functional_js__WEBPACK_IMPORTED_MODULE_2__["once"])(dispose))};EventMultiplexer.prototype.onFirstListenerAdd=function(){var _this=this;this.hasListeners=true;this.events.forEach(function(e){return _this.hook(e)})};EventMultiplexer.prototype.onLastListenerRemove=function(){var _this=this;this.hasListeners=false;this.events.forEach(function(e){return _this.unhook(e)})};EventMultiplexer.prototype.hook=function(e){var _this=this;e.listener=e.event(function(r){return _this.emitter.fire(r)})};EventMultiplexer.prototype.unhook=function(e){e.listener.dispose();e.listener=null};EventMultiplexer.prototype.dispose=function(){this.emitter.dispose()};return EventMultiplexer}();function fromCallback(fn){var listener;var emitter=new Emitter({onFirstListenerAdd:function(){return listener=fn(function(e){return emitter.fire(e)})},onLastListenerRemove:function(){return listener.dispose()}});return emitter.event}function fromPromise(promise){var emitter=new Emitter;var shouldEmit=false;promise.then(null,function(){return null}).then(function(){if(!shouldEmit){setTimeout(function(){return emitter.fire()},0)}else{emitter.fire()}});shouldEmit=true;return emitter.event}function toPromise(event){return new _winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"](function(complete){var sub=event(function(e){sub.dispose();complete(e)})})}function once(event){return function(listener,thisArgs,disposables){if(thisArgs===void 0){thisArgs=null}var result=event(function(e){result.dispose();return listener.call(thisArgs,e)},null,disposables);return result}}function anyEvent(){var events=[];for(var _i=0;_i<arguments.length;_i++){events[_i]=arguments[_i]}return function(listener,thisArgs,disposables){if(thisArgs===void 0){thisArgs=null}return Object(_lifecycle_js__WEBPACK_IMPORTED_MODULE_0__["combinedDisposable"])(events.map(function(event){return event(function(e){return listener.call(thisArgs,e)},null,disposables)}))}}function debounceEvent(event,merger,delay,leading){if(delay===void 0){delay=100}if(leading===void 0){leading=false}var subscription;var output=undefined;var handle=undefined;var numDebouncedCalls=0;var emitter=new Emitter({onFirstListenerAdd:function(){subscription=event(function(cur){numDebouncedCalls++;output=merger(output,cur);if(leading&&!handle){emitter.fire(output)}clearTimeout(handle);handle=setTimeout(function(){var _output=output;output=undefined;handle=undefined;if(!leading||numDebouncedCalls>1){emitter.fire(_output)}numDebouncedCalls=0},delay)})},onLastListenerRemove:function(){subscription.dispose()}});return emitter.event}var EventBufferer=function(){function EventBufferer(){this.buffers=[]}EventBufferer.prototype.wrapEvent=function(event){var _this=this;return function(listener,thisArgs,disposables){return event(function(i){var buffer=_this.buffers[_this.buffers.length-1];if(buffer){buffer.push(function(){return listener.call(thisArgs,i)})}else{listener.call(thisArgs,i)}},void 0,disposables)}};EventBufferer.prototype.bufferEvents=function(fn){var buffer=[];this.buffers.push(buffer);fn();this.buffers.pop();buffer.forEach(function(flush){return flush()})};return EventBufferer}();function mapEvent(event,map){return function(listener,thisArgs,disposables){if(thisArgs===void 0){thisArgs=null}return event(function(i){return listener.call(thisArgs,map(i))},null,disposables)}}function forEach(event,each){return function(listener,thisArgs,disposables){if(thisArgs===void 0){thisArgs=null}return event(function(i){each(i);listener.call(thisArgs,i)},null,disposables)}}function filterEvent(event,filter){return function(listener,thisArgs,disposables){if(thisArgs===void 0){thisArgs=null}return event(function(e){return filter(e)&&listener.call(thisArgs,e)},null,disposables)}}var ChainableEvent=function(){function ChainableEvent(_event){this._event=_event}Object.defineProperty(ChainableEvent.prototype,"event",{get:function(){return this._event},enumerable:true,configurable:true});ChainableEvent.prototype.map=function(fn){return new ChainableEvent(mapEvent(this._event,fn))};ChainableEvent.prototype.forEach=function(fn){return new ChainableEvent(forEach(this._event,fn))};ChainableEvent.prototype.filter=function(fn){return new ChainableEvent(filterEvent(this._event,fn))};ChainableEvent.prototype.latch=function(){return new ChainableEvent(latch(this._event))};ChainableEvent.prototype.on=function(listener,thisArgs,disposables){return this._event(listener,thisArgs,disposables)};return ChainableEvent}();function chain(event){return new ChainableEvent(event)}function stopwatch(event){var start=(new Date).getTime();return mapEvent(once(event),function(_){return(new Date).getTime()-start})}function buffer(event,nextTick,buffer){if(nextTick===void 0){nextTick=false}if(buffer===void 0){buffer=[]}buffer=buffer.slice();var listener=event(function(e){if(buffer){buffer.push(e)}else{emitter.fire(e)}});var flush=function(){buffer.forEach(function(e){return emitter.fire(e)});buffer=null};var emitter=new Emitter({onFirstListenerAdd:function(){if(!listener){listener=event(function(e){return emitter.fire(e)})}},onFirstListenerDidAdd:function(){if(buffer){if(nextTick){setTimeout(flush)}else{flush()}}},onLastListenerRemove:function(){listener.dispose();listener=null}});return emitter.event}function echo(event,nextTick,buffer){if(nextTick===void 0){nextTick=false}if(buffer===void 0){buffer=[]}buffer=buffer.slice();event(function(e){buffer.push(e);emitter.fire(e)});var flush=function(listener,thisArgs){return buffer.forEach(function(e){return listener.call(thisArgs,e)})};var emitter=new Emitter({onListenerDidAdd:function(emitter,listener,thisArgs){if(nextTick){setTimeout(function(){return flush(listener,thisArgs)})}else{flush(listener,thisArgs)}}});return emitter.event}var Relay=function(){function Relay(){this.emitter=new Emitter;this.event=this.emitter.event;this.disposable=_lifecycle_js__WEBPACK_IMPORTED_MODULE_0__["empty"]}Object.defineProperty(Relay.prototype,"input",{set:function(event){this.disposable.dispose();this.disposable=event(this.emitter.fire,this.emitter)},enumerable:true,configurable:true});Relay.prototype.dispose=function(){this.disposable.dispose();this.emitter.dispose()};return Relay}();function fromNodeEventEmitter(emitter,eventName,map){if(map===void 0){map=function(id){return id}}var fn=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}return result.fire(map.apply(void 0,args))};var onFirstListenerAdd=function(){return emitter.on(eventName,fn)};var onLastListenerRemove=function(){return emitter.removeListener(eventName,fn)};var result=new Emitter({onFirstListenerAdd,onLastListenerRemove});return result.event}function latch(event){var firstCall=true;var cache;return filterEvent(event,function(value){var shouldEmit=firstCall||value!==cache;firstCall=false;cache=value;return shouldEmit})}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"empty",function(){return empty});__webpack_require__.d(__webpack_exports__,"isDisposable",function(){return isDisposable});__webpack_require__.d(__webpack_exports__,"dispose",function(){return dispose});__webpack_require__.d(__webpack_exports__,"combinedDisposable",function(){return combinedDisposable});__webpack_require__.d(__webpack_exports__,"toDisposable",function(){return toDisposable});__webpack_require__.d(__webpack_exports__,"Disposable",function(){return Disposable});__webpack_require__.d(__webpack_exports__,"ReferenceCollection",function(){return ReferenceCollection});__webpack_require__.d(__webpack_exports__,"ImmortalReference",function(){return ImmortalReference});var _functional_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(25);var empty=Object.freeze({dispose:function(){}});function isDisposable(thing){return typeof thing.dispose==="function"&&thing.dispose.length===0}function dispose(first){var rest=[];for(var _i=1;_i<arguments.length;_i++){rest[_i-1]=arguments[_i]}if(Array.isArray(first)){first.forEach(function(d){return d&&d.dispose()});return[]}else if(rest.length===0){if(first){first.dispose();return first}return undefined}else{dispose(first);dispose(rest);return[]}}function combinedDisposable(disposables){return{dispose:function(){return dispose(disposables)}}}function toDisposable(){var fns=[];for(var _i=0;_i<arguments.length;_i++){fns[_i]=arguments[_i]}return{dispose:function(){for(var _i=0,fns_1=fns;_i<fns_1.length;_i++){var fn=fns_1[_i];fn()}}}}var Disposable=function(){function Disposable(){this._toDispose=[]}Disposable.prototype.dispose=function(){this._toDispose=dispose(this._toDispose)};Disposable.prototype._register=function(t){this._toDispose.push(t);return t};return Disposable}();var ReferenceCollection=function(){function ReferenceCollection(){this.references=Object.create(null)}ReferenceCollection.prototype.acquire=function(key){var _this=this;var reference=this.references[key];if(!reference){reference=this.references[key]={counter:0,object:this.createReferencedObject(key)}}var object=reference.object;var dispose=Object(_functional_js__WEBPACK_IMPORTED_MODULE_0__["once"])(function(){if(--reference.counter===0){_this.destroyReferencedObject(reference.object);delete _this.references[key]}});reference.counter++;return{object,dispose}};return ReferenceCollection}();var ImmortalReference=function(){function ImmortalReference(object){this.object=object}ImmortalReference.prototype.dispose=function(){};return ImmortalReference}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"once",function(){return once});function once(fn){var _this=this;var didCall=false;var result;return function(){if(didCall){return result}didCall=true;result=fn.apply(_this,arguments);return result}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"ErrorHandler",function(){return ErrorHandler});__webpack_require__.d(__webpack_exports__,"errorHandler",function(){return errorHandler});__webpack_require__.d(__webpack_exports__,"setUnexpectedErrorHandler",function(){return setUnexpectedErrorHandler});__webpack_require__.d(__webpack_exports__,"onUnexpectedError",function(){return onUnexpectedError});__webpack_require__.d(__webpack_exports__,"onUnexpectedExternalError",function(){return onUnexpectedExternalError});__webpack_require__.d(__webpack_exports__,"transformErrorForSerialization",function(){return transformErrorForSerialization});__webpack_require__.d(__webpack_exports__,"isPromiseCanceledError",function(){return isPromiseCanceledError});__webpack_require__.d(__webpack_exports__,"canceled",function(){return canceled});__webpack_require__.d(__webpack_exports__,"illegalArgument",function(){return illegalArgument});__webpack_require__.d(__webpack_exports__,"illegalState",function(){return illegalState});__webpack_require__.d(__webpack_exports__,"readonly",function(){return readonly});__webpack_require__.d(__webpack_exports__,"disposed",function(){return disposed});__webpack_require__.d(__webpack_exports__,"isErrorWithActions",function(){return isErrorWithActions});__webpack_require__.d(__webpack_exports__,"create",function(){return create});__webpack_require__.d(__webpack_exports__,"getErrorMessage",function(){return getErrorMessage});var _winjs_base_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7);var outstandingPromiseErrors={};function promiseErrorHandler(e){var details=e.detail;var id=details.id;if(details.parent){if(details.handler&&outstandingPromiseErrors){delete outstandingPromiseErrors[id]}return}outstandingPromiseErrors[id]=details;if(Object.keys(outstandingPromiseErrors).length===1){setTimeout(function(){var errors=outstandingPromiseErrors;outstandingPromiseErrors={};Object.keys(errors).forEach(function(errorId){var error=errors[errorId];if(error.exception){onUnexpectedError(error.exception)}else if(error.error){onUnexpectedError(error.error)}console.log("WARNING: Promise with no error callback:"+error.id);console.log(error);if(error.exception){console.log(error.exception.stack)}})},0)}}_winjs_base_js__WEBPACK_IMPORTED_MODULE_0__["TPromise"].addEventListener("error",promiseErrorHandler);var ErrorHandler=function(){function ErrorHandler(){this.listeners=[];this.unexpectedErrorHandler=function(e){setTimeout(function(){if(e.stack){throw new Error(e.message+"\n\n"+e.stack)}throw e},0)}}ErrorHandler.prototype.addListener=function(listener){var _this=this;this.listeners.push(listener);return function(){_this._removeListener(listener)}};ErrorHandler.prototype.emit=function(e){this.listeners.forEach(function(listener){listener(e)})};ErrorHandler.prototype._removeListener=function(listener){this.listeners.splice(this.listeners.indexOf(listener),1)};ErrorHandler.prototype.setUnexpectedErrorHandler=function(newUnexpectedErrorHandler){this.unexpectedErrorHandler=newUnexpectedErrorHandler};ErrorHandler.prototype.getUnexpectedErrorHandler=function(){return this.unexpectedErrorHandler};ErrorHandler.prototype.onUnexpectedError=function(e){this.unexpectedErrorHandler(e);this.emit(e)};ErrorHandler.prototype.onUnexpectedExternalError=function(e){this.unexpectedErrorHandler(e)};return ErrorHandler}();var errorHandler=new ErrorHandler;function setUnexpectedErrorHandler(newUnexpectedErrorHandler){errorHandler.setUnexpectedErrorHandler(newUnexpectedErrorHandler)}function onUnexpectedError(e){if(!isPromiseCanceledError(e)){errorHandler.onUnexpectedError(e)}return undefined}function onUnexpectedExternalError(e){if(!isPromiseCanceledError(e)){errorHandler.onUnexpectedExternalError(e)}return undefined}function transformErrorForSerialization(error){if(error instanceof Error){var name_1=error.name,message=error.message;var stack=error.stacktrace||error.stack;return{$isError:true,name:name_1,message,stack}}return error}var canceledName="Canceled";function isPromiseCanceledError(error){return error instanceof Error&&error.name===canceledName&&error.message===canceledName}function canceled(){var error=new Error(canceledName);error.name=error.message;return error}function illegalArgument(name){if(name){return new Error("Illegal argument: "+name)}else{return new Error("Illegal argument")}}function illegalState(name){if(name){return new Error("Illegal state: "+name)}else{return new Error("Illegal state")}}function readonly(name){return name?new Error("readonly property '"+name+" cannot be changed'"):new Error("readonly property cannot be changed")}function disposed(what){var result=new Error(what+" has been disposed");result.name="DISPOSED";return result}function isErrorWithActions(obj){return obj instanceof Error&&Array.isArray(obj.actions)}function create(message,options){if(options===void 0){options=Object.create(null)}var result=new Error(message);if(options.actions){result.actions=options.actions}return result}function getErrorMessage(err){if(!err){return"Error"}if(err.message){return err.message}if(err.stack){return err.stack.split("\n")[0]}return String(err)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"LinkedList",function(){return LinkedList});var Node=function(){function Node(element){this.element=element}return Node}();var LinkedList=function(){function LinkedList(){}LinkedList.prototype.isEmpty=function(){return!this._first};LinkedList.prototype.clear=function(){this._first=undefined;this._last=undefined};LinkedList.prototype.unshift=function(element){return this.insert(element,false)};LinkedList.prototype.push=function(element){return this.insert(element,true)};LinkedList.prototype.insert=function(element,atTheEnd){var _this=this;var newNode=new Node(element);if(!this._first){this._first=newNode;this._last=newNode}else if(atTheEnd){var oldLast=this._last;this._last=newNode;newNode.prev=oldLast;oldLast.next=newNode}else{var oldFirst=this._first;this._first=newNode;newNode.next=oldFirst;oldFirst.prev=newNode}return function(){for(var candidate=_this._first;candidate instanceof Node;candidate=candidate.next){if(candidate!==newNode){continue}if(candidate.prev&&candidate.next){var anchor=candidate.prev;anchor.next=candidate.next;candidate.next.prev=anchor}else if(!candidate.prev&&!candidate.next){_this._first=undefined;_this._last=undefined}else if(!candidate.next){_this._last=_this._last.prev;_this._last.next=undefined}else if(!candidate.prev){_this._first=_this._first.next;_this._first.prev=undefined}break}}};LinkedList.prototype.iterator=function(){var element={done:undefined,value:undefined};var node=this._first;return{next:function(){if(!node){element.done=true;element.value=undefined}else{element.done=false;element.value=node.element;node=node.next}return element}}};LinkedList.prototype.toArray=function(){var result=[];for(var node=this._first;node instanceof Node;node=node.next){result.push(node.element)}return result};return LinkedList}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"KeyCodeUtils",function(){return KeyCodeUtils});__webpack_require__.d(__webpack_exports__,"KeyChord",function(){return KeyChord});__webpack_require__.d(__webpack_exports__,"createKeybinding",function(){return createKeybinding});__webpack_require__.d(__webpack_exports__,"createSimpleKeybinding",function(){return createSimpleKeybinding});__webpack_require__.d(__webpack_exports__,"SimpleKeybinding",function(){return SimpleKeybinding});__webpack_require__.d(__webpack_exports__,"ChordKeybinding",function(){return ChordKeybinding});__webpack_require__.d(__webpack_exports__,"ResolvedKeybindingPart",function(){return ResolvedKeybindingPart});__webpack_require__.d(__webpack_exports__,"ResolvedKeybinding",function(){return ResolvedKeybinding});var KeyCodeStrMap=function(){function KeyCodeStrMap(){this._keyCodeToStr=[];this._strToKeyCode=Object.create(null)}KeyCodeStrMap.prototype.define=function(keyCode,str){this._keyCodeToStr[keyCode]=str;this._strToKeyCode[str.toLowerCase()]=keyCode};KeyCodeStrMap.prototype.keyCodeToStr=function(keyCode){return this._keyCodeToStr[keyCode]};KeyCodeStrMap.prototype.strToKeyCode=function(str){return this._strToKeyCode[str.toLowerCase()]||0};return KeyCodeStrMap}();var uiMap=new KeyCodeStrMap;var userSettingsUSMap=new KeyCodeStrMap;var userSettingsGeneralMap=new KeyCodeStrMap;(function(){function define(keyCode,uiLabel,usUserSettingsLabel,generalUserSettingsLabel){if(usUserSettingsLabel===void 0){usUserSettingsLabel=uiLabel}if(generalUserSettingsLabel===void 0){generalUserSettingsLabel=usUserSettingsLabel}uiMap.define(keyCode,uiLabel);userSettingsUSMap.define(keyCode,usUserSettingsLabel);userSettingsGeneralMap.define(keyCode,generalUserSettingsLabel)}define(0,"unknown");define(1,"Backspace");define(2,"Tab");define(3,"Enter");define(4,"Shift");define(5,"Ctrl");define(6,"Alt");define(7,"PauseBreak");define(8,"CapsLock");define(9,"Escape");define(10,"Space");define(11,"PageUp");define(12,"PageDown");define(13,"End");define(14,"Home");define(15,"LeftArrow","Left");define(16,"UpArrow","Up");define(17,"RightArrow","Right");define(18,"DownArrow","Down");define(19,"Insert");define(20,"Delete");define(21,"0");define(22,"1");define(23,"2");define(24,"3");define(25,"4");define(26,"5");define(27,"6");define(28,"7");define(29,"8");define(30,"9");define(31,"A");define(32,"B");define(33,"C");define(34,"D");define(35,"E");define(36,"F");define(37,"G");define(38,"H");define(39,"I");define(40,"J");define(41,"K");define(42,"L");define(43,"M");define(44,"N");define(45,"O");define(46,"P");define(47,"Q");define(48,"R");define(49,"S");define(50,"T");define(51,"U");define(52,"V");define(53,"W");define(54,"X");define(55,"Y");define(56,"Z");define(57,"Meta");define(58,"ContextMenu");define(59,"F1");define(60,"F2");define(61,"F3");define(62,"F4");define(63,"F5");define(64,"F6");define(65,"F7");define(66,"F8");define(67,"F9");define(68,"F10");define(69,"F11");define(70,"F12");define(71,"F13");define(72,"F14");define(73,"F15");define(74,"F16");define(75,"F17");define(76,"F18");define(77,"F19");define(78,"NumLock");define(79,"ScrollLock");define(80,";",";","OEM_1");define(81,"=","=","OEM_PLUS");define(82,",",",","OEM_COMMA");define(83,"-","-","OEM_MINUS");define(84,".",".","OEM_PERIOD");define(85,"/","/","OEM_2");define(86,"`","`","OEM_3");define(110,"ABNT_C1");define(111,"ABNT_C2");define(87,"[","[","OEM_4");define(88,"\\","\\","OEM_5");define(89,"]","]","OEM_6");define(90,"'","'","OEM_7");define(91,"OEM_8");define(92,"OEM_102");define(93,"NumPad0");define(94,"NumPad1");define(95,"NumPad2");define(96,"NumPad3");define(97,"NumPad4");define(98,"NumPad5");define(99,"NumPad6");define(100,"NumPad7");define(101,"NumPad8");define(102,"NumPad9");define(103,"NumPad_Multiply");define(104,"NumPad_Add");define(105,"NumPad_Separator");define(106,"NumPad_Subtract");define(107,"NumPad_Decimal");define(108,"NumPad_Divide")})();var KeyCodeUtils;(function(KeyCodeUtils){function toString(keyCode){return uiMap.keyCodeToStr(keyCode)}KeyCodeUtils.toString=toString;function fromString(key){return uiMap.strToKeyCode(key)}KeyCodeUtils.fromString=fromString;function toUserSettingsUS(keyCode){return userSettingsUSMap.keyCodeToStr(keyCode)}KeyCodeUtils.toUserSettingsUS=toUserSettingsUS;function toUserSettingsGeneral(keyCode){return userSettingsGeneralMap.keyCodeToStr(keyCode)}KeyCodeUtils.toUserSettingsGeneral=toUserSettingsGeneral;function fromUserSettings(key){return userSettingsUSMap.strToKeyCode(key)||userSettingsGeneralMap.strToKeyCode(key)}KeyCodeUtils.fromUserSettings=fromUserSettings})(KeyCodeUtils||(KeyCodeUtils={}));function KeyChord(firstPart,secondPart){var chordPart=(secondPart&65535)<<16>>>0;return(firstPart|chordPart)>>>0}function createKeybinding(keybinding,OS){if(keybinding===0){return null}var firstPart=(keybinding&65535)>>>0;var chordPart=(keybinding&4294901760)>>>16;if(chordPart!==0){return new ChordKeybinding(createSimpleKeybinding(firstPart,OS),createSimpleKeybinding(chordPart,OS))}return createSimpleKeybinding(firstPart,OS)}function createSimpleKeybinding(keybinding,OS){var ctrlCmd=keybinding&2048?true:false;var winCtrl=keybinding&256?true:false;var ctrlKey=OS===2?winCtrl:ctrlCmd;var shiftKey=keybinding&1024?true:false;var altKey=keybinding&512?true:false;var metaKey=OS===2?ctrlCmd:winCtrl;var keyCode=keybinding&255;return new SimpleKeybinding(ctrlKey,shiftKey,altKey,metaKey,keyCode)}var SimpleKeybinding=function(){function SimpleKeybinding(ctrlKey,shiftKey,altKey,metaKey,keyCode){this.type=1;this.ctrlKey=ctrlKey;this.shiftKey=shiftKey;this.altKey=altKey;this.metaKey=metaKey;this.keyCode=keyCode}SimpleKeybinding.prototype.equals=function(other){if(other.type!==1){return false}return this.ctrlKey===other.ctrlKey&&this.shiftKey===other.shiftKey&&this.altKey===other.altKey&&this.metaKey===other.metaKey&&this.keyCode===other.keyCode};SimpleKeybinding.prototype.getHashCode=function(){var ctrl=this.ctrlKey?"1":"0";var shift=this.shiftKey?"1":"0";var alt=this.altKey?"1":"0";var meta=this.metaKey?"1":"0";return""+ctrl+shift+alt+meta+this.keyCode};SimpleKeybinding.prototype.isModifierKey=function(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4};SimpleKeybinding.prototype.isDuplicateModifierCase=function(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57};return SimpleKeybinding}();var ChordKeybinding=function(){function ChordKeybinding(firstPart,chordPart){this.type=2;this.firstPart=firstPart;this.chordPart=chordPart}ChordKeybinding.prototype.getHashCode=function(){return this.firstPart.getHashCode()+";"+this.chordPart.getHashCode()};return ChordKeybinding}();var ResolvedKeybindingPart=function(){function ResolvedKeybindingPart(ctrlKey,shiftKey,altKey,metaKey,kbLabel,kbAriaLabel){this.ctrlKey=ctrlKey;this.shiftKey=shiftKey;this.altKey=altKey;this.metaKey=metaKey;this.keyLabel=kbLabel;this.keyAriaLabel=kbAriaLabel}return ResolvedKeybindingPart}();var ResolvedKeybinding=function(){function ResolvedKeybinding(){}return ResolvedKeybinding}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"SelectionDirection",function(){return SelectionDirection});__webpack_require__.d(__webpack_exports__,"Selection",function(){return Selection});var _range_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8);var _position_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9);var __extends=undefined&&undefined.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var SelectionDirection;(function(SelectionDirection){SelectionDirection[SelectionDirection["LTR"]=0]="LTR";SelectionDirection[SelectionDirection["RTL"]=1]="RTL"})(SelectionDirection||(SelectionDirection={}));var Selection=function(_super){__extends(Selection,_super);function Selection(selectionStartLineNumber,selectionStartColumn,positionLineNumber,positionColumn){var _this=_super.call(this,selectionStartLineNumber,selectionStartColumn,positionLineNumber,positionColumn)||this;_this.selectionStartLineNumber=selectionStartLineNumber;_this.selectionStartColumn=selectionStartColumn;_this.positionLineNumber=positionLineNumber;_this.positionColumn=positionColumn;return _this}Selection.prototype.clone=function(){return new Selection(this.selectionStartLineNumber,this.selectionStartColumn,this.positionLineNumber,this.positionColumn)};Selection.prototype.toString=function(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"};Selection.prototype.equalsSelection=function(other){return Selection.selectionsEqual(this,other)};Selection.selectionsEqual=function(a,b){return a.selectionStartLineNumber===b.selectionStartLineNumber&&a.selectionStartColumn===b.selectionStartColumn&&a.positionLineNumber===b.positionLineNumber&&a.positionColumn===b.positionColumn};Selection.prototype.getDirection=function(){if(this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn){return SelectionDirection.LTR}return SelectionDirection.RTL};Selection.prototype.setEndPosition=function(endLineNumber,endColumn){if(this.getDirection()===SelectionDirection.LTR){return new Selection(this.startLineNumber,this.startColumn,endLineNumber,endColumn)}return new Selection(endLineNumber,endColumn,this.startLineNumber,this.startColumn)};Selection.prototype.getPosition=function(){return new _position_js__WEBPACK_IMPORTED_MODULE_1__["Position"](this.positionLineNumber,this.positionColumn)};Selection.prototype.setStartPosition=function(startLineNumber,startColumn){if(this.getDirection()===SelectionDirection.LTR){return new Selection(startLineNumber,startColumn,this.endLineNumber,this.endColumn)}return new Selection(this.endLineNumber,this.endColumn,startLineNumber,startColumn)};Selection.fromPositions=function(start,end){if(end===void 0){end=start}return new Selection(start.lineNumber,start.column,end.lineNumber,end.column)};Selection.liftSelection=function(sel){return new Selection(sel.selectionStartLineNumber,sel.selectionStartColumn,sel.positionLineNumber,sel.positionColumn)};Selection.selectionsArrEqual=function(a,b){if(a&&!b||!a&&b){return false}if(!a&&!b){return true}if(a.length!==b.length){return false}for(var i=0,len=a.length;i<len;i++){if(!this.selectionsEqual(a[i],b[i])){return false}}return true};Selection.isISelection=function(obj){return obj&&typeof obj.selectionStartLineNumber==="number"&&typeof obj.selectionStartColumn==="number"&&typeof obj.positionLineNumber==="number"&&typeof obj.positionColumn==="number"};Selection.createWithDirection=function(startLineNumber,startColumn,endLineNumber,endColumn,direction){if(direction===SelectionDirection.LTR){return new Selection(startLineNumber,startColumn,endLineNumber,endColumn)}return new Selection(endLineNumber,endColumn,startLineNumber,startColumn)};return Selection}(_range_js__WEBPACK_IMPORTED_MODULE_0__["Range"])},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"CancellationToken",function(){return CancellationToken});__webpack_require__.d(__webpack_exports__,"CancellationTokenSource",function(){return CancellationTokenSource});var _event_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(23);var shortcutEvent=Object.freeze(function(callback,context){var handle=setTimeout(callback.bind(context),0);return{dispose:function(){clearTimeout(handle)}}});var CancellationToken;(function(CancellationToken){CancellationToken.None=Object.freeze({isCancellationRequested:false,onCancellationRequested:_event_js__WEBPACK_IMPORTED_MODULE_0__["Event"].None});CancellationToken.Cancelled=Object.freeze({isCancellationRequested:true,onCancellationRequested:shortcutEvent})})(CancellationToken||(CancellationToken={}));var MutableToken=function(){function MutableToken(){this._isCancelled=false}MutableToken.prototype.cancel=function(){if(!this._isCancelled){this._isCancelled=true;if(this._emitter){this._emitter.fire(undefined);this.dispose()}}};Object.defineProperty(MutableToken.prototype,"isCancellationRequested",{get:function(){return this._isCancelled},enumerable:true,configurable:true});Object.defineProperty(MutableToken.prototype,"onCancellationRequested",{get:function(){if(this._isCancelled){return shortcutEvent}if(!this._emitter){this._emitter=new _event_js__WEBPACK_IMPORTED_MODULE_0__["Emitter"]}return this._emitter.event},enumerable:true,configurable:true});MutableToken.prototype.dispose=function(){if(this._emitter){this._emitter.dispose();this._emitter=undefined}};return MutableToken}();var CancellationTokenSource=function(){function CancellationTokenSource(){}Object.defineProperty(CancellationTokenSource.prototype,"token",{get:function(){if(!this._token){this._token=new MutableToken}return this._token},enumerable:true,configurable:true});CancellationTokenSource.prototype.cancel=function(){if(!this._token){this._token=CancellationToken.Cancelled}else if(this._token instanceof MutableToken){this._token.cancel()}};CancellationTokenSource.prototype.dispose=function(){if(!this._token){this._token=CancellationToken.None}else if(this._token instanceof MutableToken){this._token.dispose()}};return CancellationTokenSource}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"Token",function(){return Token});__webpack_require__.d(__webpack_exports__,"TokenizationResult",function(){return TokenizationResult});__webpack_require__.d(__webpack_exports__,"TokenizationResult2",function(){return TokenizationResult2});var Token=function(){function Token(offset,type,language){this.offset=offset|0;this.type=type;this.language=language}Token.prototype.toString=function(){return"("+this.offset+", "+this.type+")"};return Token}();var TokenizationResult=function(){function TokenizationResult(tokens,endState){this.tokens=tokens;this.endState=endState}return TokenizationResult}();var TokenizationResult2=function(){function TokenizationResult2(tokens,endState){this.tokens=tokens;this.endState=endState}return TokenizationResult2}()},function(module,exports){function webpackEmptyContext(req){var e=new Error('Cannot find module "'+req+'".');e.code="MODULE_NOT_FOUND";throw e}webpackEmptyContext.keys=function(){return[]};webpackEmptyContext.resolve=webpackEmptyContext;module.exports=webpackEmptyContext;webpackEmptyContext.id=32},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"logOnceWebWorkerWarning",function(){return logOnceWebWorkerWarning});__webpack_require__.d(__webpack_exports__,"SimpleWorkerClient",function(){return SimpleWorkerClient});__webpack_require__.d(__webpack_exports__,"SimpleWorkerServer",function(){return SimpleWorkerServer});__webpack_require__.d(__webpack_exports__,"create",function(){return create});var _errors_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(26);var _lifecycle_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(24);var _winjs_base_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7);var _async_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(34);var _platform_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(4);var __extends=undefined&&undefined.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var INITIALIZE="$initialize";var webWorkerWarningLogged=false;function logOnceWebWorkerWarning(err){if(!_platform_js__WEBPACK_IMPORTED_MODULE_4__["isWeb"]){return}if(!webWorkerWarningLogged){webWorkerWarningLogged=true;console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/Microsoft/monaco-editor#faq")}console.warn(err.message)}var SimpleWorkerProtocol=function(){function SimpleWorkerProtocol(handler){this._workerId=-1;this._handler=handler;this._lastSentReq=0;this._pendingReplies=Object.create(null)}SimpleWorkerProtocol.prototype.setWorkerId=function(workerId){this._workerId=workerId};SimpleWorkerProtocol.prototype.sendMessage=function(method,args){var req=String(++this._lastSentReq);var reply={c:null,e:null};var result=new _winjs_base_js__WEBPACK_IMPORTED_MODULE_2__["TPromise"](function(c,e,p){reply.c=c;reply.e=e},function(){});this._pendingReplies[req]=reply;this._send({vsWorker:this._workerId,req,method,args});return result};SimpleWorkerProtocol.prototype.handleMessage=function(serializedMessage){var message;try{message=JSON.parse(serializedMessage)}catch(e){}if(!message||!message.vsWorker){return}if(this._workerId!==-1&&message.vsWorker!==this._workerId){return}this._handleMessage(message)};SimpleWorkerProtocol.prototype._handleMessage=function(msg){var _this=this;if(msg.seq){var replyMessage=msg;if(!this._pendingReplies[replyMessage.seq]){console.warn("Got reply to unknown seq");return}var reply=this._pendingReplies[replyMessage.seq];delete this._pendingReplies[replyMessage.seq];if(replyMessage.err){var err=replyMessage.err;if(replyMessage.err.$isError){err=new Error;err.name=replyMessage.err.name;err.message=replyMessage.err.message;err.stack=replyMessage.err.stack}reply.e(err);return}reply.c(replyMessage.res);return}var requestMessage=msg;var req=requestMessage.req;var result=this._handler.handleMessage(requestMessage.method,requestMessage.args);result.then(function(r){_this._send({vsWorker:_this._workerId,seq:req,res:r,err:undefined})},function(e){if(e.detail instanceof Error){e.detail=Object(_errors_js__WEBPACK_IMPORTED_MODULE_0__["transformErrorForSerialization"])(e.detail)}_this._send({vsWorker:_this._workerId,seq:req,res:undefined,err:Object(_errors_js__WEBPACK_IMPORTED_MODULE_0__["transformErrorForSerialization"])(e)})})};SimpleWorkerProtocol.prototype._send=function(msg){var strMsg=JSON.stringify(msg);this._handler.sendMessage(strMsg)};return SimpleWorkerProtocol}();var SimpleWorkerClient=function(_super){__extends(SimpleWorkerClient,_super);function SimpleWorkerClient(workerFactory,moduleId){var _this=_super.call(this)||this;var lazyProxyFulfill=null;var lazyProxyReject=null;_this._worker=_this._register(workerFactory.create("vs/base/common/worker/simpleWorker",function(msg){_this._protocol.handleMessage(msg)},function(err){lazyProxyReject(err)}));_this._protocol=new SimpleWorkerProtocol({sendMessage:function(msg){_this._worker.postMessage(msg)},handleMessage:function(method,args){return _winjs_base_js__WEBPACK_IMPORTED_MODULE_2__["TPromise"].as(null)}});_this._protocol.setWorkerId(_this._worker.getId());var loaderConfiguration=null;if(typeof self.require!=="undefined"&&typeof self.require.getConfig==="function"){loaderConfiguration=self.require.getConfig()}else if(typeof self.requirejs!=="undefined"){loaderConfiguration=self.requirejs.s.contexts._.config}_this._lazyProxy=new _winjs_base_js__WEBPACK_IMPORTED_MODULE_2__["TPromise"](function(c,e,p){lazyProxyFulfill=c;lazyProxyReject=e},function(){});_this._onModuleLoaded=_this._protocol.sendMessage(INITIALIZE,[_this._worker.getId(),moduleId,loaderConfiguration]);_this._onModuleLoaded.then(function(availableMethods){var proxy={};for(var i=0;i<availableMethods.length;i++){proxy[availableMethods[i]]=createProxyMethod(availableMethods[i],proxyMethodRequest)}lazyProxyFulfill(proxy)},function(e){lazyProxyReject(e);_this._onError("Worker failed to load "+moduleId,e)});var proxyMethodRequest=function(method,args){return _this._request(method,args)};var createProxyMethod=function(method,proxyMethodRequest){return function(){var args=Array.prototype.slice.call(arguments,0);return proxyMethodRequest(method,args)}};return _this}SimpleWorkerClient.prototype.getProxyObject=function(){return new _async_js__WEBPACK_IMPORTED_MODULE_3__["ShallowCancelThenPromise"](this._lazyProxy)};SimpleWorkerClient.prototype._request=function(method,args){var _this=this;return new _winjs_base_js__WEBPACK_IMPORTED_MODULE_2__["TPromise"](function(c,e,p){_this._onModuleLoaded.then(function(){_this._protocol.sendMessage(method,args).then(c,e)},e)},function(){})};SimpleWorkerClient.prototype._onError=function(message,error){console.error(message);console.info(error)};return SimpleWorkerClient}(_lifecycle_js__WEBPACK_IMPORTED_MODULE_1__["Disposable"]);var SimpleWorkerServer=function(){function SimpleWorkerServer(postSerializedMessage,requestHandler){var _this=this;this._requestHandler=requestHandler;this._protocol=new SimpleWorkerProtocol({sendMessage:function(msg){postSerializedMessage(msg)},handleMessage:function(method,args){return _this._handleMessage(method,args)}})}SimpleWorkerServer.prototype.onmessage=function(msg){this._protocol.handleMessage(msg)};SimpleWorkerServer.prototype._handleMessage=function(method,args){if(method===INITIALIZE){return this.initialize(args[0],args[1],args[2])}if(!this._requestHandler||typeof this._requestHandler[method]!=="function"){return _winjs_base_js__WEBPACK_IMPORTED_MODULE_2__["TPromise"].wrapError(new Error("Missing requestHandler or method: "+method))}try{return _winjs_base_js__WEBPACK_IMPORTED_MODULE_2__["TPromise"].as(this._requestHandler[method].apply(this._requestHandler,args))}catch(e){return _winjs_base_js__WEBPACK_IMPORTED_MODULE_2__["TPromise"].wrapError(e)}};SimpleWorkerServer.prototype.initialize=function(workerId,moduleId,loaderConfig){var _this=this;this._protocol.setWorkerId(workerId);if(this._requestHandler){var methods=[];for(var prop in this._requestHandler){if(typeof this._requestHandler[prop]==="function"){methods.push(prop)}}return _winjs_base_js__WEBPACK_IMPORTED_MODULE_2__["TPromise"].as(methods)}if(loaderConfig){if(typeof loaderConfig.baseUrl!=="undefined"){delete loaderConfig["baseUrl"]}if(typeof loaderConfig.paths!=="undefined"){if(typeof loaderConfig.paths.vs!=="undefined"){delete loaderConfig.paths["vs"]}}loaderConfig.catchError=true;self.require.config(loaderConfig)}var cc;var ee;var r=new _winjs_base_js__WEBPACK_IMPORTED_MODULE_2__["TPromise"](function(c,e,p){cc=c;ee=e});self.require([moduleId],function(){var result=[];for(var _i=0;_i<arguments.length;_i++){result[_i]=arguments[_i]}var handlerModule=result[0];_this._requestHandler=handlerModule.create();var methods=[];for(var prop in _this._requestHandler){if(typeof _this._requestHandler[prop]==="function"){methods.push(prop)}}cc(methods)},ee);return r};return SimpleWorkerServer}();function create(postMessage){return new SimpleWorkerServer(postMessage,null)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"isPromiseLike",function(){return isPromiseLike});__webpack_require__.d(__webpack_exports__,"toPromiseLike",function(){return toPromiseLike});__webpack_require__.d(__webpack_exports__,"asWinJsPromise",function(){return asWinJsPromise});__webpack_require__.d(__webpack_exports__,"wireCancellationToken",function(){return wireCancellationToken});__webpack_require__.d(__webpack_exports__,"Throttler",function(){return Throttler});__webpack_require__.d(__webpack_exports__,"SimpleThrottler",function(){return SimpleThrottler});__webpack_require__.d(__webpack_exports__,"Delayer",function(){return Delayer});__webpack_require__.d(__webpack_exports__,"ThrottledDelayer",function(){return ThrottledDelayer});__webpack_require__.d(__webpack_exports__,"Barrier",function(){return Barrier});__webpack_require__.d(__webpack_exports__,"ShallowCancelThenPromise",function(){return ShallowCancelThenPromise});__webpack_require__.d(__webpack_exports__,"timeout",function(){return timeout});__webpack_require__.d(__webpack_exports__,"always",function(){return always});__webpack_require__.d(__webpack_exports__,"sequence",function(){return sequence});__webpack_require__.d(__webpack_exports__,"first",function(){return first});__webpack_require__.d(__webpack_exports__,"Limiter",function(){return Limiter});__webpack_require__.d(__webpack_exports__,"Queue",function(){return Queue});__webpack_require__.d(__webpack_exports__,"ResourceQueue",function(){return ResourceQueue});__webpack_require__.d(__webpack_exports__,"setDisposableTimeout",function(){return setDisposableTimeout});__webpack_require__.d(__webpack_exports__,"TimeoutTimer",function(){return TimeoutTimer});__webpack_require__.d(__webpack_exports__,"IntervalTimer",function(){return IntervalTimer});__webpack_require__.d(__webpack_exports__,"RunOnceScheduler",function(){return RunOnceScheduler});__webpack_require__.d(__webpack_exports__,"nfcall",function(){return nfcall});__webpack_require__.d(__webpack_exports__,"ninvoke",function(){return ninvoke});__webpack_require__.d(__webpack_exports__,"ThrottledEmitter",function(){return ThrottledEmitter});var _errors_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(26);var _winjs_base_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7);var _cancellation_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(30);var _lifecycle_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(24);var _event_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(23);var __extends=undefined&&undefined.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();function isPromiseLike(obj){return obj&&typeof obj.then==="function"}function toPromiseLike(arg){if(isPromiseLike(arg)){return arg}else{return _winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"].as(arg)}}function asWinJsPromise(callback){var source=new _cancellation_js__WEBPACK_IMPORTED_MODULE_2__["CancellationTokenSource"];return new _winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"](function(resolve,reject,progress){var item=callback(source.token);if(item instanceof _winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"]){always(item,function(){return source.dispose()});item.then(resolve,reject,progress)}else if(isPromiseLike(item)){always(item,function(){return source.dispose()});item.then(resolve,reject)}else{source.dispose();resolve(item)}},function(){source.cancel()})}function wireCancellationToken(token,promise,resolveAsUndefinedWhenCancelled){var subscription=token.onCancellationRequested(function(){return promise.cancel()});if(resolveAsUndefinedWhenCancelled){promise=promise.then(undefined,function(err){if(!_errors_js__WEBPACK_IMPORTED_MODULE_0__["isPromiseCanceledError"](err)){return _winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"].wrapError(err)}return undefined})}return always(promise,function(){return subscription.dispose()})}var Throttler=function(){function Throttler(){this.activePromise=null;this.queuedPromise=null;this.queuedPromiseFactory=null}Throttler.prototype.queue=function(promiseFactory){var _this=this;if(this.activePromise){this.queuedPromiseFactory=promiseFactory;if(!this.queuedPromise){var onComplete_1=function(){_this.queuedPromise=null;var result=_this.queue(_this.queuedPromiseFactory);_this.queuedPromiseFactory=null;return result};this.queuedPromise=new _winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"](function(c,e,p){_this.activePromise.then(onComplete_1,onComplete_1,p).done(c)},function(){_this.activePromise.cancel()})}return new _winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"](function(c,e,p){_this.queuedPromise.then(c,e,p)},function(){})}this.activePromise=promiseFactory();return new _winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"](function(c,e,p){_this.activePromise.done(function(result){_this.activePromise=null;c(result)},function(err){_this.activePromise=null;e(err)},p)},function(){_this.activePromise.cancel()})};return Throttler}();var SimpleThrottler=function(){function SimpleThrottler(){this.current=_winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"].wrap(null)}SimpleThrottler.prototype.queue=function(promiseTask){return this.current=this.current.then(function(){return promiseTask()})};return SimpleThrottler}();var Delayer=function(){function Delayer(defaultDelay){this.defaultDelay=defaultDelay;this.timeout=null;this.completionPromise=null;this.onSuccess=null;this.task=null}Delayer.prototype.trigger=function(task,delay){var _this=this;if(delay===void 0){delay=this.defaultDelay}this.task=task;this.cancelTimeout();if(!this.completionPromise){this.completionPromise=new _winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"](function(c){_this.onSuccess=c},function(){}).then(function(){_this.completionPromise=null;_this.onSuccess=null;var task=_this.task;_this.task=null;return task()})}this.timeout=setTimeout(function(){_this.timeout=null;_this.onSuccess(null)},delay);return this.completionPromise};Delayer.prototype.isTriggered=function(){return this.timeout!==null};Delayer.prototype.cancel=function(){this.cancelTimeout();if(this.completionPromise){this.completionPromise.cancel();this.completionPromise=null}};Delayer.prototype.cancelTimeout=function(){if(this.timeout!==null){clearTimeout(this.timeout);this.timeout=null}};return Delayer}();var ThrottledDelayer=function(_super){__extends(ThrottledDelayer,_super);function ThrottledDelayer(defaultDelay){var _this=_super.call(this,defaultDelay)||this;_this.throttler=new Throttler;return _this}ThrottledDelayer.prototype.trigger=function(promiseFactory,delay){var _this=this;return _super.prototype.trigger.call(this,function(){return _this.throttler.queue(promiseFactory)},delay)};return ThrottledDelayer}(Delayer);var Barrier=function(){function Barrier(){var _this=this;this._isOpen=false;this._promise=new _winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"](function(c,e,p){_this._completePromise=c},function(){console.warn("You should really not try to cancel this ready promise!")})}Barrier.prototype.isOpen=function(){return this._isOpen};Barrier.prototype.open=function(){this._isOpen=true;this._completePromise(true)};Barrier.prototype.wait=function(){return this._promise};return Barrier}();var ShallowCancelThenPromise=function(_super){__extends(ShallowCancelThenPromise,_super);function ShallowCancelThenPromise(outer){var _this=this;var completeCallback,errorCallback,progressCallback;_this=_super.call(this,function(c,e,p){completeCallback=c;errorCallback=e;progressCallback=p},function(){errorCallback(_errors_js__WEBPACK_IMPORTED_MODULE_0__["canceled"]())})||this;outer.then(completeCallback,errorCallback,progressCallback);return _this}return ShallowCancelThenPromise}(_winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"]);function timeout(n){return new _winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["Promise"](function(resolve){return setTimeout(resolve,n)})}function isWinJSPromise(candidate){return _winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"].is(candidate)&&typeof candidate.done==="function"}function always(winjsPromiseOrPromiseLike,f){if(isWinJSPromise(winjsPromiseOrPromiseLike)){return new _winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"](function(c,e,p){winjsPromiseOrPromiseLike.done(function(result){try{f(result)}catch(e1){_errors_js__WEBPACK_IMPORTED_MODULE_0__["onUnexpectedError"](e1)}c(result)},function(err){try{f(err)}catch(e1){_errors_js__WEBPACK_IMPORTED_MODULE_0__["onUnexpectedError"](e1)}e(err)},function(progress){p(progress)})},function(){winjsPromiseOrPromiseLike.cancel()})}else{winjsPromiseOrPromiseLike.then(function(_){return f()},function(_){return f()});return winjsPromiseOrPromiseLike}}function sequence(promiseFactories){var results=[];promiseFactories=promiseFactories.reverse();function next(){if(promiseFactories.length){return promiseFactories.pop()()}return null}function thenHandler(result){if(result!==undefined&&result!==null){results.push(result)}var n=next();if(n){return n.then(thenHandler)}return _winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"].as(results)}return _winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"].as(null).then(thenHandler)}function first(promiseFactories,shouldStop){if(shouldStop===void 0){shouldStop=function(t){return!!t}}promiseFactories=promiseFactories.reverse().slice();var loop=function(){if(promiseFactories.length===0){return _winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"].as(null)}var factory=promiseFactories.pop();var promise=factory();return promise.then(function(result){if(shouldStop(result)){return _winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"].as(result)}return loop()})};return loop()}var Limiter=function(){function Limiter(maxDegreeOfParalellism){this.maxDegreeOfParalellism=maxDegreeOfParalellism;this.outstandingPromises=[];this.runningPromises=0;this._onFinished=new _event_js__WEBPACK_IMPORTED_MODULE_4__["Emitter"]}Object.defineProperty(Limiter.prototype,"onFinished",{get:function(){return this._onFinished.event},enumerable:true,configurable:true});Object.defineProperty(Limiter.prototype,"size",{get:function(){return this.runningPromises+this.outstandingPromises.length},enumerable:true,configurable:true});Limiter.prototype.queue=function(promiseFactory){var _this=this;return new _winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"](function(c,e,p){_this.outstandingPromises.push({factory:promiseFactory,c,e,p});_this.consume()})};Limiter.prototype.consume=function(){var _this=this;while(this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism){var iLimitedTask=this.outstandingPromises.shift();this.runningPromises++;var promise=iLimitedTask.factory();promise.done(iLimitedTask.c,iLimitedTask.e,iLimitedTask.p);promise.done(function(){return _this.consumed()},function(){return _this.consumed()})}};Limiter.prototype.consumed=function(){this.runningPromises--;if(this.outstandingPromises.length>0){this.consume()}else{this._onFinished.fire()}};Limiter.prototype.dispose=function(){this._onFinished.dispose()};return Limiter}();var Queue=function(_super){__extends(Queue,_super);function Queue(){return _super.call(this,1)||this}return Queue}(Limiter);var ResourceQueue=function(){function ResourceQueue(){this.queues=Object.create(null)}ResourceQueue.prototype.queueFor=function(resource){var _this=this;var key=resource.toString();if(!this.queues[key]){var queue_1=new Queue;queue_1.onFinished(function(){queue_1.dispose();delete _this.queues[key]});this.queues[key]=queue_1}return this.queues[key]};return ResourceQueue}();function setDisposableTimeout(handler,timeout){var args=[];for(var _i=2;_i<arguments.length;_i++){args[_i-2]=arguments[_i]}var handle=setTimeout.apply(void 0,[handler,timeout].concat(args));return{dispose:function(){clearTimeout(handle)}}}var TimeoutTimer=function(_super){__extends(TimeoutTimer,_super);function TimeoutTimer(){var _this=_super.call(this)||this;_this._token=-1;return _this}TimeoutTimer.prototype.dispose=function(){this.cancel();_super.prototype.dispose.call(this)};TimeoutTimer.prototype.cancel=function(){if(this._token!==-1){clearTimeout(this._token);this._token=-1}};TimeoutTimer.prototype.cancelAndSet=function(runner,timeout){var _this=this;this.cancel();this._token=setTimeout(function(){_this._token=-1;runner()},timeout)};TimeoutTimer.prototype.setIfNotSet=function(runner,timeout){var _this=this;if(this._token!==-1){return}this._token=setTimeout(function(){_this._token=-1;runner()},timeout)};return TimeoutTimer}(_lifecycle_js__WEBPACK_IMPORTED_MODULE_3__["Disposable"]);var IntervalTimer=function(_super){__extends(IntervalTimer,_super);function IntervalTimer(){var _this=_super.call(this)||this;_this._token=-1;return _this}IntervalTimer.prototype.dispose=function(){this.cancel();_super.prototype.dispose.call(this)};IntervalTimer.prototype.cancel=function(){if(this._token!==-1){clearInterval(this._token);this._token=-1}};IntervalTimer.prototype.cancelAndSet=function(runner,interval){this.cancel();this._token=setInterval(function(){runner()},interval)};return IntervalTimer}(_lifecycle_js__WEBPACK_IMPORTED_MODULE_3__["Disposable"]);var RunOnceScheduler=function(){function RunOnceScheduler(runner,timeout){this.timeoutToken=-1;this.runner=runner;this.timeout=timeout;this.timeoutHandler=this.onTimeout.bind(this)}RunOnceScheduler.prototype.dispose=function(){this.cancel();this.runner=null};RunOnceScheduler.prototype.cancel=function(){if(this.isScheduled()){clearTimeout(this.timeoutToken);this.timeoutToken=-1}};RunOnceScheduler.prototype.schedule=function(delay){if(delay===void 0){delay=this.timeout}this.cancel();this.timeoutToken=setTimeout(this.timeoutHandler,delay)};RunOnceScheduler.prototype.isScheduled=function(){return this.timeoutToken!==-1};RunOnceScheduler.prototype.onTimeout=function(){this.timeoutToken=-1;if(this.runner){this.runner()}};return RunOnceScheduler}();function nfcall(fn){var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i]}return new _winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"](function(c,e){return fn.apply(void 0,args.concat([function(err,result){return err?e(err):c(result)}]))},function(){return null})}function ninvoke(thisArg,fn){var args=[];for(var _i=2;_i<arguments.length;_i++){args[_i-2]=arguments[_i]}return new _winjs_base_js__WEBPACK_IMPORTED_MODULE_1__["TPromise"](function(c,e){return fn.call.apply(fn,[thisArg].concat(args,[function(err,result){return err?e(err):c(result)}]))},function(){return null})}var ThrottledEmitter=function(_super){__extends(ThrottledEmitter,_super);function ThrottledEmitter(){return _super!==null&&_super.apply(this,arguments)||this}ThrottledEmitter.prototype.throttle=function(promise){var _this=this;this.suspended=true;return always(promise,function(){return _this.resume()})};ThrottledEmitter.prototype.fire=function(event){if(this.suspended){this.lastEvent=event;this.hasLastEvent=true;return}return _super.prototype.fire.call(this,event)};ThrottledEmitter.prototype.resume=function(){this.suspended=false;if(this.hasLastEvent){this.fire(this.lastEvent)}this.hasLastEvent=false;this.lastEvent=void 0};return ThrottledEmitter}(_event_js__WEBPACK_IMPORTED_MODULE_4__["Emitter"])},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"JSONWorker",function(){return JSONWorker});__webpack_require__.d(__webpack_exports__,"create",function(){return create});var _deps_vscode_json_languageservice_jsonLanguageService_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(36);var _deps_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(37);var Promise=monaco.Promise;var PromiseAdapter=function(){function PromiseAdapter(executor){this.wrapped=new monaco.Promise(executor)}PromiseAdapter.prototype.then=function(onfulfilled,onrejected){var thenable=this.wrapped;return thenable.then(onfulfilled,onrejected)};PromiseAdapter.prototype.getWrapped=function(){return this.wrapped};PromiseAdapter.prototype.cancel=function(){this.wrapped.cancel()};PromiseAdapter.resolve=function(v){return monaco.Promise.as(v)};PromiseAdapter.reject=function(v){return monaco.Promise.wrapError(v)};PromiseAdapter.all=function(values){return monaco.Promise.join(values)};return PromiseAdapter}();var JSONWorker=function(){function JSONWorker(ctx,createData){this._ctx=ctx;this._languageSettings=createData.languageSettings;this._languageId=createData.languageId;this._languageService=_deps_vscode_json_languageservice_jsonLanguageService_js__WEBPACK_IMPORTED_MODULE_0__["getLanguageService"]({promiseConstructor:PromiseAdapter});this._languageService.configure(this._languageSettings)}JSONWorker.prototype.doValidation=function(uri){var document=this._getTextDocument(uri);if(document){var jsonDocument=this._languageService.parseJSONDocument(document);return this._languageService.doValidation(document,jsonDocument)}return Promise.as([])};JSONWorker.prototype.doComplete=function(uri,position){var document=this._getTextDocument(uri);var jsonDocument=this._languageService.parseJSONDocument(document);return this._languageService.doComplete(document,position,jsonDocument)};JSONWorker.prototype.doResolve=function(item){return this._languageService.doResolve(item)};JSONWorker.prototype.doHover=function(uri,position){var document=this._getTextDocument(uri);var jsonDocument=this._languageService.parseJSONDocument(document);return this._languageService.doHover(document,position,jsonDocument)};JSONWorker.prototype.format=function(uri,range,options){var document=this._getTextDocument(uri);var textEdits=this._languageService.format(document,range,options);return Promise.as(textEdits)};JSONWorker.prototype.resetSchema=function(uri){return Promise.as(this._languageService.resetSchema(uri))};JSONWorker.prototype.findDocumentSymbols=function(uri){var document=this._getTextDocument(uri);var jsonDocument=this._languageService.parseJSONDocument(document);var symbols=this._languageService.findDocumentSymbols(document,jsonDocument);return Promise.as(symbols)};JSONWorker.prototype._getTextDocument=function(uri){var models=this._ctx.getMirrorModels();for(var _i=0,models_1=models;_i<models_1.length;_i++){var model=models_1[_i];if(model.uri.toString()===uri){return _deps_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_1__["TextDocument"].create(uri,this._languageId,model.version,model.getValue())}}return null};return JSONWorker}();function create(ctx,createData){return new JSONWorker(ctx,createData)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"getLanguageService",function(){return getLanguageService});var _vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(37);__webpack_require__.d(__webpack_exports__,"TextDocument",function(){return _vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_0__["TextDocument"]});__webpack_require__.d(__webpack_exports__,"Position",function(){return _vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_0__["Position"]});__webpack_require__.d(__webpack_exports__,"CompletionItem",function(){return _vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_0__["CompletionItem"]});__webpack_require__.d(__webpack_exports__,"CompletionList",function(){return _vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_0__["CompletionList"]});__webpack_require__.d(__webpack_exports__,"Range",function(){return _vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_0__["Range"]});__webpack_require__.d(__webpack_exports__,"SymbolInformation",function(){return _vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_0__["SymbolInformation"]});__webpack_require__.d(__webpack_exports__,"Diagnostic",function(){return _vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_0__["Diagnostic"]});__webpack_require__.d(__webpack_exports__,"TextEdit",function(){return _vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_0__["TextEdit"]});__webpack_require__.d(__webpack_exports__,"FormattingOptions",function(){return _vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_0__["FormattingOptions"]});__webpack_require__.d(__webpack_exports__,"MarkedString",function(){return _vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_0__["MarkedString"]});var _services_jsonCompletion_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(38);var _services_jsonHover_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(47);var _services_jsonValidation_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(48);var _services_jsonDocumentSymbols_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(52);var _parser_jsonParser_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(49);var _services_configuration_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(54);var _services_jsonSchemaService_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(55);var _jsonc_parser_main_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(39);function getLanguageService(params){var promise=params.promiseConstructor||Promise;var jsonSchemaService=new _services_jsonSchemaService_js__WEBPACK_IMPORTED_MODULE_7__["JSONSchemaService"](params.schemaRequestService,params.workspaceContext,promise);jsonSchemaService.setSchemaContributions(_services_configuration_js__WEBPACK_IMPORTED_MODULE_6__["schemaContributions"]);var jsonCompletion=new _services_jsonCompletion_js__WEBPACK_IMPORTED_MODULE_1__["JSONCompletion"](jsonSchemaService,params.contributions,promise);var jsonHover=new _services_jsonHover_js__WEBPACK_IMPORTED_MODULE_2__["JSONHover"](jsonSchemaService,params.contributions,promise);var jsonDocumentSymbols=new _services_jsonDocumentSymbols_js__WEBPACK_IMPORTED_MODULE_4__["JSONDocumentSymbols"](jsonSchemaService);var jsonValidation=new _services_jsonValidation_js__WEBPACK_IMPORTED_MODULE_3__["JSONValidation"](jsonSchemaService,promise);return{configure:function(settings){jsonSchemaService.clearExternalSchemas();if(settings.schemas){settings.schemas.forEach(function(settings){jsonSchemaService.registerExternalSchema(settings.uri,settings.fileMatch,settings.schema)})}jsonValidation.configure(settings)},resetSchema:function(uri){return jsonSchemaService.onResourceChange(uri)},doValidation:jsonValidation.doValidation.bind(jsonValidation),parseJSONDocument:function(document){return Object(_parser_jsonParser_js__WEBPACK_IMPORTED_MODULE_5__["parse"])(document,{collectComments:true})},doResolve:jsonCompletion.doResolve.bind(jsonCompletion),doComplete:jsonCompletion.doComplete.bind(jsonCompletion),findDocumentSymbols:jsonDocumentSymbols.findDocumentSymbols.bind(jsonDocumentSymbols),findColorSymbols:function(d,s){return jsonDocumentSymbols.findDocumentColors(d,s).then(function(s){return s.map(function(s){return s.range})})},findDocumentColors:jsonDocumentSymbols.findDocumentColors.bind(jsonDocumentSymbols),getColorPresentations:jsonDocumentSymbols.getColorPresentations.bind(jsonDocumentSymbols),doHover:jsonHover.doHover.bind(jsonHover),format:function(d,r,o){var range=void 0;if(r){var offset=d.offsetAt(r.start);var length=d.offsetAt(r.end)-offset;range={offset,length}}var options={tabSize:o?o.tabSize:4,insertSpaces:o?o.insertSpaces:true,eol:"\n"};return Object(_jsonc_parser_main_js__WEBPACK_IMPORTED_MODULE_8__["format"])(d.getText(),range,options).map(function(e){return _vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_0__["TextEdit"].replace(_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_0__["Range"].create(d.positionAt(e.offset),d.positionAt(e.offset+e.length)),e.content)})}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"Position",function(){return Position});__webpack_require__.d(__webpack_exports__,"Range",function(){return Range});__webpack_require__.d(__webpack_exports__,"Location",function(){return Location});__webpack_require__.d(__webpack_exports__,"DiagnosticSeverity",function(){return DiagnosticSeverity});__webpack_require__.d(__webpack_exports__,"Diagnostic",function(){return Diagnostic});__webpack_require__.d(__webpack_exports__,"Command",function(){return Command});__webpack_require__.d(__webpack_exports__,"TextEdit",function(){return TextEdit});__webpack_require__.d(__webpack_exports__,"TextDocumentEdit",function(){return TextDocumentEdit});__webpack_require__.d(__webpack_exports__,"WorkspaceChange",function(){return WorkspaceChange});__webpack_require__.d(__webpack_exports__,"TextDocumentIdentifier",function(){return TextDocumentIdentifier});__webpack_require__.d(__webpack_exports__,"VersionedTextDocumentIdentifier",function(){return VersionedTextDocumentIdentifier});__webpack_require__.d(__webpack_exports__,"TextDocumentItem",function(){return TextDocumentItem});__webpack_require__.d(__webpack_exports__,"MarkupKind",function(){return MarkupKind});__webpack_require__.d(__webpack_exports__,"CompletionItemKind",function(){return CompletionItemKind});__webpack_require__.d(__webpack_exports__,"InsertTextFormat",function(){return InsertTextFormat});__webpack_require__.d(__webpack_exports__,"CompletionItem",function(){return CompletionItem});__webpack_require__.d(__webpack_exports__,"CompletionList",function(){return CompletionList});__webpack_require__.d(__webpack_exports__,"MarkedString",function(){return MarkedString});__webpack_require__.d(__webpack_exports__,"ParameterInformation",function(){return ParameterInformation});__webpack_require__.d(__webpack_exports__,"SignatureInformation",function(){return SignatureInformation});__webpack_require__.d(__webpack_exports__,"DocumentHighlightKind",function(){return DocumentHighlightKind});__webpack_require__.d(__webpack_exports__,"DocumentHighlight",function(){return DocumentHighlight});__webpack_require__.d(__webpack_exports__,"SymbolKind",function(){return SymbolKind});__webpack_require__.d(__webpack_exports__,"SymbolInformation",function(){return SymbolInformation});__webpack_require__.d(__webpack_exports__,"CodeActionContext",function(){return CodeActionContext});__webpack_require__.d(__webpack_exports__,"CodeLens",function(){return CodeLens});__webpack_require__.d(__webpack_exports__,"FormattingOptions",function(){return FormattingOptions});__webpack_require__.d(__webpack_exports__,"DocumentLink",function(){return DocumentLink});__webpack_require__.d(__webpack_exports__,"EOL",function(){return EOL});__webpack_require__.d(__webpack_exports__,"TextDocument",function(){return TextDocument});__webpack_require__.d(__webpack_exports__,"TextDocumentSaveReason",function(){return TextDocumentSaveReason});var Position;(function(Position){function create(line,character){return{line,character}}Position.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&Is.number(candidate.line)&&Is.number(candidate.character)}Position.is=is})(Position||(Position={}));var Range;(function(Range){function create(one,two,three,four){if(Is.number(one)&&Is.number(two)&&Is.number(three)&&Is.number(four)){return{start:Position.create(one,two),end:Position.create(three,four)}}else if(Position.is(one)&&Position.is(two)){return{start:one,end:two}}else{throw new Error("Range#create called with invalid arguments["+one+", "+two+", "+three+", "+four+"]")}}Range.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&Position.is(candidate.start)&&Position.is(candidate.end)}Range.is=is})(Range||(Range={}));var Location;(function(Location){function create(uri,range){return{uri,range}}Location.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&Range.is(candidate.range)&&(Is.string(candidate.uri)||Is.undefined(candidate.uri))}Location.is=is})(Location||(Location={}));var DiagnosticSeverity;(function(DiagnosticSeverity){DiagnosticSeverity.Error=1;DiagnosticSeverity.Warning=2;DiagnosticSeverity.Information=3;DiagnosticSeverity.Hint=4})(DiagnosticSeverity||(DiagnosticSeverity={}));var Diagnostic;(function(Diagnostic){function create(range,message,severity,code,source){var result={range,message};if(Is.defined(severity)){result.severity=severity}if(Is.defined(code)){result.code=code}if(Is.defined(source)){result.source=source}return result}Diagnostic.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&Range.is(candidate.range)&&Is.string(candidate.message)&&(Is.number(candidate.severity)||Is.undefined(candidate.severity))&&(Is.number(candidate.code)||Is.string(candidate.code)||Is.undefined(candidate.code))&&(Is.string(candidate.source)||Is.undefined(candidate.source))}Diagnostic.is=is})(Diagnostic||(Diagnostic={}));var Command;(function(Command){function create(title,command){var args=[];for(var _i=2;_i<arguments.length;_i++){args[_i-2]=arguments[_i]}var result={title,command};if(Is.defined(args)&&args.length>0){result.arguments=args}return result}Command.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.title)&&Is.string(candidate.title)}Command.is=is})(Command||(Command={}));var TextEdit;(function(TextEdit){function replace(range,newText){return{range,newText}}TextEdit.replace=replace;function insert(position,newText){return{range:{start:position,end:position},newText}}TextEdit.insert=insert;function del(range){return{range,newText:""}}TextEdit.del=del})(TextEdit||(TextEdit={}));var TextDocumentEdit;(function(TextDocumentEdit){function create(textDocument,edits){return{textDocument,edits}}TextDocumentEdit.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&VersionedTextDocumentIdentifier.is(candidate.textDocument)&&Array.isArray(candidate.edits)}TextDocumentEdit.is=is})(TextDocumentEdit||(TextDocumentEdit={}));var TextEditChangeImpl=function(){function TextEditChangeImpl(edits){this.edits=edits}TextEditChangeImpl.prototype.insert=function(position,newText){this.edits.push(TextEdit.insert(position,newText))};TextEditChangeImpl.prototype.replace=function(range,newText){this.edits.push(TextEdit.replace(range,newText))};TextEditChangeImpl.prototype.delete=function(range){this.edits.push(TextEdit.del(range))};TextEditChangeImpl.prototype.add=function(edit){this.edits.push(edit)};TextEditChangeImpl.prototype.all=function(){return this.edits};TextEditChangeImpl.prototype.clear=function(){this.edits.splice(0,this.edits.length)};return TextEditChangeImpl}();var WorkspaceChange=function(){function WorkspaceChange(workspaceEdit){var _this=this;this._textEditChanges=Object.create(null);if(workspaceEdit){this._workspaceEdit=workspaceEdit;if(workspaceEdit.documentChanges){workspaceEdit.documentChanges.forEach(function(textDocumentEdit){var textEditChange=new TextEditChangeImpl(textDocumentEdit.edits);_this._textEditChanges[textDocumentEdit.textDocument.uri]=textEditChange})}else if(workspaceEdit.changes){Object.keys(workspaceEdit.changes).forEach(function(key){var textEditChange=new TextEditChangeImpl(workspaceEdit.changes[key]);_this._textEditChanges[key]=textEditChange})}}}Object.defineProperty(WorkspaceChange.prototype,"edit",{get:function(){return this._workspaceEdit},enumerable:true,configurable:true});WorkspaceChange.prototype.getTextEditChange=function(key){if(VersionedTextDocumentIdentifier.is(key)){if(!this._workspaceEdit){this._workspaceEdit={documentChanges:[]}}if(!this._workspaceEdit.documentChanges){throw new Error("Workspace edit is not configured for versioned document changes.")}var textDocument=key;var result=this._textEditChanges[textDocument.uri];if(!result){var edits=[];var textDocumentEdit={textDocument,edits};this._workspaceEdit.documentChanges.push(textDocumentEdit);result=new TextEditChangeImpl(edits);this._textEditChanges[textDocument.uri]=result}return result}else{if(!this._workspaceEdit){this._workspaceEdit={changes:Object.create(null)}}if(!this._workspaceEdit.changes){throw new Error("Workspace edit is not configured for normal text edit changes.")}var result=this._textEditChanges[key];if(!result){var edits=[];this._workspaceEdit.changes[key]=edits;result=new TextEditChangeImpl(edits);this._textEditChanges[key]=result}return result}};return WorkspaceChange}();var TextDocumentIdentifier;(function(TextDocumentIdentifier){function create(uri){return{uri}}TextDocumentIdentifier.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.uri)}TextDocumentIdentifier.is=is})(TextDocumentIdentifier||(TextDocumentIdentifier={}));var VersionedTextDocumentIdentifier;(function(VersionedTextDocumentIdentifier){function create(uri,version){return{uri,version}}VersionedTextDocumentIdentifier.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.uri)&&Is.number(candidate.version)}VersionedTextDocumentIdentifier.is=is})(VersionedTextDocumentIdentifier||(VersionedTextDocumentIdentifier={}));var TextDocumentItem;(function(TextDocumentItem){function create(uri,languageId,version,text){return{uri,languageId,version,text}}TextDocumentItem.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.uri)&&Is.string(candidate.languageId)&&Is.number(candidate.version)&&Is.string(candidate.text)}TextDocumentItem.is=is})(TextDocumentItem||(TextDocumentItem={}));var MarkupKind;(function(MarkupKind){MarkupKind.PlainText="plaintext";MarkupKind.Markdown="markdown"})(MarkupKind||(MarkupKind={}));var CompletionItemKind;(function(CompletionItemKind){CompletionItemKind.Text=1;CompletionItemKind.Method=2;CompletionItemKind.Function=3;CompletionItemKind.Constructor=4;CompletionItemKind.Field=5;CompletionItemKind.Variable=6;CompletionItemKind.Class=7;CompletionItemKind.Interface=8;CompletionItemKind.Module=9;CompletionItemKind.Property=10;CompletionItemKind.Unit=11;CompletionItemKind.Value=12;CompletionItemKind.Enum=13;CompletionItemKind.Keyword=14;CompletionItemKind.Snippet=15;CompletionItemKind.Color=16;CompletionItemKind.File=17;CompletionItemKind.Reference=18;CompletionItemKind.Folder=19;CompletionItemKind.EnumMember=20;CompletionItemKind.Constant=21;CompletionItemKind.Struct=22;CompletionItemKind.Event=23;CompletionItemKind.Operator=24;CompletionItemKind.TypeParameter=25})(CompletionItemKind||(CompletionItemKind={}));var InsertTextFormat;(function(InsertTextFormat){InsertTextFormat.PlainText=1;InsertTextFormat.Snippet=2})(InsertTextFormat||(InsertTextFormat={}));var CompletionItem;(function(CompletionItem){function create(label){return{label}}CompletionItem.create=create})(CompletionItem||(CompletionItem={}));var CompletionList;(function(CompletionList){function create(items,isIncomplete){return{items:items?items:[],isIncomplete:!!isIncomplete}}CompletionList.create=create})(CompletionList||(CompletionList={}));var MarkedString;(function(MarkedString){function fromPlainText(plainText){return plainText.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}MarkedString.fromPlainText=fromPlainText})(MarkedString||(MarkedString={}));var ParameterInformation;(function(ParameterInformation){function create(label,documentation){return documentation?{label,documentation}:{label}}ParameterInformation.create=create})(ParameterInformation||(ParameterInformation={}));var SignatureInformation;(function(SignatureInformation){function create(label,documentation){var parameters=[];for(var _i=2;_i<arguments.length;_i++){parameters[_i-2]=arguments[_i]}var result={label};if(Is.defined(documentation)){result.documentation=documentation}if(Is.defined(parameters)){result.parameters=parameters}else{result.parameters=[]}return result}SignatureInformation.create=create})(SignatureInformation||(SignatureInformation={}));var DocumentHighlightKind;(function(DocumentHighlightKind){DocumentHighlightKind.Text=1;DocumentHighlightKind.Read=2;DocumentHighlightKind.Write=3})(DocumentHighlightKind||(DocumentHighlightKind={}));var DocumentHighlight;(function(DocumentHighlight){function create(range,kind){var result={range};if(Is.number(kind)){result.kind=kind}return result}DocumentHighlight.create=create})(DocumentHighlight||(DocumentHighlight={}));var SymbolKind;(function(SymbolKind){SymbolKind.File=1;SymbolKind.Module=2;SymbolKind.Namespace=3;SymbolKind.Package=4;SymbolKind.Class=5;SymbolKind.Method=6;SymbolKind.Property=7;SymbolKind.Field=8;SymbolKind.Constructor=9;SymbolKind.Enum=10;SymbolKind.Interface=11;SymbolKind.Function=12;SymbolKind.Variable=13;SymbolKind.Constant=14;SymbolKind.String=15;SymbolKind.Number=16;SymbolKind.Boolean=17;SymbolKind.Array=18;SymbolKind.Object=19;SymbolKind.Key=20;SymbolKind.Null=21;SymbolKind.EnumMember=22;SymbolKind.Struct=23;SymbolKind.Event=24;SymbolKind.Operator=25;SymbolKind.TypeParameter=26})(SymbolKind||(SymbolKind={}));var SymbolInformation;(function(SymbolInformation){function create(name,kind,range,uri,containerName){var result={name,kind,location:{uri,range}};if(containerName){result.containerName=containerName}return result}SymbolInformation.create=create})(SymbolInformation||(SymbolInformation={}));var CodeActionContext;(function(CodeActionContext){function create(diagnostics){return{diagnostics}}CodeActionContext.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&Is.typedArray(candidate.diagnostics,Diagnostic.is)}CodeActionContext.is=is})(CodeActionContext||(CodeActionContext={}));var CodeLens;(function(CodeLens){function create(range,data){var result={range};if(Is.defined(data))result.data=data;return result}CodeLens.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&Range.is(candidate.range)&&(Is.undefined(candidate.command)||Command.is(candidate.command))}CodeLens.is=is})(CodeLens||(CodeLens={}));var FormattingOptions;(function(FormattingOptions){function create(tabSize,insertSpaces){return{tabSize,insertSpaces}}FormattingOptions.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&Is.number(candidate.tabSize)&&Is.boolean(candidate.insertSpaces)}FormattingOptions.is=is})(FormattingOptions||(FormattingOptions={}));var DocumentLink=function(){function DocumentLink(){}return DocumentLink}();(function(DocumentLink){function create(range,target){return{range,target}}DocumentLink.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&Range.is(candidate.range)&&(Is.undefined(candidate.target)||Is.string(candidate.target))}DocumentLink.is=is})(DocumentLink||(DocumentLink={}));var EOL=["\n","\r\n","\r"];var TextDocument;(function(TextDocument){function create(uri,languageId,version,content){return new FullTextDocument(uri,languageId,version,content)}TextDocument.create=create;function is(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.uri)&&(Is.undefined(candidate.languageId)||Is.string(candidate.languageId))&&Is.number(candidate.lineCount)&&Is.func(candidate.getText)&&Is.func(candidate.positionAt)&&Is.func(candidate.offsetAt)?true:false}TextDocument.is=is;function applyEdits(document,edits){var text=document.getText();var sortedEdits=mergeSort(edits,function(a,b){var diff=a.range.start.line-b.range.start.line;if(diff===0){return a.range.start.character-b.range.start.character}return 0});var lastModifiedOffset=text.length;for(var i=sortedEdits.length-1;i>=0;i--){var e=sortedEdits[i];var startOffset=document.offsetAt(e.range.start);var endOffset=document.offsetAt(e.range.end);if(endOffset<=lastModifiedOffset){text=text.substring(0,startOffset)+e.newText+text.substring(endOffset,text.length)}else{throw new Error("Ovelapping edit")}lastModifiedOffset=startOffset}return text}TextDocument.applyEdits=applyEdits;function mergeSort(data,compare){if(data.length<=1){return data}var p=data.length/2|0;var left=data.slice(0,p);var right=data.slice(p);mergeSort(left,compare);mergeSort(right,compare);var leftIdx=0;var rightIdx=0;var i=0;while(leftIdx<left.length&&rightIdx<right.length){var ret=compare(left[leftIdx],right[rightIdx]);if(ret<=0){data[i++]=left[leftIdx++]}else{data[i++]=right[rightIdx++]}}while(leftIdx<left.length){data[i++]=left[leftIdx++]}while(rightIdx<right.length){data[i++]=right[rightIdx++]}return data}})(TextDocument||(TextDocument={}));var TextDocumentSaveReason;(function(TextDocumentSaveReason){TextDocumentSaveReason.Manual=1;TextDocumentSaveReason.AfterDelay=2;TextDocumentSaveReason.FocusOut=3})(TextDocumentSaveReason||(TextDocumentSaveReason={}));var FullTextDocument=function(){function FullTextDocument(uri,languageId,version,content){this._uri=uri;this._languageId=languageId;this._version=version;this._content=content;this._lineOffsets=null}Object.defineProperty(FullTextDocument.prototype,"uri",{get:function(){return this._uri},enumerable:true,configurable:true});Object.defineProperty(FullTextDocument.prototype,"languageId",{get:function(){return this._languageId},enumerable:true,configurable:true});Object.defineProperty(FullTextDocument.prototype,"version",{get:function(){return this._version},enumerable:true,configurable:true});FullTextDocument.prototype.getText=function(range){if(range){var start=this.offsetAt(range.start);var end=this.offsetAt(range.end);return this._content.substring(start,end)}return this._content};FullTextDocument.prototype.update=function(event,version){this._content=event.text;this._version=version;this._lineOffsets=null};FullTextDocument.prototype.getLineOffsets=function(){if(this._lineOffsets===null){var lineOffsets=[];var text=this._content;var isLineStart=true;for(var i=0;i<text.length;i++){if(isLineStart){lineOffsets.push(i);isLineStart=false}var ch=text.charAt(i);isLineStart=ch==="\r"||ch==="\n";if(ch==="\r"&&i+1<text.length&&text.charAt(i+1)==="\n"){i++}}if(isLineStart&&text.length>0){lineOffsets.push(text.length)}this._lineOffsets=lineOffsets}return this._lineOffsets};FullTextDocument.prototype.positionAt=function(offset){offset=Math.max(Math.min(offset,this._content.length),0);var lineOffsets=this.getLineOffsets();var low=0,high=lineOffsets.length;if(high===0){return Position.create(0,offset)}while(low<high){var mid=Math.floor((low+high)/2);if(lineOffsets[mid]>offset){high=mid}else{low=mid+1}}var line=low-1;return Position.create(line,offset-lineOffsets[line])};FullTextDocument.prototype.offsetAt=function(position){var lineOffsets=this.getLineOffsets();if(position.line>=lineOffsets.length){return this._content.length}else if(position.line<0){return 0}var lineOffset=lineOffsets[position.line];var nextLineOffset=position.line+1<lineOffsets.length?lineOffsets[position.line+1]:this._content.length;return Math.max(Math.min(lineOffset+position.character,nextLineOffset),lineOffset)};Object.defineProperty(FullTextDocument.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:true,configurable:true});return FullTextDocument}();var Is;(function(Is){var toString=Object.prototype.toString;function defined(value){return typeof value!=="undefined"}Is.defined=defined;function undefined(value){return typeof value==="undefined"}Is.undefined=undefined;function boolean(value){return value===true||value===false}Is.boolean=boolean;function string(value){return toString.call(value)==="[object String]"}Is.string=string;function number(value){return toString.call(value)==="[object Number]"}Is.number=number;function func(value){return toString.call(value)==="[object Function]"}Is.func=func;function typedArray(value,check){return Array.isArray(value)&&value.every(check)}Is.typedArray=typedArray})(Is||(Is={}))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"JSONCompletion",function(){return JSONCompletion});var _jsonc_parser_main_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(39);var _utils_json_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(44);var _utils_strings_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(45);var _vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(37);var _fillers_vscode_nls_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(46);var localize=_fillers_vscode_nls_js__WEBPACK_IMPORTED_MODULE_4__["loadMessageBundle"]();var JSONCompletion=function(){function JSONCompletion(schemaService,contributions,promiseConstructor){if(contributions===void 0){contributions=[]}this.templateVarIdCounter=0;this.schemaService=schemaService;this.contributions=contributions;this.promise=promiseConstructor||Promise}JSONCompletion.prototype.doResolve=function(item){for(var i=this.contributions.length-1;i>=0;i--){if(this.contributions[i].resolveCompletion){var resolver=this.contributions[i].resolveCompletion(item);if(resolver){return resolver}}}return this.promise.resolve(item)};JSONCompletion.prototype.doComplete=function(document,position,doc){var _this=this;var result={items:[],isIncomplete:false};var offset=document.offsetAt(position);var node=doc.getNodeFromOffsetEndInclusive(offset);if(this.isInComment(document,node?node.start:0,offset)){return Promise.resolve(result)}var currentWord=this.getCurrentWord(document,offset);var overwriteRange=null;if(node&&(node.type==="string"||node.type==="number"||node.type==="boolean"||node.type==="null")){overwriteRange=_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["Range"].create(document.positionAt(node.start),document.positionAt(node.end))}else{var overwriteStart=offset-currentWord.length;if(overwriteStart>0&&document.getText()[overwriteStart-1]==='"'){overwriteStart--}overwriteRange=_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["Range"].create(document.positionAt(overwriteStart),position)}var proposed={};var collector={add:function(suggestion){var existing=proposed[suggestion.label];if(!existing){proposed[suggestion.label]=suggestion;if(overwriteRange){suggestion.textEdit=_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["TextEdit"].replace(overwriteRange,suggestion.insertText)}result.items.push(suggestion)}else if(!existing.documentation){existing.documentation=suggestion.documentation}},setAsIncomplete:function(){result.isIncomplete=true},error:function(message){console.error(message)},log:function(message){console.log(message)},getNumberOfProposals:function(){return result.items.length}};return this.schemaService.getSchemaForResource(document.uri,doc).then(function(schema){var collectionPromises=[];var addValue=true;var currentKey="";var currentProperty=null;if(node){if(node.type==="string"){var stringNode=node;if(stringNode.isKey){addValue=!(node.parent&&node.parent.value);currentProperty=node.parent?node.parent:null;currentKey=document.getText().substring(node.start+1,node.end-1);if(node.parent){node=node.parent.parent}}}}if(node&&node.type==="object"){if(node.start===offset){return result}var properties=node.properties;properties.forEach(function(p){if(!currentProperty||currentProperty!==p){proposed[p.key.value]=_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["CompletionItem"].create("__")}});var separatorAfter_1="";if(addValue){separatorAfter_1=_this.evaluateSeparatorAfter(document,document.offsetAt(overwriteRange.end))}if(schema){_this.getPropertyCompletions(schema,doc,node,addValue,separatorAfter_1,collector)}else{_this.getSchemaLessPropertyCompletions(doc,node,currentKey,collector)}var location_1=node.getPath();_this.contributions.forEach(function(contribution){var collectPromise=contribution.collectPropertyCompletions(document.uri,location_1,currentWord,addValue,separatorAfter_1==="",collector);if(collectPromise){collectionPromises.push(collectPromise)}});if(!schema&&currentWord.length>0&&document.getText().charAt(offset-currentWord.length-1)!=='"'){collector.add({kind:_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["CompletionItemKind"].Property,label:_this.getLabelForValue(currentWord),insertText:_this.getInsertTextForProperty(currentWord,null,false,separatorAfter_1),insertTextFormat:_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["InsertTextFormat"].Snippet,documentation:""})}}var types={};if(schema){_this.getValueCompletions(schema,doc,node,offset,document,collector,types)}else{_this.getSchemaLessValueCompletions(doc,node,offset,document,collector)}if(_this.contributions.length>0){_this.getContributedValueCompletions(doc,node,offset,document,collector,collectionPromises)}return _this.promise.all(collectionPromises).then(function(){if(collector.getNumberOfProposals()===0){var offsetForSeparator=offset;if(node&&(node.type==="string"||node.type==="number"||node.type==="boolean"||node.type==="null")){offsetForSeparator=node.end}var separatorAfter=_this.evaluateSeparatorAfter(document,offsetForSeparator);_this.addFillerValueCompletions(types,separatorAfter,collector)}return result})})};JSONCompletion.prototype.getPropertyCompletions=function(schema,doc,node,addValue,separatorAfter,collector){var _this=this;var matchingSchemas=doc.getMatchingSchemas(schema.schema,node.start);matchingSchemas.forEach(function(s){if(s.node===node&&!s.inverted){var schemaProperties_1=s.schema.properties;if(schemaProperties_1){Object.keys(schemaProperties_1).forEach(function(key){var propertySchema=schemaProperties_1[key];if(typeof propertySchema==="object"&&!propertySchema.deprecationMessage&&!propertySchema.doNotSuggest){var proposal={kind:_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["CompletionItemKind"].Property,label:key,insertText:_this.getInsertTextForProperty(key,propertySchema,addValue,separatorAfter),insertTextFormat:_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["InsertTextFormat"].Snippet,filterText:_this.getFilterTextForValue(key),documentation:propertySchema.description||""};if(Object(_utils_strings_js__WEBPACK_IMPORTED_MODULE_2__["endsWith"])(proposal.insertText,"$1"+separatorAfter)){proposal.command={title:"Suggest",command:"editor.action.triggerSuggest"}}collector.add(proposal)}})}}})};JSONCompletion.prototype.getSchemaLessPropertyCompletions=function(doc,node,currentKey,collector){var _this=this;var collectCompletionsForSimilarObject=function(obj){obj.properties.forEach(function(p){var key=p.key.value;collector.add({kind:_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["CompletionItemKind"].Property,label:key,insertText:_this.getInsertTextForValue(key,""),insertTextFormat:_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["InsertTextFormat"].Snippet,filterText:_this.getFilterTextForValue(key),documentation:""})})};if(node.parent){if(node.parent.type==="property"){var parentKey_1=node.parent.key.value;doc.visit(function(n){var p=n;if(n.type==="property"&&n!==node.parent&&p.key.value===parentKey_1&&p.value&&p.value.type==="object"){collectCompletionsForSimilarObject(p.value)}return true})}else if(node.parent.type==="array"){node.parent.items.forEach(function(n){if(n.type==="object"&&n!==node){collectCompletionsForSimilarObject(n)}})}}else if(node.type==="object"){collector.add({kind:_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["CompletionItemKind"].Property,label:"$schema",insertText:this.getInsertTextForProperty("$schema",null,true,""),insertTextFormat:_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["InsertTextFormat"].Snippet,documentation:"",filterText:this.getFilterTextForValue("$schema")})}};JSONCompletion.prototype.getSchemaLessValueCompletions=function(doc,node,offset,document,collector){var _this=this;var offsetForSeparator=offset;if(node&&(node.type==="string"||node.type==="number"||node.type==="boolean"||node.type==="null")){offsetForSeparator=node.end;node=node.parent}if(!node){collector.add({kind:this.getSuggestionKind("object"),label:"Empty object",insertText:this.getInsertTextForValue({},""),insertTextFormat:_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["InsertTextFormat"].Snippet,documentation:""});collector.add({kind:this.getSuggestionKind("array"),label:"Empty array",insertText:this.getInsertTextForValue([],""),insertTextFormat:_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["InsertTextFormat"].Snippet,documentation:""});return}var separatorAfter=this.evaluateSeparatorAfter(document,offsetForSeparator);var collectSuggestionsForValues=function(value){if(!value.parent.contains(offset,true)){collector.add({kind:_this.getSuggestionKind(value.type),label:_this.getLabelTextForMatchingNode(value,document),insertText:_this.getInsertTextForMatchingNode(value,document,separatorAfter),insertTextFormat:_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["InsertTextFormat"].Snippet,documentation:""})}if(value.type==="boolean"){_this.addBooleanValueCompletion(!value.getValue(),separatorAfter,collector)}};if(node.type==="property"){var propertyNode=node;if(offset>propertyNode.colonOffset){var valueNode=propertyNode.value;if(valueNode&&(offset>valueNode.end||valueNode.type==="object"||valueNode.type==="array")){return}var parentKey_2=propertyNode.key.value;doc.visit(function(n){var p=n;if(n.type==="property"&&p.key.value===parentKey_2&&p.value){collectSuggestionsForValues(p.value)}return true});if(parentKey_2==="$schema"&&node.parent&&!node.parent.parent){this.addDollarSchemaCompletions(separatorAfter,collector)}}}if(node.type==="array"){if(node.parent&&node.parent.type==="property"){var parentKey_3=node.parent.key.value;doc.visit(function(n){var p=n;if(n.type==="property"&&p.key.value===parentKey_3&&p.value&&p.value.type==="array"){p.value.items.forEach(function(n){collectSuggestionsForValues(n)})}return true})}else{node.items.forEach(function(n){collectSuggestionsForValues(n)})}}};JSONCompletion.prototype.getValueCompletions=function(schema,doc,node,offset,document,collector,types){var _this=this;var offsetForSeparator=offset;var parentKey=null;var valueNode=null;if(node&&(node.type==="string"||node.type==="number"||node.type==="boolean"||node.type==="null")){offsetForSeparator=node.end;valueNode=node;node=node.parent}if(!node){this.addSchemaValueCompletions(schema.schema,"",collector,types);return}if(node.type==="property"&&offset>node.colonOffset){var propertyNode=node;var valueNode_1=propertyNode.value;if(valueNode_1&&offset>valueNode_1.end){return}parentKey=propertyNode.key.value;node=node.parent}if(node&&(parentKey!==null||node.type==="array")){var separatorAfter_2=this.evaluateSeparatorAfter(document,offsetForSeparator);var matchingSchemas=doc.getMatchingSchemas(schema.schema,node.start,valueNode);matchingSchemas.forEach(function(s){if(s.node===node&&!s.inverted&&s.schema){if(s.schema.items){if(Array.isArray(s.schema.items)){var index=_this.findItemAtOffset(node,document,offset);if(index<s.schema.items.length){_this.addSchemaValueCompletions(s.schema.items[index],separatorAfter_2,collector,types)}}else{_this.addSchemaValueCompletions(s.schema.items,separatorAfter_2,collector,types)}}if(s.schema.properties){var propertySchema=s.schema.properties[parentKey];if(propertySchema){_this.addSchemaValueCompletions(propertySchema,separatorAfter_2,collector,types)}}}});if(parentKey==="$schema"&&!node.parent){this.addDollarSchemaCompletions(separatorAfter_2,collector)}if(types["boolean"]){this.addBooleanValueCompletion(true,separatorAfter_2,collector);this.addBooleanValueCompletion(false,separatorAfter_2,collector)}if(types["null"]){this.addNullValueCompletion(separatorAfter_2,collector)}}};JSONCompletion.prototype.getContributedValueCompletions=function(doc,node,offset,document,collector,collectionPromises){if(!node){this.contributions.forEach(function(contribution){var collectPromise=contribution.collectDefaultCompletions(document.uri,collector);if(collectPromise){collectionPromises.push(collectPromise)}})}else{if(node.type==="string"||node.type==="number"||node.type==="boolean"||node.type==="null"){node=node.parent}if(node.type==="property"&&offset>node.colonOffset){var parentKey_4=node.key.value;var valueNode=node.value;if(!valueNode||offset<=valueNode.end){var location_2=node.parent.getPath();this.contributions.forEach(function(contribution){var collectPromise=contribution.collectValueCompletions(document.uri,location_2,parentKey_4,collector);if(collectPromise){collectionPromises.push(collectPromise)}})}}}};JSONCompletion.prototype.addSchemaValueCompletions=function(schema,separatorAfter,collector,types){var _this=this;if(typeof schema==="object"){this.addDefaultValueCompletions(schema,separatorAfter,collector);this.addEnumValueCompletions(schema,separatorAfter,collector);this.collectTypes(schema,types);if(Array.isArray(schema.allOf)){schema.allOf.forEach(function(s){return _this.addSchemaValueCompletions(s,separatorAfter,collector,types)})}if(Array.isArray(schema.anyOf)){schema.anyOf.forEach(function(s){return _this.addSchemaValueCompletions(s,separatorAfter,collector,types)})}if(Array.isArray(schema.oneOf)){schema.oneOf.forEach(function(s){return _this.addSchemaValueCompletions(s,separatorAfter,collector,types)})}}};JSONCompletion.prototype.addDefaultValueCompletions=function(schema,separatorAfter,collector,arrayDepth){var _this=this;if(arrayDepth===void 0){arrayDepth=0}var hasProposals=false;if(schema.default){var type=schema.type;var value=schema.default;for(var i=arrayDepth;i>0;i--){value=[value];type="array"}collector.add({kind:this.getSuggestionKind(type),label:this.getLabelForValue(value),insertText:this.getInsertTextForValue(value,separatorAfter),insertTextFormat:_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["InsertTextFormat"].Snippet,detail:localize("json.suggest.default","Default value")});hasProposals=true}if(Array.isArray(schema.defaultSnippets)){schema.defaultSnippets.forEach(function(s){var type=schema.type;var value=s.body;var label=s.label;var insertText;var filterText;if(typeof value!=="undefined"){var type_1=schema.type;for(var i=arrayDepth;i>0;i--){value=[value];type_1="array"}insertText=_this.getInsertTextForSnippetValue(value,separatorAfter);filterText=_this.getFilterTextForSnippetValue(value);label=label||_this.getLabelForSnippetValue(value)}else if(typeof s.bodyText==="string"){var prefix="",suffix="",indent="";for(var i=arrayDepth;i>0;i--){prefix=prefix+indent+"[\n";suffix=suffix+"\n"+indent+"]";indent+="\t";type="array"}insertText=prefix+indent+s.bodyText.split("\n").join("\n"+indent)+suffix+separatorAfter;label=label||insertText;filterText=insertText.replace(/[\n]/g,"")}collector.add({kind:_this.getSuggestionKind(type),label,documentation:s.description,insertText,insertTextFormat:_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["InsertTextFormat"].Snippet,filterText});hasProposals=true})}if(!hasProposals&&typeof schema.items==="object"&&!Array.isArray(schema.items)){this.addDefaultValueCompletions(schema.items,separatorAfter,collector,arrayDepth+1)}};JSONCompletion.prototype.addEnumValueCompletions=function(schema,separatorAfter,collector){if(Array.isArray(schema.enum)){for(var i=0,length=schema.enum.length;i<length;i++){var enm=schema.enum[i];var documentation=schema.description;if(schema.enumDescriptions&&i<schema.enumDescriptions.length){documentation=schema.enumDescriptions[i]}collector.add({kind:this.getSuggestionKind(schema.type),label:this.getLabelForValue(enm),insertText:this.getInsertTextForValue(enm,separatorAfter),insertTextFormat:_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["InsertTextFormat"].Snippet,documentation})}}};JSONCompletion.prototype.collectTypes=function(schema,types){var type=schema.type;if(Array.isArray(type)){type.forEach(function(t){return types[t]=true})}else{types[type]=true}};JSONCompletion.prototype.addFillerValueCompletions=function(types,separatorAfter,collector){if(types["object"]){collector.add({kind:this.getSuggestionKind("object"),label:"{}",insertText:this.getInsertTextForGuessedValue({},separatorAfter),insertTextFormat:_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["InsertTextFormat"].Snippet,detail:localize("defaults.object","New object"),documentation:""})}if(types["array"]){collector.add({kind:this.getSuggestionKind("array"),label:"[]",insertText:this.getInsertTextForGuessedValue([],separatorAfter),insertTextFormat:_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["InsertTextFormat"].Snippet,detail:localize("defaults.array","New array"),documentation:""})}};JSONCompletion.prototype.addBooleanValueCompletion=function(value,separatorAfter,collector){collector.add({kind:this.getSuggestionKind("boolean"),label:value?"true":"false",insertText:this.getInsertTextForValue(value,separatorAfter),insertTextFormat:_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["InsertTextFormat"].Snippet,documentation:""})};JSONCompletion.prototype.addNullValueCompletion=function(separatorAfter,collector){collector.add({kind:this.getSuggestionKind("null"),label:"null",insertText:"null"+separatorAfter,insertTextFormat:_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["InsertTextFormat"].Snippet,documentation:""})};JSONCompletion.prototype.addDollarSchemaCompletions=function(separatorAfter,collector){var _this=this;var schemaIds=this.schemaService.getRegisteredSchemaIds(function(schema){return schema==="http"||schema==="https"});schemaIds.forEach(function(schemaId){return collector.add({kind:_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["CompletionItemKind"].Module,label:_this.getLabelForValue(schemaId),filterText:_this.getFilterTextForValue(schemaId),insertText:_this.getInsertTextForValue(schemaId,separatorAfter),insertTextFormat:_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["InsertTextFormat"].Snippet,documentation:""})})};JSONCompletion.prototype.getLabelForValue=function(value){var label=JSON.stringify(value);if(label.length>57){return label.substr(0,57).trim()+"..."}return label};JSONCompletion.prototype.getFilterTextForValue=function(value){return JSON.stringify(value)};JSONCompletion.prototype.getFilterTextForSnippetValue=function(value){return JSON.stringify(value).replace(/\$\{\d+:([^}]+)\}|\$\d+/g,"$1")};JSONCompletion.prototype.getLabelForSnippetValue=function(value){var label=JSON.stringify(value);label=label.replace(/\$\{\d+:([^}]+)\}|\$\d+/g,"$1");if(label.length>57){return label.substr(0,57).trim()+"..."}return label};JSONCompletion.prototype.getInsertTextForPlainText=function(text){return text.replace(/[\\\$\}]/g,"\\$&")};JSONCompletion.prototype.getInsertTextForValue=function(value,separatorAfter){var text=JSON.stringify(value,null,"\t");if(text==="{}"){return"{\n\t$1\n}"+separatorAfter}else if(text==="[]"){return"[\n\t$1\n]"+separatorAfter}return this.getInsertTextForPlainText(text+separatorAfter)};JSONCompletion.prototype.getInsertTextForSnippetValue=function(value,separatorAfter){var replacer=function(value){if(typeof value==="string"){if(value[0]==="^"){return value.substr(1)}}return JSON.stringify(value)};return Object(_utils_json_js__WEBPACK_IMPORTED_MODULE_1__["stringifyObject"])(value,"",replacer)+separatorAfter};JSONCompletion.prototype.getInsertTextForGuessedValue=function(value,separatorAfter){switch(typeof value){case"object":if(value===null){return"${1:null}"+separatorAfter}return this.getInsertTextForValue(value,separatorAfter);case"string":var snippetValue=JSON.stringify(value);snippetValue=snippetValue.substr(1,snippetValue.length-2);snippetValue=this.getInsertTextForPlainText(snippetValue);return'"${1:'+snippetValue+'}"'+separatorAfter;case"number":case"boolean":return"${1:"+JSON.stringify(value)+"}"+separatorAfter}return this.getInsertTextForValue(value,separatorAfter)};JSONCompletion.prototype.getSuggestionKind=function(type){if(Array.isArray(type)){var array=type;type=array.length>0?array[0]:null}if(!type){return _vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["CompletionItemKind"].Value}switch(type){case"string":return _vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["CompletionItemKind"].Value;case"object":return _vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["CompletionItemKind"].Module;case"property":return _vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["CompletionItemKind"].Property;default:return _vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_3__["CompletionItemKind"].Value}};JSONCompletion.prototype.getLabelTextForMatchingNode=function(node,document){switch(node.type){case"array":return"[]";case"object":return"{}";default:var content=document.getText().substr(node.start,node.end-node.start);return content}};JSONCompletion.prototype.getInsertTextForMatchingNode=function(node,document,separatorAfter){switch(node.type){case"array":return this.getInsertTextForValue([],separatorAfter);case"object":return this.getInsertTextForValue({},separatorAfter);default:var content=document.getText().substr(node.start,node.end-node.start)+separatorAfter;return this.getInsertTextForPlainText(content)}};JSONCompletion.prototype.getInsertTextForProperty=function(key,propertySchema,addValue,separatorAfter){var propertyText=this.getInsertTextForValue(key,"");if(!addValue){return propertyText}var resultText=propertyText+": ";var value;var nValueProposals=0;if(propertySchema){if(Array.isArray(propertySchema.defaultSnippets)){if(propertySchema.defaultSnippets.length===1){var body=propertySchema.defaultSnippets[0].body;if(typeof body!=="undefined"){value=this.getInsertTextForSnippetValue(body,"")}}nValueProposals+=propertySchema.defaultSnippets.length}if(propertySchema.enum){if(!value&&propertySchema.enum.length===1){value=this.getInsertTextForGuessedValue(propertySchema.enum[0],"")}nValueProposals+=propertySchema.enum.length}if(typeof propertySchema.default!=="undefined"){if(!value){value=this.getInsertTextForGuessedValue(propertySchema.default,"")}nValueProposals++}if(nValueProposals===0){var type=Array.isArray(propertySchema.type)?propertySchema.type[0]:propertySchema.type;if(!type){if(propertySchema.properties){type="object"}else if(propertySchema.items){type="array"}}switch(type){case"boolean":value="$1";break;case"string":value='"$1"';break;case"object":value="{\n\t$1\n}";break;case"array":value="[\n\t$1\n]";break;case"number":case"integer":value="${1:0}";break;case"null":value="${1:null}";break;default:return propertyText}}}if(!value||nValueProposals>1){value="$1"}return resultText+value+separatorAfter};JSONCompletion.prototype.getCurrentWord=function(document,offset){var i=offset-1;var text=document.getText();while(i>=0&&' \t\n\r\v":{[,]}'.indexOf(text.charAt(i))===-1){i--}return text.substring(i+1,offset)};JSONCompletion.prototype.evaluateSeparatorAfter=function(document,offset){var scanner=_jsonc_parser_main_js__WEBPACK_IMPORTED_MODULE_0__["createScanner"](document.getText(),true);scanner.setPosition(offset);var token=scanner.scan();switch(token){case 5:case 2:case 4:case 17:return"";default:return","}};JSONCompletion.prototype.findItemAtOffset=function(node,document,offset){var scanner=_jsonc_parser_main_js__WEBPACK_IMPORTED_MODULE_0__["createScanner"](document.getText(),true);var children=node.getChildNodes();for(var i=children.length-1;i>=0;i--){var child=children[i];if(offset>child.end){scanner.setPosition(child.end);var token=scanner.scan();if(token===5&&offset>=scanner.getTokenOffset()+scanner.getTokenLength()){return i+1}return i}else if(offset>=child.start){return i}}return 0};JSONCompletion.prototype.isInComment=function(document,start,offset){var scanner=_jsonc_parser_main_js__WEBPACK_IMPORTED_MODULE_0__["createScanner"](document.getText(),false);scanner.setPosition(start);var token=scanner.scan();while(token!==17&&scanner.getTokenOffset()+scanner.getTokenLength()<offset){token=scanner.scan()}return(token===12||token===13)&&scanner.getTokenOffset()<=offset};return JSONCompletion}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"createScanner",function(){return createScanner});__webpack_require__.d(__webpack_exports__,"getLocation",function(){return getLocation});__webpack_require__.d(__webpack_exports__,"parse",function(){return parse});__webpack_require__.d(__webpack_exports__,"parseTree",function(){return parseTree});__webpack_require__.d(__webpack_exports__,"findNodeAtLocation",function(){return findNodeAtLocation});__webpack_require__.d(__webpack_exports__,"getNodeValue",function(){return getNodeValue});__webpack_require__.d(__webpack_exports__,"visit",function(){return visit});__webpack_require__.d(__webpack_exports__,"stripComments",function(){return stripComments});__webpack_require__.d(__webpack_exports__,"format",function(){return format});__webpack_require__.d(__webpack_exports__,"modify",function(){return modify});__webpack_require__.d(__webpack_exports__,"applyEdits",function(){return applyEdits});var _impl_format_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(40);var _impl_edit_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(42);var _impl_scanner_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(41);var _impl_parser_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(43);var createScanner=_impl_scanner_js__WEBPACK_IMPORTED_MODULE_2__["createScanner"];var getLocation=_impl_parser_js__WEBPACK_IMPORTED_MODULE_3__["getLocation"];var parse=_impl_parser_js__WEBPACK_IMPORTED_MODULE_3__["parse"];var parseTree=_impl_parser_js__WEBPACK_IMPORTED_MODULE_3__["parseTree"];var findNodeAtLocation=_impl_parser_js__WEBPACK_IMPORTED_MODULE_3__["findNodeAtLocation"];var getNodeValue=_impl_parser_js__WEBPACK_IMPORTED_MODULE_3__["getNodeValue"];var visit=_impl_parser_js__WEBPACK_IMPORTED_MODULE_3__["visit"];var stripComments=_impl_parser_js__WEBPACK_IMPORTED_MODULE_3__["stripComments"];function format(documentText,range,options){return _impl_format_js__WEBPACK_IMPORTED_MODULE_0__["format"](documentText,range,options)}function modify(text,path,value,options){return _impl_edit_js__WEBPACK_IMPORTED_MODULE_1__["setProperty"](text,path,value,options.formattingOptions,options.getInsertionIndex)}function applyEdits(text,edits){for(var i=edits.length-1;i>=0;i--){text=_impl_edit_js__WEBPACK_IMPORTED_MODULE_1__["applyEdit"](text,edits[i])}return text}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"format",function(){return format});__webpack_require__.d(__webpack_exports__,"isEOL",function(){return isEOL});var _scanner_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(41);function format(documentText,range,options){var initialIndentLevel;var formatText;var formatTextStart;var rangeStart;var rangeEnd;if(range){rangeStart=range.offset;rangeEnd=rangeStart+range.length;formatTextStart=rangeStart;while(formatTextStart>0&&!isEOL(documentText,formatTextStart-1)){formatTextStart--}var endOffset=rangeEnd;while(endOffset<documentText.length&&!isEOL(documentText,endOffset)){endOffset++}formatText=documentText.substring(formatTextStart,endOffset);initialIndentLevel=computeIndentLevel(formatText,0,options)}else{formatText=documentText;initialIndentLevel=0;formatTextStart=0;rangeStart=0;rangeEnd=documentText.length}var eol=getEOL(options,documentText);var lineBreak=false;var indentLevel=0;var indentValue;if(options.insertSpaces){indentValue=repeat(" ",options.tabSize||4)}else{indentValue="\t"}var scanner=Object(_scanner_js__WEBPACK_IMPORTED_MODULE_0__["createScanner"])(formatText,false);var hasError=false;function newLineAndIndent(){return eol+repeat(indentValue,initialIndentLevel+indentLevel)}function scanNext(){var token=scanner.scan();lineBreak=false;while(token===15||token===14){lineBreak=lineBreak||token===14;token=scanner.scan()}hasError=token===16||scanner.getTokenError()!==0;return token}var editOperations=[];function addEdit(text,startOffset,endOffset){if(!hasError&&startOffset<rangeEnd&&endOffset>rangeStart&&documentText.substring(startOffset,endOffset)!==text){editOperations.push({offset:startOffset,length:endOffset-startOffset,content:text})}}var firstToken=scanNext();if(firstToken!==17){var firstTokenStart=scanner.getTokenOffset()+formatTextStart;var initialIndent=repeat(indentValue,initialIndentLevel);addEdit(initialIndent,formatTextStart,firstTokenStart)}while(firstToken!==17){var firstTokenEnd=scanner.getTokenOffset()+scanner.getTokenLength()+formatTextStart;var secondToken=scanNext();var replaceContent="";while(!lineBreak&&(secondToken===12||secondToken===13)){var commentTokenStart=scanner.getTokenOffset()+formatTextStart;addEdit(" ",firstTokenEnd,commentTokenStart);firstTokenEnd=scanner.getTokenOffset()+scanner.getTokenLength()+formatTextStart;replaceContent=secondToken===12?newLineAndIndent():"";secondToken=scanNext()}if(secondToken===2){if(firstToken!==1){indentLevel--;replaceContent=newLineAndIndent()}}else if(secondToken===4){if(firstToken!==3){indentLevel--;replaceContent=newLineAndIndent()}}else{switch(firstToken){case 3:case 1:indentLevel++;replaceContent=newLineAndIndent();break;case 5:case 12:replaceContent=newLineAndIndent();break;case 13:if(lineBreak){replaceContent=newLineAndIndent()}else{replaceContent=" "}break;case 6:replaceContent=" ";break;case 10:if(secondToken===6){replaceContent="";break}case 7:case 8:case 9:case 11:case 2:case 4:if(secondToken===12||secondToken===13){replaceContent=" "}else if(secondToken!==5&&secondToken!==17){hasError=true}break;case 16:hasError=true;break}if(lineBreak&&(secondToken===12||secondToken===13)){replaceContent=newLineAndIndent()}}var secondTokenStart=scanner.getTokenOffset()+formatTextStart;addEdit(replaceContent,firstTokenEnd,secondTokenStart);firstToken=secondToken}return editOperations}function repeat(s,count){var result="";for(var i=0;i<count;i++){result+=s}return result}function computeIndentLevel(content,offset,options){var i=0;var nChars=0;var tabSize=options.tabSize||4;while(i<content.length){var ch=content.charAt(i);if(ch===" "){nChars++}else if(ch==="\t"){nChars+=tabSize}else{break}i++}return Math.floor(nChars/tabSize)}function getEOL(options,text){for(var i=0;i<text.length;i++){var ch=text.charAt(i);if(ch==="\r"){if(i+1<text.length&&text.charAt(i+1)==="\n"){return"\r\n"}return"\r"}else if(ch==="\n"){return"\n"}}return options&&options.eol||"\n"}function isEOL(text,offset){return"\r\n".indexOf(text.charAt(offset))!==-1}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"createScanner",function(){return createScanner});function createScanner(text,ignoreTrivia){if(ignoreTrivia===void 0){ignoreTrivia=false}var pos=0,len=text.length,value="",tokenOffset=0,token=16,scanError=0;function scanHexDigits(count,exact){var digits=0;var value=0;while(digits<count||!exact){var ch=text.charCodeAt(pos);if(ch>=48&&ch<=57){value=value*16+ch-48}else if(ch>=65&&ch<=70){value=value*16+ch-65+10}else if(ch>=97&&ch<=102){value=value*16+ch-97+10}else{break}pos++;digits++}if(digits<count){value=-1}return value}function setPosition(newPosition){pos=newPosition;value="";tokenOffset=0;token=16;scanError=0}function scanNumber(){var start=pos;if(text.charCodeAt(pos)===48){pos++}else{pos++;while(pos<text.length&&isDigit(text.charCodeAt(pos))){pos++}}if(pos<text.length&&text.charCodeAt(pos)===46){pos++;if(pos<text.length&&isDigit(text.charCodeAt(pos))){pos++;while(pos<text.length&&isDigit(text.charCodeAt(pos))){pos++}}else{scanError=3;return text.substring(start,pos)}}var end=pos;if(pos<text.length&&(text.charCodeAt(pos)===69||text.charCodeAt(pos)===101)){pos++;if(pos<text.length&&text.charCodeAt(pos)===43||text.charCodeAt(pos)===45){pos++}if(pos<text.length&&isDigit(text.charCodeAt(pos))){pos++;while(pos<text.length&&isDigit(text.charCodeAt(pos))){pos++}end=pos}else{scanError=3}}return text.substring(start,end)}function scanString(){var result="",start=pos;while(true){if(pos>=len){result+=text.substring(start,pos);scanError=2;break}var ch=text.charCodeAt(pos);if(ch===34){result+=text.substring(start,pos);pos++;break}if(ch===92){result+=text.substring(start,pos);pos++;if(pos>=len){scanError=2;break}ch=text.charCodeAt(pos++);switch(ch){case 34:result+='"';break;case 92:result+="\\";break;case 47:result+="/";break;case 98:result+="\b";break;case 102:result+="\f";break;case 110:result+="\n";break;case 114:result+="\r";break;case 116:result+="\t";break;case 117:var ch_1=scanHexDigits(4,true);if(ch_1>=0){result+=String.fromCharCode(ch_1)}else{scanError=4}break;default:scanError=5}start=pos;continue}if(ch>=0&&ch<=31){if(isLineBreak(ch)){result+=text.substring(start,pos);scanError=2;break}else{scanError=6}}pos++}return result}function scanNext(){value="";scanError=0;tokenOffset=pos;if(pos>=len){tokenOffset=len;return token=17}var code=text.charCodeAt(pos);if(isWhiteSpace(code)){do{pos++;value+=String.fromCharCode(code);code=text.charCodeAt(pos)}while(isWhiteSpace(code));return token=15}if(isLineBreak(code)){pos++;value+=String.fromCharCode(code);if(code===13&&text.charCodeAt(pos)===10){pos++;value+="\n"}return token=14}switch(code){case 123:pos++;return token=1;case 125:pos++;return token=2;case 91:pos++;return token=3;case 93:pos++;return token=4;case 58:pos++;return token=6;case 44:pos++;return token=5;case 34:pos++;value=scanString();return token=10;case 47:var start=pos-1;if(text.charCodeAt(pos+1)===47){pos+=2;while(pos<len){if(isLineBreak(text.charCodeAt(pos))){break}pos++}value=text.substring(start,pos);return token=12}if(text.charCodeAt(pos+1)===42){pos+=2;var commentClosed=false;while(pos<len){var ch=text.charCodeAt(pos);if(ch===42&&pos+1<len&&text.charCodeAt(pos+1)===47){pos+=2;commentClosed=true;break}pos++}if(!commentClosed){pos++;scanError=1}value=text.substring(start,pos);return token=13}value+=String.fromCharCode(code);pos++;return token=16;case 45:value+=String.fromCharCode(code);pos++;if(pos===len||!isDigit(text.charCodeAt(pos))){return token=16}case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:value+=scanNumber();return token=11;default:while(pos<len&&isUnknownContentCharacter(code)){pos++;code=text.charCodeAt(pos)}if(tokenOffset!==pos){value=text.substring(tokenOffset,pos);switch(value){case"true":return token=8;case"false":return token=9;case"null":return token=7}return token=16}value+=String.fromCharCode(code);pos++;return token=16}}function isUnknownContentCharacter(code){if(isWhiteSpace(code)||isLineBreak(code)){return false}switch(code){case 125:case 93:case 123:case 91:case 34:case 58:case 44:return false}return true}function scanNextNonTrivia(){var result;do{result=scanNext()}while(result>=12&&result<=15);return result}return{setPosition,getPosition:function(){return pos},scan:ignoreTrivia?scanNextNonTrivia:scanNext,getToken:function(){return token},getTokenValue:function(){return value},getTokenOffset:function(){return tokenOffset},getTokenLength:function(){return pos-tokenOffset},getTokenError:function(){return scanError}}}function isWhiteSpace(ch){return ch===32||ch===9||ch===11||ch===12||ch===160||ch===5760||ch>=8192&&ch<=8203||ch===8239||ch===8287||ch===12288||ch===65279}function isLineBreak(ch){return ch===10||ch===13||ch===8232||ch===8233}function isDigit(ch){return ch>=48&&ch<=57}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"removeProperty",function(){return removeProperty});__webpack_require__.d(__webpack_exports__,"setProperty",function(){return setProperty});__webpack_require__.d(__webpack_exports__,"applyEdit",function(){return applyEdit});__webpack_require__.d(__webpack_exports__,"isWS",function(){return isWS});var _format_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(40);var _parser_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(43);function removeProperty(text,path,formattingOptions){return setProperty(text,path,void 0,formattingOptions)}function setProperty(text,path,value,formattingOptions,getInsertionIndex){var errors=[];var root=Object(_parser_js__WEBPACK_IMPORTED_MODULE_1__["parseTree"])(text,errors);var parent=void 0;var lastSegment=void 0;while(path.length>0){lastSegment=path.pop();parent=Object(_parser_js__WEBPACK_IMPORTED_MODULE_1__["findNodeAtLocation"])(root,path);if(parent===void 0&&value!==void 0){if(typeof lastSegment==="string"){value=(_a={},_a[lastSegment]=value,_a)}else{value=[value]}}else{break}}if(!parent){if(value===void 0){throw new Error("Can not delete in empty document")}return withFormatting(text,{offset:root?root.offset:0,length:root?root.length:0,content:JSON.stringify(value)},formattingOptions)}else if(parent.type==="object"&&typeof lastSegment==="string"&&Array.isArray(parent.children)){var existing=Object(_parser_js__WEBPACK_IMPORTED_MODULE_1__["findNodeAtLocation"])(parent,[lastSegment]);if(existing!==void 0){if(value===void 0){if(!existing.parent){throw new Error("Malformed AST")}var propertyIndex=parent.children.indexOf(existing.parent);var removeBegin=void 0;var removeEnd=existing.parent.offset+existing.parent.length;if(propertyIndex>0){var previous=parent.children[propertyIndex-1];removeBegin=previous.offset+previous.length}else{removeBegin=parent.offset+1;if(parent.children.length>1){var next=parent.children[1];removeEnd=next.offset}}return withFormatting(text,{offset:removeBegin,length:removeEnd-removeBegin,content:""},formattingOptions)}else{return withFormatting(text,{offset:existing.offset,length:existing.length,content:JSON.stringify(value)},formattingOptions)}}else{if(value===void 0){return[]}var newProperty=JSON.stringify(lastSegment)+": "+JSON.stringify(value);var index=getInsertionIndex?getInsertionIndex(parent.children.map(function(p){return p.children[0].value})):parent.children.length;var edit=void 0;if(index>0){var previous=parent.children[index-1];edit={offset:previous.offset+previous.length,length:0,content:","+newProperty}}else if(parent.children.length===0){edit={offset:parent.offset+1,length:0,content:newProperty}}else{edit={offset:parent.offset+1,length:0,content:newProperty+","}}return withFormatting(text,edit,formattingOptions)}}else if(parent.type==="array"&&typeof lastSegment==="number"&&Array.isArray(parent.children)){var insertIndex=lastSegment;if(insertIndex===-1){var newProperty=""+JSON.stringify(value);var edit=void 0;if(parent.children.length===0){edit={offset:parent.offset+1,length:0,content:newProperty}}else{var previous=parent.children[parent.children.length-1];edit={offset:previous.offset+previous.length,length:0,content:","+newProperty}}return withFormatting(text,edit,formattingOptions)}else{if(value===void 0&&parent.children.length>=0){var removalIndex=lastSegment;var toRemove=parent.children[removalIndex];var edit=void 0;if(parent.children.length===1){edit={offset:parent.offset+1,length:parent.length-2,content:""}}else if(parent.children.length-1===removalIndex){var previous=parent.children[removalIndex-1];var offset=previous.offset+previous.length;var parentEndOffset=parent.offset+parent.length;edit={offset,length:parentEndOffset-2-offset,content:""}}else{edit={offset:toRemove.offset,length:parent.children[removalIndex+1].offset-toRemove.offset,content:""}}return withFormatting(text,edit,formattingOptions)}else{throw new Error("Array modification not supported yet")}}}else{throw new Error("Can not add "+(typeof lastSegment!=="number"?"index":"property")+" to parent of type "+parent.type)}var _a}function withFormatting(text,edit,formattingOptions){var newText=applyEdit(text,edit);var begin=edit.offset;var end=edit.offset+edit.content.length;if(edit.length===0||edit.content.length===0){while(begin>0&&!Object(_format_js__WEBPACK_IMPORTED_MODULE_0__["isEOL"])(newText,begin-1)){begin--}while(end<newText.length&&!Object(_format_js__WEBPACK_IMPORTED_MODULE_0__["isEOL"])(newText,end)){end++}}var edits=Object(_format_js__WEBPACK_IMPORTED_MODULE_0__["format"])(newText,{offset:begin,length:end-begin},formattingOptions);for(var i=edits.length-1;i>=0;i--){var edit_1=edits[i];newText=applyEdit(newText,edit_1);begin=Math.min(begin,edit_1.offset);end=Math.max(end,edit_1.offset+edit_1.length);end+=edit_1.content.length-edit_1.length}var editLength=text.length-(newText.length-end)-begin;return[{offset:begin,length:editLength,content:newText.substring(begin,end)}]}function applyEdit(text,edit){return text.substring(0,edit.offset)+edit.content+text.substring(edit.offset+edit.length)}function isWS(text,offset){return"\r\n \t".indexOf(text.charAt(offset))!==-1}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"getLocation",function(){return getLocation});__webpack_require__.d(__webpack_exports__,"parse",function(){return parse});__webpack_require__.d(__webpack_exports__,"parseTree",function(){return parseTree});__webpack_require__.d(__webpack_exports__,"findNodeAtLocation",function(){return findNodeAtLocation});__webpack_require__.d(__webpack_exports__,"getNodeValue",function(){return getNodeValue});__webpack_require__.d(__webpack_exports__,"visit",function(){return visit});__webpack_require__.d(__webpack_exports__,"stripComments",function(){return stripComments});var _scanner_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(41);function getLocation(text,position){var segments=[];var earlyReturnException=new Object;var previousNode=void 0;var previousNodeInst={value:{},offset:0,length:0,type:"object"};var isAtPropertyKey=false;function setPreviousNode(value,offset,length,type){previousNodeInst.value=value;previousNodeInst.offset=offset;previousNodeInst.length=length;previousNodeInst.type=type;previousNodeInst.columnOffset=void 0;previousNode=previousNodeInst}try{visit(text,{onObjectBegin:function(offset,length){if(position<=offset){throw earlyReturnException}previousNode=void 0;isAtPropertyKey=position>offset;segments.push("")},onObjectProperty:function(name,offset,length){if(position<offset){throw earlyReturnException}setPreviousNode(name,offset,length,"property");segments[segments.length-1]=name;if(position<=offset+length){throw earlyReturnException}},onObjectEnd:function(offset,length){if(position<=offset){throw earlyReturnException}previousNode=void 0;segments.pop()},onArrayBegin:function(offset,length){if(position<=offset){throw earlyReturnException}previousNode=void 0;segments.push(0)},onArrayEnd:function(offset,length){if(position<=offset){throw earlyReturnException}previousNode=void 0;segments.pop()},onLiteralValue:function(value,offset,length){if(position<offset){throw earlyReturnException}setPreviousNode(value,offset,length,getLiteralNodeType(value));if(position<=offset+length){throw earlyReturnException}},onSeparator:function(sep,offset,length){if(position<=offset){throw earlyReturnException}if(sep===":"&&previousNode&&previousNode.type==="property"){previousNode.columnOffset=offset;isAtPropertyKey=false;previousNode=void 0}else if(sep===","){var last=segments[segments.length-1];if(typeof last==="number"){segments[segments.length-1]=last+1}else{isAtPropertyKey=true;segments[segments.length-1]=""}previousNode=void 0}}})}catch(e){if(e!==earlyReturnException){throw e}}return{path:segments,previousNode,isAtPropertyKey,matches:function(pattern){var k=0;for(var i=0;k<pattern.length&&i<segments.length;i++){if(pattern[k]===segments[i]||pattern[k]==="*"){k++}else if(pattern[k]!=="**"){return false}}return k===pattern.length}}}function parse(text,errors,options){if(errors===void 0){errors=[]}var currentProperty=null;var currentParent=[];var previousParents=[];function onValue(value){if(Array.isArray(currentParent)){currentParent.push(value)}else if(currentProperty){currentParent[currentProperty]=value}}var visitor={onObjectBegin:function(){var object={};onValue(object);previousParents.push(currentParent);currentParent=object;currentProperty=null},onObjectProperty:function(name){currentProperty=name},onObjectEnd:function(){currentParent=previousParents.pop()},onArrayBegin:function(){var array=[];onValue(array);previousParents.push(currentParent);currentParent=array;currentProperty=null},onArrayEnd:function(){currentParent=previousParents.pop()},onLiteralValue:onValue,onError:function(error,offset,length){errors.push({error,offset,length})}};visit(text,visitor,options);return currentParent[0]}function parseTree(text,errors,options){if(errors===void 0){errors=[]}var currentParent={type:"array",offset:-1,length:-1,children:[]};function ensurePropertyComplete(endOffset){if(currentParent.type==="property"){currentParent.length=endOffset-currentParent.offset;currentParent=currentParent.parent}}function onValue(valueNode){currentParent.children.push(valueNode);return valueNode}var visitor={onObjectBegin:function(offset){currentParent=onValue({type:"object",offset,length:-1,parent:currentParent,children:[]})},onObjectProperty:function(name,offset,length){currentParent=onValue({type:"property",offset,length:-1,parent:currentParent,children:[]});currentParent.children.push({type:"string",value:name,offset,length,parent:currentParent})},onObjectEnd:function(offset,length){currentParent.length=offset+length-currentParent.offset;currentParent=currentParent.parent;ensurePropertyComplete(offset+length)},onArrayBegin:function(offset,length){currentParent=onValue({type:"array",offset,length:-1,parent:currentParent,children:[]})},onArrayEnd:function(offset,length){currentParent.length=offset+length-currentParent.offset;currentParent=currentParent.parent;ensurePropertyComplete(offset+length)},onLiteralValue:function(value,offset,length){onValue({type:getLiteralNodeType(value),offset,length,parent:currentParent,value});ensurePropertyComplete(offset+length)},onSeparator:function(sep,offset,length){if(currentParent.type==="property"){if(sep===":"){currentParent.columnOffset=offset}else if(sep===","){ensurePropertyComplete(offset)}}},onError:function(error,offset,length){errors.push({error,offset,length})}};visit(text,visitor,options);var result=currentParent.children[0];if(result){delete result.parent}return result}function findNodeAtLocation(root,path){if(!root){return void 0}var node=root;for(var _i=0,path_1=path;_i<path_1.length;_i++){var segment=path_1[_i];if(typeof segment==="string"){if(node.type!=="object"||!Array.isArray(node.children)){return void 0}var found=false;for(var _a=0,_b=node.children;_a<_b.length;_a++){var propertyNode=_b[_a];if(Array.isArray(propertyNode.children)&&propertyNode.children[0].value===segment){node=propertyNode.children[1];found=true;break}}if(!found){return void 0}}else{var index=segment;if(node.type!=="array"||index<0||!Array.isArray(node.children)||index>=node.children.length){return void 0}node=node.children[index]}}return node}function getNodeValue(node){if(node.type==="array"){return node.children.map(getNodeValue)}else if(node.type==="object"){var obj=Object.create(null);for(var _i=0,_a=node.children;_i<_a.length;_i++){var prop=_a[_i];obj[prop.children[0].value]=getNodeValue(prop.children[1])}return obj}return node.value}function visit(text,visitor,options){var _scanner=Object(_scanner_js__WEBPACK_IMPORTED_MODULE_0__["createScanner"])(text,false);function toNoArgVisit(visitFunction){return visitFunction?function(){return visitFunction(_scanner.getTokenOffset(),_scanner.getTokenLength())}:function(){return true}}function toOneArgVisit(visitFunction){return visitFunction?function(arg){return visitFunction(arg,_scanner.getTokenOffset(),_scanner.getTokenLength())}:function(){return true}}var onObjectBegin=toNoArgVisit(visitor.onObjectBegin),onObjectProperty=toOneArgVisit(visitor.onObjectProperty),onObjectEnd=toNoArgVisit(visitor.onObjectEnd),onArrayBegin=toNoArgVisit(visitor.onArrayBegin),onArrayEnd=toNoArgVisit(visitor.onArrayEnd),onLiteralValue=toOneArgVisit(visitor.onLiteralValue),onSeparator=toOneArgVisit(visitor.onSeparator),onComment=toNoArgVisit(visitor.onComment),onError=toOneArgVisit(visitor.onError);var disallowComments=options&&options.disallowComments;var allowTrailingComma=options&&options.allowTrailingComma;function scanNext(){while(true){var token=_scanner.scan();switch(_scanner.getTokenError()){case 4:handleError(14);break;case 5:handleError(15);break;case 3:handleError(13);break;case 1:if(!disallowComments){handleError(11)}break;case 2:handleError(12);break;case 6:handleError(16);break}switch(token){case 12:case 13:if(disallowComments){handleError(10)}else{onComment()}break;case 16:handleError(1);break;case 15:case 14:break;default:return token}}}function handleError(error,skipUntilAfter,skipUntil){if(skipUntilAfter===void 0){skipUntilAfter=[]}if(skipUntil===void 0){skipUntil=[]}onError(error);if(skipUntilAfter.length+skipUntil.length>0){var token=_scanner.getToken();while(token!==17){if(skipUntilAfter.indexOf(token)!==-1){scanNext();break}else if(skipUntil.indexOf(token)!==-1){break}token=scanNext()}}}function parseString(isValue){var value=_scanner.getTokenValue();if(isValue){onLiteralValue(value)}else{onObjectProperty(value)}scanNext();return true}function parseLiteral(){switch(_scanner.getToken()){case 11:var value=0;try{value=JSON.parse(_scanner.getTokenValue());if(typeof value!=="number"){handleError(2);value=0}}catch(e){handleError(2)}onLiteralValue(value);break;case 7:onLiteralValue(null);break;case 8:onLiteralValue(true);break;case 9:onLiteralValue(false);break;default:return false}scanNext();return true}function parseProperty(){if(_scanner.getToken()!==10){handleError(3,[],[2,5]);return false}parseString(false);if(_scanner.getToken()===6){onSeparator(":");scanNext();if(!parseValue()){handleError(4,[],[2,5])}}else{handleError(5,[],[2,5])}return true}function parseObject(){onObjectBegin();scanNext();var needsComma=false;while(_scanner.getToken()!==2&&_scanner.getToken()!==17){if(_scanner.getToken()===5){if(!needsComma){handleError(4,[],[])}onSeparator(",");scanNext();if(_scanner.getToken()===2&&allowTrailingComma){break}}else if(needsComma){handleError(6,[],[])}if(!parseProperty()){handleError(4,[],[2,5])}needsComma=true}onObjectEnd();if(_scanner.getToken()!==2){handleError(7,[2],[])}else{scanNext()}return true}function parseArray(){onArrayBegin();scanNext();var needsComma=false;while(_scanner.getToken()!==4&&_scanner.getToken()!==17){if(_scanner.getToken()===5){if(!needsComma){handleError(4,[],[])}onSeparator(",");scanNext();if(_scanner.getToken()===4&&allowTrailingComma){break}}else if(needsComma){handleError(6,[],[])}if(!parseValue()){handleError(4,[],[4,5])}needsComma=true}onArrayEnd();if(_scanner.getToken()!==4){handleError(8,[4],[])}else{scanNext()}return true}function parseValue(){switch(_scanner.getToken()){case 3:return parseArray();case 1:return parseObject();case 10:return parseString(true);default:return parseLiteral()}}scanNext();if(_scanner.getToken()===17){return true}if(!parseValue()){handleError(4,[],[]);return false}if(_scanner.getToken()!==17){handleError(9,[],[])}return true}function stripComments(text,replaceCh){var _scanner=Object(_scanner_js__WEBPACK_IMPORTED_MODULE_0__["createScanner"])(text),parts=[],kind,offset=0,pos;do{pos=_scanner.getPosition();kind=_scanner.scan();switch(kind){case 12:case 13:case 17:if(offset!==pos){parts.push(text.substring(offset,pos))}if(replaceCh!==void 0){parts.push(_scanner.getTokenValue().replace(/[^\r\n]/g,replaceCh))}offset=_scanner.getPosition();break}}while(kind!==17);return parts.join("")}function getLiteralNodeType(value){switch(typeof value){case"boolean":return"boolean";case"number":return"number";case"string":return"string";default:return"null"}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"stringifyObject",function(){return stringifyObject});function stringifyObject(obj,indent,stringifyLiteral){if(obj!==null&&typeof obj==="object"){var newIndent=indent+"\t";if(Array.isArray(obj)){if(obj.length===0){return"[]"}var result="[\n";for(var i=0;i<obj.length;i++){result+=newIndent+stringifyObject(obj[i],newIndent,stringifyLiteral);if(i<obj.length-1){result+=","}result+="\n"}result+=indent+"]";return result}else{var keys=Object.keys(obj);if(keys.length===0){return"{}"}var result="{\n";for(var i=0;i<keys.length;i++){var key=keys[i];result+=newIndent+JSON.stringify(key)+": "+stringifyObject(obj[key],newIndent,stringifyLiteral);if(i<keys.length-1){result+=","}result+="\n"}result+=indent+"}";return result}}return stringifyLiteral(obj)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"startsWith",function(){return startsWith});__webpack_require__.d(__webpack_exports__,"endsWith",function(){return endsWith});__webpack_require__.d(__webpack_exports__,"convertSimple2RegExpPattern",function(){return convertSimple2RegExpPattern});__webpack_require__.d(__webpack_exports__,"repeat",function(){return repeat});function startsWith(haystack,needle){if(haystack.length<needle.length){return false}for(var i=0;i<needle.length;i++){if(haystack[i]!==needle[i]){return false}}return true}function endsWith(haystack,needle){var diff=haystack.length-needle.length;if(diff>0){return haystack.lastIndexOf(needle)===diff}else if(diff===0){return haystack===needle}else{return false}}function convertSimple2RegExpPattern(pattern){return pattern.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function repeat(value,count){var s="";while(count>0){if((count&1)===1){s+=value}value+=value;count=count>>>1}return s}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"loadMessageBundle",function(){return loadMessageBundle});__webpack_require__.d(__webpack_exports__,"config",function(){return config});function format(message,args){var result;if(args.length===0){result=message}else{result=message.replace(/\{(\d+)\}/g,function(match,rest){var index=rest[0];return typeof args[index]!=="undefined"?args[index]:match})}return result}function localize(key,message){var args=[];for(var _i=2;_i<arguments.length;_i++){args[_i-2]=arguments[_i]}return format(message,args)}function loadMessageBundle(file){return localize}function config(opt){return loadMessageBundle}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"JSONHover",function(){return JSONHover});var _vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(37);var JSONHover=function(){function JSONHover(schemaService,contributions,promiseConstructor){if(contributions===void 0){contributions=[]}this.schemaService=schemaService;this.contributions=contributions;this.promise=promiseConstructor||Promise}JSONHover.prototype.doHover=function(document,position,doc){var offset=document.offsetAt(position);var node=doc.getNodeFromOffset(offset);if(!node||(node.type==="object"||node.type==="array")&&offset>node.start+1&&offset<node.end-1){return this.promise.resolve(null)}var hoverRangeNode=node;if(node.type==="string"){var stringNode=node;if(stringNode.isKey){var propertyNode=node.parent;node=propertyNode.value;if(!node){return this.promise.resolve(null)}}}var hoverRange=_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_0__["Range"].create(document.positionAt(hoverRangeNode.start),document.positionAt(hoverRangeNode.end));var createHover=function(contents){var result={contents,range:hoverRange};return result};var location=node.getPath();for(var i=this.contributions.length-1;i>=0;i--){var contribution=this.contributions[i];var promise=contribution.getInfoContribution(document.uri,location);if(promise){return promise.then(function(htmlContent){return createHover(htmlContent)})}}return this.schemaService.getSchemaForResource(document.uri,doc).then(function(schema){if(schema){var matchingSchemas=doc.getMatchingSchemas(schema.schema,node.start);var title_1=null;var markdownDescription_1=null;var markdownEnumValueDescription_1=null,enumValue_1=null;matchingSchemas.every(function(s){if(s.node===node&&!s.inverted&&s.schema){title_1=title_1||s.schema.title;markdownDescription_1=markdownDescription_1||s.schema.markdownDescription||toMarkdown(s.schema.description);if(s.schema.enum){var idx=s.schema.enum.indexOf(node.getValue());if(s.schema.markdownEnumDescriptions){markdownEnumValueDescription_1=s.schema.markdownEnumDescriptions[idx]}else if(s.schema.enumDescriptions){markdownEnumValueDescription_1=toMarkdown(s.schema.enumDescriptions[idx])}if(markdownEnumValueDescription_1){enumValue_1=s.schema.enum[idx];if(typeof enumValue_1!=="string"){enumValue_1=JSON.stringify(enumValue_1)}}}}return true});var result="";if(title_1){result=toMarkdown(title_1)}if(markdownDescription_1){if(result.length>0){result+="\n\n"}result+=markdownDescription_1}if(markdownEnumValueDescription_1){if(result.length>0){result+="\n\n"}result+="`"+toMarkdown(enumValue_1)+"`: "+markdownEnumValueDescription_1}return createHover([result])}return null})};return JSONHover}();function toMarkdown(plain){if(plain){var res=plain.replace(/([^\n\r])(\r?\n)([^\n\r])/gm,"$1\n\n$3");return res.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}return void 0}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"JSONValidation",function(){return JSONValidation});var _parser_jsonParser_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(49);var _vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(37);var _fillers_vscode_nls_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(46);var localize=_fillers_vscode_nls_js__WEBPACK_IMPORTED_MODULE_2__["loadMessageBundle"]();var JSONValidation=function(){function JSONValidation(jsonSchemaService,promiseConstructor){this.jsonSchemaService=jsonSchemaService;this.promise=promiseConstructor;this.validationEnabled=true}JSONValidation.prototype.configure=function(raw){if(raw){this.validationEnabled=raw.validate;this.commentSeverity=raw.allowComments?_parser_jsonParser_js__WEBPACK_IMPORTED_MODULE_0__["ProblemSeverity"].Ignore:_parser_jsonParser_js__WEBPACK_IMPORTED_MODULE_0__["ProblemSeverity"].Error}};JSONValidation.prototype.doValidation=function(textDocument,jsonDocument,documentSettings){var _this=this;if(!this.validationEnabled){return this.promise.resolve([])}var diagnostics=[];var added={};var addProblem=function(problem){if(problem.severity===_parser_jsonParser_js__WEBPACK_IMPORTED_MODULE_0__["ProblemSeverity"].Ignore){return}var signature=problem.location.start+" "+problem.location.end+" "+problem.message;if(!added[signature]){added[signature]=true;var range={start:textDocument.positionAt(problem.location.start),end:textDocument.positionAt(problem.location.end)};var severity=problem.severity===_parser_jsonParser_js__WEBPACK_IMPORTED_MODULE_0__["ProblemSeverity"].Error?_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_1__["DiagnosticSeverity"].Error:_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_1__["DiagnosticSeverity"].Warning;diagnostics.push({severity,range,message:problem.message})}};return this.jsonSchemaService.getSchemaForResource(textDocument.uri,jsonDocument).then(function(schema){var trailingCommaSeverity=documentSettings?documentSettings.trailingCommas:_parser_jsonParser_js__WEBPACK_IMPORTED_MODULE_0__["ProblemSeverity"].Error;var commentSeverity=documentSettings?documentSettings.comments:_this.commentSeverity;if(schema){if(schema.errors.length&&jsonDocument.root){var astRoot=jsonDocument.root;var property=astRoot.type==="object"?astRoot.getFirstProperty("$schema"):null;if(property){var node=property.value||property;addProblem({location:{start:node.start,end:node.end},message:schema.errors[0],severity:_parser_jsonParser_js__WEBPACK_IMPORTED_MODULE_0__["ProblemSeverity"].Warning})}else{addProblem({location:{start:astRoot.start,end:astRoot.start+1},message:schema.errors[0],severity:_parser_jsonParser_js__WEBPACK_IMPORTED_MODULE_0__["ProblemSeverity"].Warning})}}else{var semanticErrors=jsonDocument.validate(schema.schema);if(semanticErrors){semanticErrors.forEach(addProblem)}}if(schemaAllowsComments(schema.schema)){trailingCommaSeverity=commentSeverity=_parser_jsonParser_js__WEBPACK_IMPORTED_MODULE_0__["ProblemSeverity"].Ignore}}jsonDocument.syntaxErrors.forEach(function(p){if(p.code===_parser_jsonParser_js__WEBPACK_IMPORTED_MODULE_0__["ErrorCode"].TrailingComma){p.severity=trailingCommaSeverity}addProblem(p)});if(commentSeverity!==_parser_jsonParser_js__WEBPACK_IMPORTED_MODULE_0__["ProblemSeverity"].Ignore){var message_1=localize("InvalidCommentToken","Comments are not permitted in JSON.");jsonDocument.comments.forEach(function(c){addProblem({location:c,severity:commentSeverity,message:message_1})})}return diagnostics})};return JSONValidation}();function schemaAllowsComments(schemaRef){if(schemaRef&&typeof schemaRef==="object"){if(schemaRef.allowComments){return true}if(schemaRef.allOf){return schemaRef.allOf.some(schemaAllowsComments)}}return false}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"ErrorCode",function(){return ErrorCode});__webpack_require__.d(__webpack_exports__,"ProblemSeverity",function(){return ProblemSeverity});__webpack_require__.d(__webpack_exports__,"ASTNode",function(){return ASTNode});__webpack_require__.d(__webpack_exports__,"NullASTNode",function(){return NullASTNode});__webpack_require__.d(__webpack_exports__,"BooleanASTNode",function(){return BooleanASTNode});__webpack_require__.d(__webpack_exports__,"ArrayASTNode",function(){return ArrayASTNode});__webpack_require__.d(__webpack_exports__,"NumberASTNode",function(){return NumberASTNode});__webpack_require__.d(__webpack_exports__,"StringASTNode",function(){return StringASTNode});__webpack_require__.d(__webpack_exports__,"PropertyASTNode",function(){return PropertyASTNode});__webpack_require__.d(__webpack_exports__,"ObjectASTNode",function(){return ObjectASTNode});__webpack_require__.d(__webpack_exports__,"asSchema",function(){return asSchema});__webpack_require__.d(__webpack_exports__,"EnumMatch",function(){return EnumMatch});__webpack_require__.d(__webpack_exports__,"ValidationResult",function(){return ValidationResult});__webpack_require__.d(__webpack_exports__,"JSONDocument",function(){return JSONDocument});__webpack_require__.d(__webpack_exports__,"parse",function(){return parse});var _jsonc_parser_main_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(39);var _utils_objects_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(50);var _fillers_vscode_nls_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(46);var _vscode_uri_index_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(51);var __extends=undefined&&undefined.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var localize=_fillers_vscode_nls_js__WEBPACK_IMPORTED_MODULE_2__["loadMessageBundle"]();var ErrorCode;(function(ErrorCode){ErrorCode[ErrorCode["Undefined"]=0]="Undefined";ErrorCode[ErrorCode["EnumValueMismatch"]=1]="EnumValueMismatch";ErrorCode[ErrorCode["UnexpectedEndOfComment"]=257]="UnexpectedEndOfComment";ErrorCode[ErrorCode["UnexpectedEndOfString"]=258]="UnexpectedEndOfString";ErrorCode[ErrorCode["UnexpectedEndOfNumber"]=259]="UnexpectedEndOfNumber";ErrorCode[ErrorCode["InvalidUnicode"]=260]="InvalidUnicode";ErrorCode[ErrorCode["InvalidEscapeCharacter"]=261]="InvalidEscapeCharacter";ErrorCode[ErrorCode["InvalidCharacter"]=262]="InvalidCharacter";ErrorCode[ErrorCode["PropertyExpected"]=513]="PropertyExpected";ErrorCode[ErrorCode["CommaExpected"]=514]="CommaExpected";ErrorCode[ErrorCode["ColonExpected"]=515]="ColonExpected";ErrorCode[ErrorCode["ValueExpected"]=516]="ValueExpected";ErrorCode[ErrorCode["CommaOrCloseBacketExpected"]=517]="CommaOrCloseBacketExpected";ErrorCode[ErrorCode["CommaOrCloseBraceExpected"]=518]="CommaOrCloseBraceExpected";ErrorCode[ErrorCode["TrailingComma"]=519]="TrailingComma"})(ErrorCode||(ErrorCode={}));var colorHexPattern=/^#([0-9A-Fa-f]{3,4}|([0-9A-Fa-f]{2}){3,4})$/;var emailPattern=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;var ProblemSeverity;(function(ProblemSeverity){ProblemSeverity["Ignore"]="ignore";ProblemSeverity["Error"]="error";ProblemSeverity["Warning"]="warning"})(ProblemSeverity||(ProblemSeverity={}));var ASTNode=function(){function ASTNode(parent,type,location,start,end){this.type=type;this.location=location;this.start=start;this.end=end;this.parent=parent}ASTNode.prototype.getPath=function(){var path=this.parent?this.parent.getPath():[];if(this.location!==null){path.push(this.location)}return path};ASTNode.prototype.getChildNodes=function(){return[]};ASTNode.prototype.getLastChild=function(){return null};ASTNode.prototype.getValue=function(){return};ASTNode.prototype.contains=function(offset,includeRightBound){if(includeRightBound===void 0){includeRightBound=false}return offset>=this.start&&offset<this.end||includeRightBound&&offset===this.end};ASTNode.prototype.toString=function(){return"type: "+this.type+" ("+this.start+"/"+this.end+")"+(this.parent?" parent: {"+this.parent.toString()+"}":"")};ASTNode.prototype.visit=function(visitor){return visitor(this)};ASTNode.prototype.getNodeFromOffset=function(offset){var findNode=function(node){if(offset>=node.start&&offset<node.end){var children=node.getChildNodes();for(var i=0;i<children.length&&children[i].start<=offset;i++){var item=findNode(children[i]);if(item){return item}}return node}return null};return findNode(this)};ASTNode.prototype.getNodeFromOffsetEndInclusive=function(offset){var findNode=function(node){if(offset>=node.start&&offset<=node.end){var children=node.getChildNodes();for(var i=0;i<children.length&&children[i].start<=offset;i++){var item=findNode(children[i]);if(item){return item}}return node}return null};return findNode(this)};ASTNode.prototype.validate=function(schema,validationResult,matchingSchemas){var _this=this;if(!matchingSchemas.include(this)){return}if(Array.isArray(schema.type)){if(schema.type.indexOf(this.type)===-1){validationResult.problems.push({location:{start:this.start,end:this.end},severity:ProblemSeverity.Warning,message:schema.errorMessage||localize("typeArrayMismatchWarning","Incorrect type. Expected one of {0}.",schema.type.join(", "))})}}else if(schema.type){if(this.type!==schema.type){validationResult.problems.push({location:{start:this.start,end:this.end},severity:ProblemSeverity.Warning,message:schema.errorMessage||localize("typeMismatchWarning",'Incorrect type. Expected "{0}".',schema.type)})}}if(Array.isArray(schema.allOf)){schema.allOf.forEach(function(subSchemaRef){_this.validate(asSchema(subSchemaRef),validationResult,matchingSchemas)})}var notSchema=asSchema(schema.not);if(notSchema){var subValidationResult=new ValidationResult;var subMatchingSchemas=matchingSchemas.newSub();this.validate(notSchema,subValidationResult,subMatchingSchemas);if(!subValidationResult.hasProblems()){validationResult.problems.push({location:{start:this.start,end:this.end},severity:ProblemSeverity.Warning,message:localize("notSchemaWarning","Matches a schema that is not allowed.")})}subMatchingSchemas.schemas.forEach(function(ms){ms.inverted=!ms.inverted;matchingSchemas.add(ms)})}var testAlternatives=function(alternatives,maxOneMatch){var matches=[];var bestMatch=null;alternatives.forEach(function(subSchemaRef){var subSchema=asSchema(subSchemaRef);var subValidationResult=new ValidationResult;var subMatchingSchemas=matchingSchemas.newSub();_this.validate(subSchema,subValidationResult,subMatchingSchemas);if(!subValidationResult.hasProblems()){matches.push(subSchema)}if(!bestMatch){bestMatch={schema:subSchema,validationResult:subValidationResult,matchingSchemas:subMatchingSchemas}}else{if(!maxOneMatch&&!subValidationResult.hasProblems()&&!bestMatch.validationResult.hasProblems()){bestMatch.matchingSchemas.merge(subMatchingSchemas);bestMatch.validationResult.propertiesMatches+=subValidationResult.propertiesMatches;bestMatch.validationResult.propertiesValueMatches+=subValidationResult.propertiesValueMatches}else{var compareResult=subValidationResult.compare(bestMatch.validationResult);if(compareResult>0){bestMatch={schema:subSchema,validationResult:subValidationResult,matchingSchemas:subMatchingSchemas}}else if(compareResult===0){bestMatch.matchingSchemas.merge(subMatchingSchemas);bestMatch.validationResult.mergeEnumValues(subValidationResult)}}}});if(matches.length>1&&maxOneMatch){validationResult.problems.push({location:{start:_this.start,end:_this.start+1},severity:ProblemSeverity.Warning,message:localize("oneOfWarning","Matches multiple schemas when only one must validate.")})}if(bestMatch!==null){validationResult.merge(bestMatch.validationResult);validationResult.propertiesMatches+=bestMatch.validationResult.propertiesMatches;validationResult.propertiesValueMatches+=bestMatch.validationResult.propertiesValueMatches;matchingSchemas.merge(bestMatch.matchingSchemas)}return matches.length};if(Array.isArray(schema.anyOf)){testAlternatives(schema.anyOf,false)}if(Array.isArray(schema.oneOf)){testAlternatives(schema.oneOf,true)}if(Array.isArray(schema.enum)){var val=this.getValue();var enumValueMatch=false;for(var _i=0,_a=schema.enum;_i<_a.length;_i++){var e=_a[_i];if(_utils_objects_js__WEBPACK_IMPORTED_MODULE_1__["equals"](val,e)){enumValueMatch=true;break}}validationResult.enumValues=schema.enum;validationResult.enumValueMatch=enumValueMatch;if(!enumValueMatch){validationResult.problems.push({location:{start:this.start,end:this.end},severity:ProblemSeverity.Warning,code:ErrorCode.EnumValueMismatch,message:schema.errorMessage||localize("enumWarning","Value is not accepted. Valid values: {0}.",schema.enum.map(function(v){return JSON.stringify(v)}).join(", "))})}}if(schema.const){var val=this.getValue();if(!_utils_objects_js__WEBPACK_IMPORTED_MODULE_1__["equals"](val,schema.const)){validationResult.problems.push({location:{start:this.start,end:this.end},severity:ProblemSeverity.Warning,code:ErrorCode.EnumValueMismatch,message:schema.errorMessage||localize("constWarning","Value must be {0}.",JSON.stringify(schema.const))});validationResult.enumValueMatch=false}else{validationResult.enumValueMatch=true}validationResult.enumValues=[schema.const]}if(schema.deprecationMessage&&this.parent){validationResult.problems.push({location:{start:this.parent.start,end:this.parent.end},severity:ProblemSeverity.Warning,message:schema.deprecationMessage})}matchingSchemas.add({node:this,schema})};return ASTNode}();var NullASTNode=function(_super){__extends(NullASTNode,_super);function NullASTNode(parent,name,start,end){return _super.call(this,parent,"null",name,start,end)||this}NullASTNode.prototype.getValue=function(){return null};return NullASTNode}(ASTNode);var BooleanASTNode=function(_super){__extends(BooleanASTNode,_super);function BooleanASTNode(parent,name,value,start,end){var _this=_super.call(this,parent,"boolean",name,start,end)||this;_this.value=value;return _this}BooleanASTNode.prototype.getValue=function(){return this.value};return BooleanASTNode}(ASTNode);var ArrayASTNode=function(_super){__extends(ArrayASTNode,_super);function ArrayASTNode(parent,name,start,end){var _this=_super.call(this,parent,"array",name,start,end)||this;_this.items=[];return _this}ArrayASTNode.prototype.getChildNodes=function(){return this.items};ArrayASTNode.prototype.getLastChild=function(){return this.items[this.items.length-1]};ArrayASTNode.prototype.getValue=function(){return this.items.map(function(v){return v.getValue()})};ArrayASTNode.prototype.addItem=function(item){if(item){this.items.push(item);return true}return false};ArrayASTNode.prototype.visit=function(visitor){var ctn=visitor(this);for(var i=0;i<this.items.length&&ctn;i++){ctn=this.items[i].visit(visitor)}return ctn};ArrayASTNode.prototype.validate=function(schema,validationResult,matchingSchemas){var _this=this;if(!matchingSchemas.include(this)){return}_super.prototype.validate.call(this,schema,validationResult,matchingSchemas);if(Array.isArray(schema.items)){var subSchemas_1=schema.items;subSchemas_1.forEach(function(subSchemaRef,index){var subSchema=asSchema(subSchemaRef);var itemValidationResult=new ValidationResult;var item=_this.items[index];if(item){item.validate(subSchema,itemValidationResult,matchingSchemas);validationResult.mergePropertyMatch(itemValidationResult)}else if(_this.items.length>=subSchemas_1.length){validationResult.propertiesValueMatches++}});if(this.items.length>subSchemas_1.length){if(typeof schema.additionalItems==="object"){for(var i=subSchemas_1.length;i<this.items.length;i++){var itemValidationResult=new ValidationResult;this.items[i].validate(schema.additionalItems,itemValidationResult,matchingSchemas);validationResult.mergePropertyMatch(itemValidationResult)}}else if(schema.additionalItems===false){validationResult.problems.push({location:{start:this.start,end:this.end},severity:ProblemSeverity.Warning,message:localize("additionalItemsWarning","Array has too many items according to schema. Expected {0} or fewer.",subSchemas_1.length)})}}}else{var itemSchema_1=asSchema(schema.items);if(itemSchema_1){this.items.forEach(function(item){var itemValidationResult=new ValidationResult;item.validate(itemSchema_1,itemValidationResult,matchingSchemas);validationResult.mergePropertyMatch(itemValidationResult)})}}var containsSchema=asSchema(schema.contains);if(containsSchema){var doesContain=this.items.some(function(item){var itemValidationResult=new ValidationResult;item.validate(containsSchema,itemValidationResult,NoOpSchemaCollector.instance);return!itemValidationResult.hasProblems()});if(!doesContain){validationResult.problems.push({location:{start:this.start,end:this.end},severity:ProblemSeverity.Warning,message:schema.errorMessage||localize("requiredItemMissingWarning","Array does not contain required item.",schema.minItems)})}}if(schema.minItems&&this.items.length<schema.minItems){validationResult.problems.push({location:{start:this.start,end:this.end},severity:ProblemSeverity.Warning,message:localize("minItemsWarning","Array has too few items. Expected {0} or more.",schema.minItems)})}if(schema.maxItems&&this.items.length>schema.maxItems){validationResult.problems.push({location:{start:this.start,end:this.end},severity:ProblemSeverity.Warning,message:localize("maxItemsWarning","Array has too many items. Expected {0} or fewer.",schema.minItems)})}if(schema.uniqueItems===true){var values_1=this.items.map(function(node){return node.getValue()});var duplicates=values_1.some(function(value,index){return index!==values_1.lastIndexOf(value)});if(duplicates){validationResult.problems.push({location:{start:this.start,end:this.end},severity:ProblemSeverity.Warning,message:localize("uniqueItemsWarning","Array has duplicate items.")})}}};return ArrayASTNode}(ASTNode);var NumberASTNode=function(_super){__extends(NumberASTNode,_super);function NumberASTNode(parent,name,start,end){var _this=_super.call(this,parent,"number",name,start,end)||this;_this.isInteger=true;_this.value=Number.NaN;return _this}NumberASTNode.prototype.getValue=function(){return this.value};NumberASTNode.prototype.validate=function(schema,validationResult,matchingSchemas){if(!matchingSchemas.include(this)){return}var typeIsInteger=false;if(schema.type==="integer"||Array.isArray(schema.type)&&schema.type.indexOf("integer")!==-1){typeIsInteger=true}if(typeIsInteger&&this.isInteger===true){this.type="integer"}_super.prototype.validate.call(this,schema,validationResult,matchingSchemas);this.type="number";var val=this.getValue();if(typeof schema.multipleOf==="number"){if(val%schema.multipleOf!==0){validationResult.problems.push({location:{start:this.start,end:this.end},severity:ProblemSeverity.Warning,message:localize("multipleOfWarning","Value is not divisible by {0}.",schema.multipleOf)})}}function getExclusiveLimit(limit,exclusive){if(typeof exclusive==="number"){return exclusive}if(typeof exclusive==="boolean"&&exclusive){return limit}return void 0}function getLimit(limit,exclusive){if(typeof exclusive!=="boolean"||!exclusive){return limit}return void 0}var exclusiveMinimum=getExclusiveLimit(schema.minimum,schema.exclusiveMinimum);if(typeof exclusiveMinimum==="number"&&val<=exclusiveMinimum){validationResult.problems.push({location:{start:this.start,end:this.end},severity:ProblemSeverity.Warning,message:localize("exclusiveMinimumWarning","Value is below the exclusive minimum of {0}.",exclusiveMinimum)})}var exclusiveMaximum=getExclusiveLimit(schema.maximum,schema.exclusiveMaximum);if(typeof exclusiveMaximum==="number"&&val>=exclusiveMaximum){validationResult.problems.push({location:{start:this.start,end:this.end},severity:ProblemSeverity.Warning,message:localize("exclusiveMaximumWarning","Value is above the exclusive maximum of {0}.",exclusiveMaximum)})}var minimum=getLimit(schema.minimum,schema.exclusiveMinimum);if(typeof minimum==="number"&&val<minimum){validationResult.problems.push({location:{start:this.start,end:this.end},severity:ProblemSeverity.Warning,message:localize("minimumWarning","Value is below the minimum of {0}.",minimum)})}var maximum=getLimit(schema.maximum,schema.exclusiveMaximum);if(typeof maximum==="number"&&val>maximum){validationResult.problems.push({location:{start:this.start,end:this.end},severity:ProblemSeverity.Warning,message:localize("maximumWarning","Value is above the maximum of {0}.",maximum)})}};return NumberASTNode}(ASTNode);var StringASTNode=function(_super){__extends(StringASTNode,_super);function StringASTNode(parent,name,isKey,start,end){var _this=_super.call(this,parent,"string",name,start,end)||this;_this.isKey=isKey;_this.value="";return _this}StringASTNode.prototype.getValue=function(){return this.value};StringASTNode.prototype.validate=function(schema,validationResult,matchingSchemas){if(!matchingSchemas.include(this)){return}_super.prototype.validate.call(this,schema,validationResult,matchingSchemas);if(schema.minLength&&this.value.length<schema.minLength){validationResult.problems.push({location:{start:this.start,end:this.end},severity:ProblemSeverity.Warning,message:localize("minLengthWarning","String is shorter than the minimum length of {0}.",schema.minLength)})}if(schema.maxLength&&this.value.length>schema.maxLength){validationResult.problems.push({location:{start:this.start,end:this.end},severity:ProblemSeverity.Warning,message:localize("maxLengthWarning","String is longer than the maximum length of {0}.",schema.maxLength)})}if(schema.pattern){var regex=new RegExp(schema.pattern);if(!regex.test(this.value)){validationResult.problems.push({location:{start:this.start,end:this.end},severity:ProblemSeverity.Warning,message:schema.patternErrorMessage||schema.errorMessage||localize("patternWarning",'String does not match the pattern of "{0}".',schema.pattern)})}}if(schema.format){switch(schema.format){case"uri":case"uri-reference":{var errorMessage=void 0;if(!this.value){errorMessage=localize("uriEmpty","URI expected.")}else{try{var uri=_vscode_uri_index_js__WEBPACK_IMPORTED_MODULE_3__["default"].parse(this.value);if(!uri.scheme&&schema.format==="uri"){errorMessage=localize("uriSchemeMissing","URI with a scheme is expected.")}}catch(e){errorMessage=e.message}}if(errorMessage){validationResult.problems.push({location:{start:this.start,end:this.end},severity:ProblemSeverity.Warning,message:schema.patternErrorMessage||schema.errorMessage||localize("uriFormatWarning","String is not a URI: {0}",errorMessage)})}}break;case"email":{if(!this.value.match(emailPattern)){validationResult.problems.push({location:{start:this.start,end:this.end},severity:ProblemSeverity.Warning,message:schema.patternErrorMessage||schema.errorMessage||localize("emailFormatWarning","String is not an e-mail address.")})}}break;case"color-hex":{if(!this.value.match(colorHexPattern)){validationResult.problems.push({location:{start:this.start,end:this.end},severity:ProblemSeverity.Warning,message:schema.patternErrorMessage||schema.errorMessage||localize("colorHexFormatWarning","Invalid color format. Use #RGB, #RGBA, #RRGGBB or #RRGGBBAA.")})}}break;default:}}};return StringASTNode}(ASTNode);var PropertyASTNode=function(_super){__extends(PropertyASTNode,_super);function PropertyASTNode(parent,key){var _this=_super.call(this,parent,"property",null,key.start)||this;_this.key=key;key.parent=_this;key.location=key.value;_this.colonOffset=-1;return _this}PropertyASTNode.prototype.getChildNodes=function(){return this.value?[this.key,this.value]:[this.key]};PropertyASTNode.prototype.getLastChild=function(){return this.value};PropertyASTNode.prototype.setValue=function(value){this.value=value;return value!==null};PropertyASTNode.prototype.visit=function(visitor){return visitor(this)&&this.key.visit(visitor)&&this.value&&this.value.visit(visitor)};PropertyASTNode.prototype.validate=function(schema,validationResult,matchingSchemas){if(!matchingSchemas.include(this)){return}if(this.value){this.value.validate(schema,validationResult,matchingSchemas)}};return PropertyASTNode}(ASTNode);var ObjectASTNode=function(_super){__extends(ObjectASTNode,_super);function ObjectASTNode(parent,name,start,end){var _this=_super.call(this,parent,"object",name,start,end)||this;_this.properties=[];return _this}ObjectASTNode.prototype.getChildNodes=function(){return this.properties};ObjectASTNode.prototype.getLastChild=function(){return this.properties[this.properties.length-1]};ObjectASTNode.prototype.addProperty=function(node){if(!node){return false}this.properties.push(node);return true};ObjectASTNode.prototype.getFirstProperty=function(key){for(var i=0;i<this.properties.length;i++){if(this.properties[i].key.value===key){return this.properties[i]}}return null};ObjectASTNode.prototype.getKeyList=function(){return this.properties.map(function(p){return p.key.getValue()})};ObjectASTNode.prototype.getValue=function(){var value=Object.create(null);this.properties.forEach(function(p){var v=p.value&&p.value.getValue();if(typeof v!=="undefined"){value[p.key.getValue()]=v}});return value};ObjectASTNode.prototype.visit=function(visitor){var ctn=visitor(this);for(var i=0;i<this.properties.length&&ctn;i++){ctn=this.properties[i].visit(visitor)}return ctn};ObjectASTNode.prototype.validate=function(schema,validationResult,matchingSchemas){var _this=this;if(!matchingSchemas.include(this)){return}_super.prototype.validate.call(this,schema,validationResult,matchingSchemas);var seenKeys=Object.create(null);var unprocessedProperties=[];this.properties.forEach(function(node){var key=node.key.value;seenKeys[key]=node.value;unprocessedProperties.push(key)});if(Array.isArray(schema.required)){schema.required.forEach(function(propertyName){if(!seenKeys[propertyName]){var key=_this.parent&&_this.parent&&_this.parent.key;var location=key?{start:key.start,end:key.end}:{start:_this.start,end:_this.start+1};validationResult.problems.push({location,severity:ProblemSeverity.Warning,message:localize("MissingRequiredPropWarning",'Missing property "{0}".',propertyName)})}})}var propertyProcessed=function(prop){var index=unprocessedProperties.indexOf(prop);while(index>=0){unprocessedProperties.splice(index,1);index=unprocessedProperties.indexOf(prop)}};if(schema.properties){Object.keys(schema.properties).forEach(function(propertyName){propertyProcessed(propertyName);var propertySchema=schema.properties[propertyName];var child=seenKeys[propertyName];if(child){if(typeof propertySchema==="boolean"){if(!propertySchema){var propertyNode=child.parent;validationResult.problems.push({location:{start:propertyNode.key.start,end:propertyNode.key.end},severity:ProblemSeverity.Warning,message:schema.errorMessage||localize("DisallowedExtraPropWarning","Property {0} is not allowed.",propertyName)})}else{validationResult.propertiesMatches++;validationResult.propertiesValueMatches++}}else{var propertyValidationResult=new ValidationResult;child.validate(propertySchema,propertyValidationResult,matchingSchemas);validationResult.mergePropertyMatch(propertyValidationResult)}}})}if(schema.patternProperties){Object.keys(schema.patternProperties).forEach(function(propertyPattern){var regex=new RegExp(propertyPattern);unprocessedProperties.slice(0).forEach(function(propertyName){if(regex.test(propertyName)){propertyProcessed(propertyName);var child=seenKeys[propertyName];if(child){var propertySchema=schema.patternProperties[propertyPattern];if(typeof propertySchema==="boolean"){if(!propertySchema){var propertyNode=child.parent;validationResult.problems.push({location:{start:propertyNode.key.start,end:propertyNode.key.end},severity:ProblemSeverity.Warning,message:schema.errorMessage||localize("DisallowedExtraPropWarning","Property {0} is not allowed.",propertyName)})}else{validationResult.propertiesMatches++;validationResult.propertiesValueMatches++}}else{var propertyValidationResult=new ValidationResult;child.validate(propertySchema,propertyValidationResult,matchingSchemas);validationResult.mergePropertyMatch(propertyValidationResult)}}}})})}if(typeof schema.additionalProperties==="object"){unprocessedProperties.forEach(function(propertyName){var child=seenKeys[propertyName];if(child){var propertyValidationResult=new ValidationResult;child.validate(schema.additionalProperties,propertyValidationResult,matchingSchemas);validationResult.mergePropertyMatch(propertyValidationResult)}})}else if(schema.additionalProperties===false){if(unprocessedProperties.length>0){unprocessedProperties.forEach(function(propertyName){var child=seenKeys[propertyName];if(child){var propertyNode=child.parent;validationResult.problems.push({location:{start:propertyNode.key.start,end:propertyNode.key.end},severity:ProblemSeverity.Warning,message:schema.errorMessage||localize("DisallowedExtraPropWarning","Property {0} is not allowed.",propertyName)})}})}}if(schema.maxProperties){if(this.properties.length>schema.maxProperties){validationResult.problems.push({location:{start:this.start,end:this.end},severity:ProblemSeverity.Warning,message:localize("MaxPropWarning","Object has more properties than limit of {0}.",schema.maxProperties)})}}if(schema.minProperties){if(this.properties.length<schema.minProperties){validationResult.problems.push({location:{start:this.start,end:this.end},severity:ProblemSeverity.Warning,message:localize("MinPropWarning","Object has fewer properties than the required number of {0}",schema.minProperties)})}}if(schema.dependencies){Object.keys(schema.dependencies).forEach(function(key){var prop=seenKeys[key];if(prop){var propertyDep=schema.dependencies[key];if(Array.isArray(propertyDep)){propertyDep.forEach(function(requiredProp){if(!seenKeys[requiredProp]){validationResult.problems.push({location:{start:_this.start,end:_this.end},severity:ProblemSeverity.Warning,message:localize("RequiredDependentPropWarning","Object is missing property {0} required by property {1}.",requiredProp,key)})}else{validationResult.propertiesValueMatches++}})}else{var propertySchema=asSchema(propertyDep);if(propertySchema){var propertyValidationResult=new ValidationResult;_this.validate(propertySchema,propertyValidationResult,matchingSchemas);validationResult.mergePropertyMatch(propertyValidationResult)}}}})}var propertyNames=asSchema(schema.propertyNames);if(propertyNames){this.properties.forEach(function(f){var key=f.key;if(key){key.validate(propertyNames,validationResult,NoOpSchemaCollector.instance)}})}};return ObjectASTNode}(ASTNode);function asSchema(schema){if(typeof schema==="boolean"){return schema?{}:{not:{}}}return schema}var EnumMatch;(function(EnumMatch){EnumMatch[EnumMatch["Key"]=0]="Key";EnumMatch[EnumMatch["Enum"]=1]="Enum"})(EnumMatch||(EnumMatch={}));var SchemaCollector=function(){function SchemaCollector(focusOffset,exclude){if(focusOffset===void 0){focusOffset=-1}if(exclude===void 0){exclude=null}this.focusOffset=focusOffset;this.exclude=exclude;this.schemas=[]}SchemaCollector.prototype.add=function(schema){this.schemas.push(schema)};SchemaCollector.prototype.merge=function(other){(_a=this.schemas).push.apply(_a,other.schemas);var _a};SchemaCollector.prototype.include=function(node){return(this.focusOffset===-1||node.contains(this.focusOffset))&&node!==this.exclude};SchemaCollector.prototype.newSub=function(){return new SchemaCollector(-1,this.exclude)};return SchemaCollector}();var NoOpSchemaCollector=function(){function NoOpSchemaCollector(){}Object.defineProperty(NoOpSchemaCollector.prototype,"schemas",{get:function(){return[]},enumerable:true,configurable:true});NoOpSchemaCollector.prototype.add=function(schema){};NoOpSchemaCollector.prototype.merge=function(other){};NoOpSchemaCollector.prototype.include=function(node){return true};NoOpSchemaCollector.prototype.newSub=function(){return this};NoOpSchemaCollector.instance=new NoOpSchemaCollector;return NoOpSchemaCollector}();var ValidationResult=function(){function ValidationResult(){this.problems=[];this.propertiesMatches=0;this.propertiesValueMatches=0;this.primaryValueMatches=0;this.enumValueMatch=false;this.enumValues=null}ValidationResult.prototype.hasProblems=function(){return!!this.problems.length};ValidationResult.prototype.mergeAll=function(validationResults){var _this=this;validationResults.forEach(function(validationResult){_this.merge(validationResult)})};ValidationResult.prototype.merge=function(validationResult){this.problems=this.problems.concat(validationResult.problems)};ValidationResult.prototype.mergeEnumValues=function(validationResult){if(!this.enumValueMatch&&!validationResult.enumValueMatch&&this.enumValues&&validationResult.enumValues){this.enumValues=this.enumValues.concat(validationResult.enumValues);for(var _i=0,_a=this.problems;_i<_a.length;_i++){var error=_a[_i];if(error.code===ErrorCode.EnumValueMismatch){error.message=localize("enumWarning","Value is not accepted. Valid values: {0}.",this.enumValues.map(function(v){return JSON.stringify(v)}).join(", "))}}}};ValidationResult.prototype.mergePropertyMatch=function(propertyValidationResult){this.merge(propertyValidationResult);this.propertiesMatches++;if(propertyValidationResult.enumValueMatch||!propertyValidationResult.hasProblems()&&propertyValidationResult.propertiesMatches){this.propertiesValueMatches++}if(propertyValidationResult.enumValueMatch&&propertyValidationResult.enumValues&&propertyValidationResult.enumValues.length===1){this.primaryValueMatches++}};ValidationResult.prototype.compare=function(other){var hasProblems=this.hasProblems();if(hasProblems!==other.hasProblems()){return hasProblems?-1:1}if(this.enumValueMatch!==other.enumValueMatch){return other.enumValueMatch?-1:1}if(this.primaryValueMatches!==other.primaryValueMatches){return this.primaryValueMatches-other.primaryValueMatches}if(this.propertiesValueMatches!==other.propertiesValueMatches){return this.propertiesValueMatches-other.propertiesValueMatches}return this.propertiesMatches-other.propertiesMatches};return ValidationResult}();var JSONDocument=function(){function JSONDocument(root,syntaxErrors,comments){if(syntaxErrors===void 0){syntaxErrors=[]}if(comments===void 0){comments=[]}this.root=root;this.syntaxErrors=syntaxErrors;this.comments=comments}JSONDocument.prototype.getNodeFromOffset=function(offset){return this.root&&this.root.getNodeFromOffset(offset)};JSONDocument.prototype.getNodeFromOffsetEndInclusive=function(offset){return this.root&&this.root.getNodeFromOffsetEndInclusive(offset)};JSONDocument.prototype.visit=function(visitor){if(this.root){this.root.visit(visitor)}};JSONDocument.prototype.validate=function(schema){if(this.root&&schema){var validationResult=new ValidationResult;this.root.validate(schema,validationResult,NoOpSchemaCollector.instance);return validationResult.problems}return null};JSONDocument.prototype.getMatchingSchemas=function(schema,focusOffset,exclude){if(focusOffset===void 0){focusOffset=-1}if(exclude===void 0){exclude=null}var matchingSchemas=new SchemaCollector(focusOffset,exclude);if(this.root&&schema){this.root.validate(schema,new ValidationResult,matchingSchemas)}return matchingSchemas.schemas};return JSONDocument}();function parse(textDocument,config){var problems=[];var text=textDocument.getText();var scanner=_jsonc_parser_main_js__WEBPACK_IMPORTED_MODULE_0__["createScanner"](text,false);var comments=config&&config.collectComments?[]:void 0;function _scanNext(){while(true){var token_1=scanner.scan();_checkScanError();switch(token_1){case 12:case 13:if(Array.isArray(comments)){comments.push({start:scanner.getTokenOffset(),end:scanner.getTokenOffset()+scanner.getTokenLength()})}break;case 15:case 14:break;default:return token_1}}}function _accept(token){if(scanner.getToken()===token){_scanNext();return true}return false}function _errorAtRange(message,code,location){if(problems.length===0||problems[problems.length-1].location.start!==location.start){problems.push({message,location,code,severity:ProblemSeverity.Error})}}function _error(message,code,node,skipUntilAfter,skipUntil){if(node===void 0){node=null}if(skipUntilAfter===void 0){skipUntilAfter=[]}if(skipUntil===void 0){skipUntil=[]}var start=scanner.getTokenOffset();var end=scanner.getTokenOffset()+scanner.getTokenLength();if(start===end&&start>0){start--;while(start>0&&/\s/.test(text.charAt(start))){start--}end=start+1}_errorAtRange(message,code,{start,end});if(node){_finalize(node,false)}if(skipUntilAfter.length+skipUntil.length>0){var token_2=scanner.getToken();while(token_2!==17){if(skipUntilAfter.indexOf(token_2)!==-1){_scanNext();break}else if(skipUntil.indexOf(token_2)!==-1){break}token_2=_scanNext()}}return node}function _checkScanError(){switch(scanner.getTokenError()){case 4:_error(localize("InvalidUnicode","Invalid unicode sequence in string."),ErrorCode.InvalidUnicode);return true;case 5:_error(localize("InvalidEscapeCharacter","Invalid escape character in string."),ErrorCode.InvalidEscapeCharacter);return true;case 3:_error(localize("UnexpectedEndOfNumber","Unexpected end of number."),ErrorCode.UnexpectedEndOfNumber);return true;case 1:_error(localize("UnexpectedEndOfComment","Unexpected end of comment."),ErrorCode.UnexpectedEndOfComment);return true;case 2:_error(localize("UnexpectedEndOfString","Unexpected end of string."),ErrorCode.UnexpectedEndOfString);return true;case 6:_error(localize("InvalidCharacter","Invalid characters in string. Control characters must be escaped."),ErrorCode.InvalidCharacter);return true}return false}function _finalize(node,scanNext){node.end=scanner.getTokenOffset()+scanner.getTokenLength();if(scanNext){_scanNext()}return node}function _parseArray(parent,name){if(scanner.getToken()!==3){return null}var node=new ArrayASTNode(parent,name,scanner.getTokenOffset());_scanNext();var count=0;var needsComma=false;while(scanner.getToken()!==4&&scanner.getToken()!==17){if(scanner.getToken()===5){if(!needsComma){_error(localize("ValueExpected","Value expected"),ErrorCode.ValueExpected)}var commaOffset=scanner.getTokenOffset();_scanNext();if(scanner.getToken()===4){if(needsComma){_errorAtRange(localize("TrailingComma","Trailing comma"),ErrorCode.TrailingComma,{start:commaOffset,end:commaOffset+1})}continue}}else if(needsComma){_error(localize("ExpectedComma","Expected comma"),ErrorCode.CommaExpected)}if(!node.addItem(_parseValue(node,count++))){_error(localize("PropertyExpected","Value expected"),ErrorCode.ValueExpected,null,[],[4,5])}needsComma=true}if(scanner.getToken()!==4){return _error(localize("ExpectedCloseBracket","Expected comma or closing bracket"),ErrorCode.CommaOrCloseBacketExpected,node)}return _finalize(node,true)}function _parseProperty(parent,keysSeen){var key=_parseString(null,null,true);if(!key){if(scanner.getToken()===16){_error(localize("DoubleQuotesExpected","Property keys must be doublequoted"),ErrorCode.Undefined);key=new StringASTNode(null,null,true,scanner.getTokenOffset(),scanner.getTokenOffset()+scanner.getTokenLength());key.value=scanner.getTokenValue();_scanNext()}else{return null}}var node=new PropertyASTNode(parent,key);var seen=keysSeen[key.value];if(seen){problems.push({location:{start:node.key.start,end:node.key.end},message:localize("DuplicateKeyWarning","Duplicate object key"),code:ErrorCode.Undefined,severity:ProblemSeverity.Warning});if(seen instanceof PropertyASTNode){problems.push({location:{start:seen.key.start,end:seen.key.end},message:localize("DuplicateKeyWarning","Duplicate object key"),code:ErrorCode.Undefined,severity:ProblemSeverity.Warning})}keysSeen[key.value]=true}else{keysSeen[key.value]=node}if(scanner.getToken()===6){node.colonOffset=scanner.getTokenOffset();_scanNext()}else{_error(localize("ColonExpected","Colon expected"),ErrorCode.ColonExpected);if(scanner.getToken()===10&&textDocument.positionAt(key.end).line<textDocument.positionAt(scanner.getTokenOffset()).line){node.end=key.end;return node}}if(!node.setValue(_parseValue(node,key.value))){return _error(localize("ValueExpected","Value expected"),ErrorCode.ValueExpected,node,[],[2,5])}node.end=node.value.end;return node}function _parseObject(parent,name){if(scanner.getToken()!==1){return null}var node=new ObjectASTNode(parent,name,scanner.getTokenOffset());var keysSeen=Object.create(null);_scanNext();var needsComma=false;while(scanner.getToken()!==2&&scanner.getToken()!==17){if(scanner.getToken()===5){if(!needsComma){_error(localize("PropertyExpected","Property expected"),ErrorCode.PropertyExpected)}var commaOffset=scanner.getTokenOffset();_scanNext();if(scanner.getToken()===2){if(needsComma){_errorAtRange(localize("TrailingComma","Trailing comma"),ErrorCode.TrailingComma,{start:commaOffset,end:commaOffset+1})}continue}}else if(needsComma){_error(localize("ExpectedComma","Expected comma"),ErrorCode.CommaExpected)}if(!node.addProperty(_parseProperty(node,keysSeen))){_error(localize("PropertyExpected","Property expected"),ErrorCode.PropertyExpected,null,[],[2,5])}needsComma=true}if(scanner.getToken()!==2){return _error(localize("ExpectedCloseBrace","Expected comma or closing brace"),ErrorCode.CommaOrCloseBraceExpected,node)}return _finalize(node,true)}function _parseString(parent,name,isKey){if(scanner.getToken()!==10){return null}var node=new StringASTNode(parent,name,isKey,scanner.getTokenOffset());node.value=scanner.getTokenValue();return _finalize(node,true)}function _parseNumber(parent,name){if(scanner.getToken()!==11){return null}var node=new NumberASTNode(parent,name,scanner.getTokenOffset());if(scanner.getTokenError()===0){var tokenValue=scanner.getTokenValue();try{var numberValue=JSON.parse(tokenValue);if(typeof numberValue!=="number"){return _error(localize("InvalidNumberFormat","Invalid number format."),ErrorCode.Undefined,node)}node.value=numberValue}catch(e){return _error(localize("InvalidNumberFormat","Invalid number format."),ErrorCode.Undefined,node)}node.isInteger=tokenValue.indexOf(".")===-1}return _finalize(node,true)}function _parseLiteral(parent,name){var node;switch(scanner.getToken()){case 7:node=new NullASTNode(parent,name,scanner.getTokenOffset());break;case 8:node=new BooleanASTNode(parent,name,true,scanner.getTokenOffset());break;case 9:node=new BooleanASTNode(parent,name,false,scanner.getTokenOffset());break;default:return null}return _finalize(node,true)}function _parseValue(parent,name){return _parseArray(parent,name)||_parseObject(parent,name)||_parseString(parent,name,false)||_parseNumber(parent,name)||_parseLiteral(parent,name)}var _root=null;var token=_scanNext();if(token!==17){_root=_parseValue(null,null);if(!_root){_error(localize("Invalid symbol","Expected a JSON object, array or literal."),ErrorCode.Undefined)}else if(scanner.getToken()!==17){_error(localize("End of file expected","End of file expected."),ErrorCode.Undefined)}}return new JSONDocument(_root,problems,comments)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"equals",function(){return equals});function equals(one,other){if(one===other){return true}if(one===null||one===undefined||other===null||other===undefined){return false}if(typeof one!==typeof other){return false}if(typeof one!=="object"){return false}if(Array.isArray(one)!==Array.isArray(other)){return false}var i,key;if(Array.isArray(one)){if(one.length!==other.length){return false}for(i=0;i<one.length;i++){if(!equals(one[i],other[i])){return false}}}else{var oneKeys=[];for(key in one){oneKeys.push(key)}oneKeys.sort();var otherKeys=[];for(key in other){otherKeys.push(key)}otherKeys.sort();if(!equals(oneKeys,otherKeys)){return false}for(i=0;i<oneKeys.length;i++){if(!equals(one[oneKeys[i]],other[oneKeys[i]])){return false}}}return true}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);(function(process){function _encode(ch){return"%"+ch.charCodeAt(0).toString(16).toUpperCase()}function encodeURIComponent2(str){return encodeURIComponent(str).replace(/[!'()*]/g,_encode)}function encodeNoop(str){return str.replace(/[#?]/,_encode)}var URI=function(){function URI(){this._scheme=URI._empty;this._authority=URI._empty;this._path=URI._empty;this._query=URI._empty;this._fragment=URI._empty;this._formatted=null;this._fsPath=null}URI.isUri=function(thing){if(thing instanceof URI){return true}if(!thing){return false}return typeof thing.authority==="string"&&typeof thing.fragment==="string"&&typeof thing.path==="string"&&typeof thing.query==="string"&&typeof thing.scheme==="string"};Object.defineProperty(URI.prototype,"scheme",{get:function(){return this._scheme},enumerable:true,configurable:true});Object.defineProperty(URI.prototype,"authority",{get:function(){return this._authority},enumerable:true,configurable:true});Object.defineProperty(URI.prototype,"path",{get:function(){return this._path},enumerable:true,configurable:true});Object.defineProperty(URI.prototype,"query",{get:function(){return this._query},enumerable:true,configurable:true});Object.defineProperty(URI.prototype,"fragment",{get:function(){return this._fragment},enumerable:true,configurable:true});Object.defineProperty(URI.prototype,"fsPath",{get:function(){if(!this._fsPath){var value;if(this._authority&&this._path&&this.scheme==="file"){value="//"+this._authority+this._path}else if(URI._driveLetterPath.test(this._path)){value=this._path[1].toLowerCase()+this._path.substr(2)}else{value=this._path}if(isWindows){value=value.replace(/\//g,"\\")}this._fsPath=value}return this._fsPath},enumerable:true,configurable:true});URI.prototype.with=function(change){if(!change){return this}var scheme=change.scheme,authority=change.authority,path=change.path,query=change.query,fragment=change.fragment;if(scheme===void 0){scheme=this.scheme}else if(scheme===null){scheme=""}if(authority===void 0){authority=this.authority}else if(authority===null){authority=""}if(path===void 0){path=this.path}else if(path===null){path=""}if(query===void 0){query=this.query}else if(query===null){query=""}if(fragment===void 0){fragment=this.fragment}else if(fragment===null){fragment=""}if(scheme===this.scheme&&authority===this.authority&&path===this.path&&query===this.query&&fragment===this.fragment){return this}var ret=new URI;ret._scheme=scheme;ret._authority=authority;ret._path=path;ret._query=query;ret._fragment=fragment;URI._validate(ret);return ret};URI.parse=function(value){var ret=new URI;var data=URI._parseComponents(value);ret._scheme=data.scheme;ret._authority=decodeURIComponent(data.authority);ret._path=decodeURIComponent(data.path);ret._query=decodeURIComponent(data.query);ret._fragment=decodeURIComponent(data.fragment);URI._validate(ret);return ret};URI.file=function(path){var ret=new URI;ret._scheme="file";if(isWindows){path=path.replace(/\\/g,URI._slash)}if(path[0]===URI._slash&&path[0]===path[1]){var idx=path.indexOf(URI._slash,2);if(idx===-1){ret._authority=path.substring(2)}else{ret._authority=path.substring(2,idx);ret._path=path.substring(idx)}}else{ret._path=path}if(ret._path[0]!==URI._slash){ret._path=URI._slash+ret._path}URI._validate(ret);return ret};URI._parseComponents=function(value){var ret={scheme:URI._empty,authority:URI._empty,path:URI._empty,query:URI._empty,fragment:URI._empty};var match=URI._regexp.exec(value);if(match){ret.scheme=match[2]||ret.scheme;ret.authority=match[4]||ret.authority;ret.path=match[5]||ret.path;ret.query=match[7]||ret.query;ret.fragment=match[9]||ret.fragment}return ret};URI.from=function(components){return(new URI).with(components)};URI._validate=function(ret){if(ret.scheme&&!URI._schemePattern.test(ret.scheme)){throw new Error("[UriError]: Scheme contains illegal characters.")}if(ret.path){if(ret.authority){if(!URI._singleSlashStart.test(ret.path)){throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}}else{if(URI._doubleSlashStart.test(ret.path)){throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}}};URI.prototype.toString=function(skipEncoding){if(skipEncoding===void 0){skipEncoding=false}if(!skipEncoding){if(!this._formatted){this._formatted=URI._asFormatted(this,false)}return this._formatted}else{return URI._asFormatted(this,true)}};URI._asFormatted=function(uri,skipEncoding){var encoder=!skipEncoding?encodeURIComponent2:encodeNoop;var parts=[];var scheme=uri.scheme,authority=uri.authority,path=uri.path,query=uri.query,fragment=uri.fragment;if(scheme){parts.push(scheme,":")}if(authority||scheme==="file"){parts.push("//")}if(authority){authority=authority.toLowerCase();var idx=authority.indexOf(":");if(idx===-1){parts.push(encoder(authority))}else{parts.push(encoder(authority.substr(0,idx)),authority.substr(idx))}}if(path){var m=URI._upperCaseDrive.exec(path);if(m){if(m[1]){path="/"+m[2].toLowerCase()+path.substr(3)}else{path=m[2].toLowerCase()+path.substr(2)}}var lastIdx=0;while(true){var idx=path.indexOf(URI._slash,lastIdx);if(idx===-1){parts.push(encoder(path.substring(lastIdx)));break}parts.push(encoder(path.substring(lastIdx,idx)),URI._slash);lastIdx=idx+1}}if(query){parts.push("?",encoder(query))}if(fragment){parts.push("#",encoder(fragment))}return parts.join(URI._empty)};URI.prototype.toJSON=function(){var res={fsPath:this.fsPath,external:this.toString(),$mid:1};if(this.path){res.path=this.path}if(this.scheme){res.scheme=this.scheme}if(this.authority){res.authority=this.authority}if(this.query){res.query=this.query}if(this.fragment){res.fragment=this.fragment}return res};URI.revive=function(data){var result=new URI;result._scheme=data.scheme||URI._empty;result._authority=data.authority||URI._empty;result._path=data.path||URI._empty;result._query=data.query||URI._empty;result._fragment=data.fragment||URI._empty;result._fsPath=data.fsPath;result._formatted=data.external;URI._validate(result);return result};return URI}();__webpack_exports__["default"]=URI;URI._empty="";URI._slash="/";URI._regexp=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;URI._driveLetterPath=/^\/[a-zA-z]:/;URI._upperCaseDrive=/^(\/)?([A-Z]:)/;URI._schemePattern=/^\w[\w\d+.-]*$/;URI._singleSlashStart=/^\//;URI._doubleSlashStart=/^\/\//;var isWindows;if(typeof process==="object"){isWindows=process.platform==="win32"}else if(typeof navigator==="object"){var userAgent=navigator.userAgent;isWindows=userAgent.indexOf("Windows")>=0}}).call(this,__webpack_require__(5))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"JSONDocumentSymbols",function(){return JSONDocumentSymbols});var _utils_strings_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(45);var _utils_colors_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(53);var _vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(37);var JSONDocumentSymbols=function(){function JSONDocumentSymbols(schemaService){this.schemaService=schemaService}JSONDocumentSymbols.prototype.findDocumentSymbols=function(document,doc){var _this=this;var root=doc.root;if(!root){return null}var resourceString=document.uri;if(resourceString==="vscode://defaultsettings/keybindings.json"||_utils_strings_js__WEBPACK_IMPORTED_MODULE_0__["endsWith"](resourceString.toLowerCase(),"/user/keybindings.json")){if(root.type==="array"){var result_1=[];root.items.forEach(function(item){if(item.type==="object"){var property=item.getFirstProperty("key");if(property&&property.value){var location=_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_2__["Location"].create(document.uri,_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_2__["Range"].create(document.positionAt(item.start),document.positionAt(item.end)));result_1.push({name:property.value.getValue(),kind:_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_2__["SymbolKind"].Function,location})}}});return result_1}}var collectOutlineEntries=function(result,node,containerName){if(node.type==="array"){node.items.forEach(function(node){collectOutlineEntries(result,node,containerName)})}else if(node.type==="object"){var objectNode=node;objectNode.properties.forEach(function(property){var location=_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_2__["Location"].create(document.uri,_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_2__["Range"].create(document.positionAt(property.start),document.positionAt(property.end)));var valueNode=property.value;if(valueNode){var childContainerName=containerName?containerName+"."+property.key.value:property.key.value;result.push({name:property.key.getValue(),kind:_this.getSymbolKind(valueNode.type),location,containerName});collectOutlineEntries(result,valueNode,childContainerName)}})}return result};var result=collectOutlineEntries([],root,void 0);return result};JSONDocumentSymbols.prototype.getSymbolKind=function(nodeType){switch(nodeType){case"object":return _vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_2__["SymbolKind"].Module;case"string":return _vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_2__["SymbolKind"].String;case"number":return _vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_2__["SymbolKind"].Number;case"array":return _vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_2__["SymbolKind"].Array;case"boolean":return _vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_2__["SymbolKind"].Boolean;default:return _vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_2__["SymbolKind"].Variable}};JSONDocumentSymbols.prototype.findDocumentColors=function(document,doc){return this.schemaService.getSchemaForResource(document.uri,doc).then(function(schema){var result=[];if(schema){var matchingSchemas=doc.getMatchingSchemas(schema.schema);var visitedNode={};for(var _i=0,matchingSchemas_1=matchingSchemas;_i<matchingSchemas_1.length;_i++){var s=matchingSchemas_1[_i];if(!s.inverted&&s.schema&&(s.schema.format==="color"||s.schema.format==="color-hex")&&s.node&&s.node.type==="string"){var nodeId=String(s.node.start);if(!visitedNode[nodeId]){var color=Object(_utils_colors_js__WEBPACK_IMPORTED_MODULE_1__["colorFromHex"])(s.node.getValue());if(color){var range=_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_2__["Range"].create(document.positionAt(s.node.start),document.positionAt(s.node.end));result.push({color,range})}visitedNode[nodeId]=true}}}}return result})};JSONDocumentSymbols.prototype.getColorPresentations=function(document,doc,color,range){var result=[];var red256=Math.round(color.red*255),green256=Math.round(color.green*255),blue256=Math.round(color.blue*255);function toTwoDigitHex(n){var r=n.toString(16);return r.length!==2?"0"+r:r}var label;if(color.alpha===1){label="#"+toTwoDigitHex(red256)+toTwoDigitHex(green256)+toTwoDigitHex(blue256)}else{label="#"+toTwoDigitHex(red256)+toTwoDigitHex(green256)+toTwoDigitHex(blue256)+toTwoDigitHex(Math.round(color.alpha*255))}result.push({label,textEdit:_vscode_languageserver_types_main_js__WEBPACK_IMPORTED_MODULE_2__["TextEdit"].replace(range,JSON.stringify(label))});return result};return JSONDocumentSymbols}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"hexDigit",function(){return hexDigit});__webpack_require__.d(__webpack_exports__,"colorFromHex",function(){return colorFromHex});__webpack_require__.d(__webpack_exports__,"colorFrom256RGB",function(){return colorFrom256RGB});var Digit0=48;var Digit9=57;var A=65;var F=70;var a=97;var f=102;function hexDigit(charCode){if(charCode<Digit0){return 0}if(charCode<=Digit9){return charCode-Digit0}if(charCode<a){charCode+=a-A}if(charCode>=a&&charCode<=f){return charCode-a+10}return 0}function colorFromHex(text){if(text[0]!=="#"){return null}switch(text.length){case 4:return{red:hexDigit(text.charCodeAt(1))*17/255,green:hexDigit(text.charCodeAt(2))*17/255,blue:hexDigit(text.charCodeAt(3))*17/255,alpha:1};case 5:return{red:hexDigit(text.charCodeAt(1))*17/255,green:hexDigit(text.charCodeAt(2))*17/255,blue:hexDigit(text.charCodeAt(3))*17/255,alpha:hexDigit(text.charCodeAt(4))*17/255};case 7:return{red:(hexDigit(text.charCodeAt(1))*16+hexDigit(text.charCodeAt(2)))/255,green:(hexDigit(text.charCodeAt(3))*16+hexDigit(text.charCodeAt(4)))/255,blue:(hexDigit(text.charCodeAt(5))*16+hexDigit(text.charCodeAt(6)))/255,alpha:1};case 9:return{red:(hexDigit(text.charCodeAt(1))*16+hexDigit(text.charCodeAt(2)))/255,green:(hexDigit(text.charCodeAt(3))*16+hexDigit(text.charCodeAt(4)))/255,blue:(hexDigit(text.charCodeAt(5))*16+hexDigit(text.charCodeAt(6)))/255,alpha:(hexDigit(text.charCodeAt(7))*16+hexDigit(text.charCodeAt(8)))/255}}return null}function colorFrom256RGB(red,green,blue,alpha){if(alpha===void 0){alpha=1}return{red:red/255,green:green/255,blue:blue/255,alpha}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"schemaContributions",function(){return schemaContributions});var _fillers_vscode_nls_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(46);var localize=_fillers_vscode_nls_js__WEBPACK_IMPORTED_MODULE_0__["loadMessageBundle"]();var schemaContributions={schemaAssociations:{},schemas:{"http://json-schema.org/draft-04/schema#":{title:localize("schema.json","Describes a JSON file using a schema. See json-schema.org for more info."),$schema:"http://json-schema.org/draft-04/schema#",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{default:0}]},simpleTypes:{type:"string",enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:true}},type:"object",properties:{id:{type:"string",format:"uri",description:localize("schema.json.id","A unique identifier for the schema.")},$schema:{type:"string",format:"uri",description:localize("schema.json.$schema","The schema to verify this document against ")},title:{type:"string",description:localize("schema.json.title","A descriptive title of the element")},description:{type:"string",description:localize("schema.json.description","A long description of the element. Used in hover menus and suggestions.")},default:{description:localize("schema.json.default","A default value. Used by suggestions.")},multipleOf:{type:"number",minimum:0,exclusiveMinimum:true,description:localize("schema.json.multipleOf","A number that should cleanly divide the current value (i.e. have no remainder)")},maximum:{type:"number",description:localize("schema.json.maximum","The maximum numerical value, inclusive by default.")},exclusiveMaximum:{type:"boolean",default:false,description:localize("schema.json.exclusiveMaximum","Makes the maximum property exclusive.")},minimum:{type:"number",description:localize("schema.json.minimum","The minimum numerical value, inclusive by default.")},exclusiveMinimum:{type:"boolean",default:false,description:localize("schema.json.exclusiveMininum","Makes the minimum property exclusive.")},maxLength:{allOf:[{$ref:"#/definitions/positiveInteger"}],description:localize("schema.json.maxLength","The maximum length of a string.")},minLength:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}],description:localize("schema.json.minLength","The minimum length of a string.")},pattern:{type:"string",format:"regex",description:localize("schema.json.pattern","A regular expression to match the string against. It is not implicitly anchored.")},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{},description:localize("schema.json.additionalItems","For arrays, only when items is set as an array. If it is a schema, then this schema validates items after the ones specified by the items array. If it is false, then additional items will cause validation to fail.")},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{},description:localize("schema.json.items","For arrays. Can either be a schema to validate every element against or an array of schemas to validate each item against in order (the first schema will validate the first element, the second schema will validate the second element, and so on.")},maxItems:{allOf:[{$ref:"#/definitions/positiveInteger"}],description:localize("schema.json.maxItems","The maximum number of items that can be inside an array. Inclusive.")},minItems:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}],description:localize("schema.json.minItems","The minimum number of items that can be inside an array. Inclusive.")},uniqueItems:{type:"boolean",default:false,description:localize("schema.json.uniqueItems","If all of the items in the array must be unique. Defaults to false.")},maxProperties:{allOf:[{$ref:"#/definitions/positiveInteger"}],description:localize("schema.json.maxProperties","The maximum number of properties an object can have. Inclusive.")},minProperties:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}],description:localize("schema.json.minProperties","The minimum number of properties an object can have. Inclusive.")},required:{allOf:[{$ref:"#/definitions/stringArray"}],description:localize("schema.json.required","An array of strings that lists the names of all properties required on this object.")},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{},description:localize("schema.json.additionalProperties","Either a schema or a boolean. If a schema, then used to validate all properties not matched by 'properties' or 'patternProperties'. If false, then any properties not matched by either will cause this schema to fail.")},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{},description:localize("schema.json.definitions","Not used for validation. Place subschemas here that you wish to reference inline with $ref")},properties:{type:"object",additionalProperties:{$ref:"#"},default:{},description:localize("schema.json.properties","A map of property names to schemas for each property.")},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{},description:localize("schema.json.patternProperties","A map of regular expressions on property names to schemas for matching properties.")},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]},description:localize("schema.json.dependencies","A map of property names to either an array of property names or a schema. An array of property names means the property named in the key depends on the properties in the array being present in the object in order to be valid. If the value is a schema, then the schema is only applied to the object if the property in the key exists on the object.")},enum:{type:"array",minItems:1,uniqueItems:true,description:localize("schema.json.enum","The set of literal values that are valid")},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:true}],description:localize("schema.json.type","Either a string of one of the basic schema types (number, integer, null, array, object, boolean, string) or an array of strings specifying a subset of those types.")},format:{anyOf:[{type:"string",description:localize("schema.json.format","Describes the format expected for the value."),enum:["date-time","uri","email","hostname","ipv4","ipv6","regex"]},{type:"string"}]},allOf:{allOf:[{$ref:"#/definitions/schemaArray"}],description:localize("schema.json.allOf","An array of schemas, all of which must match.")},anyOf:{allOf:[{$ref:"#/definitions/schemaArray"}],description:localize("schema.json.anyOf","An array of schemas, where at least one must match.")},oneOf:{allOf:[{$ref:"#/definitions/schemaArray"}],description:localize("schema.json.oneOf","An array of schemas, exactly one of which must match.")},not:{allOf:[{$ref:"#"}],description:localize("schema.json.not","A schema which must not match.")}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},default:{}}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"UnresolvedSchema",function(){return UnresolvedSchema});__webpack_require__.d(__webpack_exports__,"ResolvedSchema",function(){return ResolvedSchema});__webpack_require__.d(__webpack_exports__,"JSONSchemaService",function(){return JSONSchemaService});var _jsonc_parser_main_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(39);var _vscode_uri_index_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(51);var _utils_strings_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(45);var _parser_jsonParser_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(49);var _fillers_vscode_nls_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(46);var localize=_fillers_vscode_nls_js__WEBPACK_IMPORTED_MODULE_4__["loadMessageBundle"]();var FilePatternAssociation=function(){function FilePatternAssociation(pattern){try{this.patternRegExp=new RegExp(_utils_strings_js__WEBPACK_IMPORTED_MODULE_2__["convertSimple2RegExpPattern"](pattern)+"$")}catch(e){this.patternRegExp=null}this.schemas=[]}FilePatternAssociation.prototype.addSchema=function(id){this.schemas.push(id)};FilePatternAssociation.prototype.matchesPattern=function(fileName){return this.patternRegExp&&this.patternRegExp.test(fileName)};FilePatternAssociation.prototype.getSchemas=function(){return this.schemas};return FilePatternAssociation}();var SchemaHandle=function(){function SchemaHandle(service,url,unresolvedSchemaContent){this.service=service;this.url=url;if(unresolvedSchemaContent){this.unresolvedSchema=this.service.promise.resolve(new UnresolvedSchema(unresolvedSchemaContent))}}SchemaHandle.prototype.getUnresolvedSchema=function(){if(!this.unresolvedSchema){this.unresolvedSchema=this.service.loadSchema(this.url)}return this.unresolvedSchema};SchemaHandle.prototype.getResolvedSchema=function(){var _this=this;if(!this.resolvedSchema){this.resolvedSchema=this.getUnresolvedSchema().then(function(unresolved){return _this.service.resolveSchemaContent(unresolved,_this.url)})}return this.resolvedSchema};SchemaHandle.prototype.clearSchema=function(){this.resolvedSchema=null;this.unresolvedSchema=null};return SchemaHandle}();var UnresolvedSchema=function(){function UnresolvedSchema(schema,errors){if(errors===void 0){errors=[]}this.schema=schema;this.errors=errors}return UnresolvedSchema}();var ResolvedSchema=function(){function ResolvedSchema(schema,errors){if(errors===void 0){errors=[]}this.schema=schema;this.errors=errors}ResolvedSchema.prototype.getSection=function(path){return _parser_jsonParser_js__WEBPACK_IMPORTED_MODULE_3__["asSchema"](this.getSectionRecursive(path,this.schema))};ResolvedSchema.prototype.getSectionRecursive=function(path,schema){var _this=this;if(!schema||typeof schema==="boolean"||path.length===0){return schema}var next=path.shift();if(schema.properties&&typeof schema.properties[next]){return this.getSectionRecursive(path,schema.properties[next])}else if(schema.patternProperties){Object.keys(schema.patternProperties).forEach(function(pattern){var regex=new RegExp(pattern);if(regex.test(next)){return _this.getSectionRecursive(path,schema.patternProperties[pattern])}})}else if(typeof schema.additionalProperties==="object"){return this.getSectionRecursive(path,schema.additionalProperties)}else if(next.match("[0-9]+")){if(Array.isArray(schema.items)){var index=parseInt(next,10);if(!isNaN(index)&&schema.items[index]){return this.getSectionRecursive(path,schema.items[index])}}else if(schema.items){return this.getSectionRecursive(path,schema.items)}}return null};return ResolvedSchema}();var JSONSchemaService=function(){function JSONSchemaService(requestService,contextService,promiseConstructor){this.contextService=contextService;this.requestService=requestService;this.promiseConstructor=promiseConstructor||Promise;this.callOnDispose=[];this.contributionSchemas={};this.contributionAssociations={};this.schemasById={};this.filePatternAssociations=[];this.filePatternAssociationById={};this.registeredSchemasIds={}}JSONSchemaService.prototype.getRegisteredSchemaIds=function(filter){return Object.keys(this.registeredSchemasIds).filter(function(id){var scheme=_vscode_uri_index_js__WEBPACK_IMPORTED_MODULE_1__["default"].parse(id).scheme;return scheme!=="schemaservice"&&(!filter||filter(scheme))})};Object.defineProperty(JSONSchemaService.prototype,"promise",{get:function(){return this.promiseConstructor},enumerable:true,configurable:true});JSONSchemaService.prototype.dispose=function(){while(this.callOnDispose.length>0){this.callOnDispose.pop()()}};JSONSchemaService.prototype.onResourceChange=function(uri){uri=this.normalizeId(uri);var schemaFile=this.schemasById[uri];if(schemaFile){schemaFile.clearSchema();return true}return false};JSONSchemaService.prototype.normalizeId=function(id){return _vscode_uri_index_js__WEBPACK_IMPORTED_MODULE_1__["default"].parse(id).toString()};JSONSchemaService.prototype.setSchemaContributions=function(schemaContributions){var _this=this;if(schemaContributions.schemas){var schemas=schemaContributions.schemas;for(var id in schemas){var normalizedId=this.normalizeId(id);this.contributionSchemas[normalizedId]=this.addSchemaHandle(normalizedId,schemas[id])}}if(schemaContributions.schemaAssociations){var schemaAssociations=schemaContributions.schemaAssociations;for(var pattern in schemaAssociations){var associations=schemaAssociations[pattern];this.contributionAssociations[pattern]=associations;var fpa=this.getOrAddFilePatternAssociation(pattern);associations.forEach(function(schemaId){var id=_this.normalizeId(schemaId);fpa.addSchema(id)})}}};JSONSchemaService.prototype.addSchemaHandle=function(id,unresolvedSchemaContent){var schemaHandle=new SchemaHandle(this,id,unresolvedSchemaContent);this.schemasById[id]=schemaHandle;return schemaHandle};JSONSchemaService.prototype.getOrAddSchemaHandle=function(id,unresolvedSchemaContent){return this.schemasById[id]||this.addSchemaHandle(id,unresolvedSchemaContent)};JSONSchemaService.prototype.getOrAddFilePatternAssociation=function(pattern){var fpa=this.filePatternAssociationById[pattern];if(!fpa){fpa=new FilePatternAssociation(pattern);this.filePatternAssociationById[pattern]=fpa;this.filePatternAssociations.push(fpa)}return fpa};JSONSchemaService.prototype.registerExternalSchema=function(uri,filePatterns,unresolvedSchemaContent){var _this=this;if(filePatterns===void 0){filePatterns=null}var id=this.normalizeId(uri);this.registeredSchemasIds[id]=true;if(filePatterns){filePatterns.forEach(function(pattern){_this.getOrAddFilePatternAssociation(pattern).addSchema(id)})}return unresolvedSchemaContent?this.addSchemaHandle(id,unresolvedSchemaContent):this.getOrAddSchemaHandle(id)};JSONSchemaService.prototype.clearExternalSchemas=function(){var _this=this;this.schemasById={};this.filePatternAssociations=[];this.filePatternAssociationById={};this.registeredSchemasIds={};for(var id in this.contributionSchemas){this.schemasById[id]=this.contributionSchemas[id];this.registeredSchemasIds[id]=true}for(var pattern in this.contributionAssociations){var fpa=this.getOrAddFilePatternAssociation(pattern);this.contributionAssociations[pattern].forEach(function(schemaId){var id=_this.normalizeId(schemaId);fpa.addSchema(id)})}};JSONSchemaService.prototype.getResolvedSchema=function(schemaId){var id=this.normalizeId(schemaId);var schemaHandle=this.schemasById[id];if(schemaHandle){return schemaHandle.getResolvedSchema()}return this.promise.resolve(null)};JSONSchemaService.prototype.loadSchema=function(url){if(!this.requestService){var errorMessage=localize("json.schema.norequestservice","Unable to load schema from '{0}'. No schema request service available",toDisplayString(url));return this.promise.resolve(new UnresolvedSchema({},[errorMessage]))}return this.requestService(url).then(function(content){if(!content){var errorMessage=localize("json.schema.nocontent","Unable to load schema from '{0}': No content.",toDisplayString(url));return new UnresolvedSchema({},[errorMessage])}var schemaContent={};var jsonErrors=[];schemaContent=_jsonc_parser_main_js__WEBPACK_IMPORTED_MODULE_0__["parse"](content,jsonErrors);var errors=jsonErrors.length?[localize("json.schema.invalidFormat","Unable to parse content from '{0}': Parse error at offset {1}.",toDisplayString(url),jsonErrors[0].offset)]:[];return new UnresolvedSchema(schemaContent,errors)},function(error){var errorMessage=localize("json.schema.unabletoload","Unable to load schema from '{0}': {1}",toDisplayString(url),error.toString());return new UnresolvedSchema({},[errorMessage])})};JSONSchemaService.prototype.resolveSchemaContent=function(schemaToResolve,schemaURL){var _this=this;var resolveErrors=schemaToResolve.errors.slice(0);var schema=schemaToResolve.schema;var contextService=this.contextService;var findSection=function(schema,path){if(!path){return schema}var current=schema;if(path[0]==="/"){path=path.substr(1)}path.split("/").some(function(part){current=current[part];return!current});return current};var merge=function(target,sourceRoot,sourceURI,path){var section=findSection(sourceRoot,path);if(section){for(var key in section){if(section.hasOwnProperty(key)&&!target.hasOwnProperty(key)){target[key]=section[key]}}}else{resolveErrors.push(localize("json.schema.invalidref","$ref '{0}' in '{1}' can not be resolved.",path,sourceURI))}};var resolveExternalLink=function(node,uri,linkPath,parentSchemaURL){if(contextService&&!/^\w+:\/\/.*/.test(uri)){uri=contextService.resolveRelativePath(uri,parentSchemaURL)}uri=_this.normalizeId(uri);return _this.getOrAddSchemaHandle(uri).getUnresolvedSchema().then(function(unresolvedSchema){if(unresolvedSchema.errors.length){var loc=linkPath?uri+"#"+linkPath:uri;resolveErrors.push(localize("json.schema.problemloadingref","Problems loading reference '{0}': {1}",loc,unresolvedSchema.errors[0]))}merge(node,unresolvedSchema.schema,uri,linkPath);return resolveRefs(node,unresolvedSchema.schema,uri)})};var resolveRefs=function(node,parentSchema,parentSchemaURL){if(!node||typeof node!=="object"){return Promise.resolve(null)}var toWalk=[node];var seen=[];var openPromises=[];var collectEntries=function(){var entries=[];for(var _i=0;_i<arguments.length;_i++){entries[_i]=arguments[_i]}for(var _a=0,entries_1=entries;_a<entries_1.length;_a++){var entry=entries_1[_a];if(typeof entry==="object"){toWalk.push(entry)}}};var collectMapEntries=function(){var maps=[];for(var _i=0;_i<arguments.length;_i++){maps[_i]=arguments[_i]}for(var _a=0,maps_1=maps;_a<maps_1.length;_a++){var map=maps_1[_a];if(typeof map==="object"){for(var key in map){var entry=map[key];if(typeof entry==="object"){toWalk.push(entry)}}}}};var collectArrayEntries=function(){var arrays=[];for(var _i=0;_i<arguments.length;_i++){arrays[_i]=arguments[_i]}for(var _a=0,arrays_1=arrays;_a<arrays_1.length;_a++){var array=arrays_1[_a];if(Array.isArray(array)){for(var _b=0,array_1=array;_b<array_1.length;_b++){var entry=array_1[_b];if(typeof entry==="object"){toWalk.push(entry)}}}}};var handleRef=function(next){while(next.$ref){var segments=next.$ref.split("#",2);delete next.$ref;if(segments[0].length>0){openPromises.push(resolveExternalLink(next,segments[0],segments[1],parentSchemaURL));return}else{merge(next,parentSchema,parentSchemaURL,segments[1])}}collectEntries(next.items,next.additionalProperties,next.not,next.contains,next.propertyNames);collectMapEntries(next.definitions,next.properties,next.patternProperties,next.dependencies);collectArrayEntries(next.anyOf,next.allOf,next.oneOf,next.items)};while(toWalk.length){var next=toWalk.pop();if(seen.indexOf(next)>=0){continue}seen.push(next);handleRef(next)}return _this.promise.all(openPromises)};return resolveRefs(schema,schema,schemaURL).then(function(_){return new ResolvedSchema(schema,resolveErrors)})};JSONSchemaService.prototype.getSchemaForResource=function(resource,document){if(document&&document.root&&document.root.type==="object"){var schemaProperties=document.root.properties.filter(function(p){return p.key.value==="$schema"&&!!p.value});if(schemaProperties.length>0){var schemeId=schemaProperties[0].value.getValue();if(schemeId&&_utils_strings_js__WEBPACK_IMPORTED_MODULE_2__["startsWith"](schemeId,".")&&this.contextService){schemeId=this.contextService.resolveRelativePath(schemeId,resource)}if(schemeId){var id=this.normalizeId(schemeId);return this.getOrAddSchemaHandle(id).getResolvedSchema()}}}var seen=Object.create(null);var schemas=[];for(var _i=0,_a=this.filePatternAssociations;_i<_a.length;_i++){var entry=_a[_i];if(entry.matchesPattern(resource)){for(var _b=0,_c=entry.getSchemas();_b<_c.length;_b++){var schemaId=_c[_b];if(!seen[schemaId]){schemas.push(schemaId);seen[schemaId]=true}}}}if(schemas.length>0){return this.createCombinedSchema(resource,schemas).getResolvedSchema()}return this.promise.resolve(null)};JSONSchemaService.prototype.createCombinedSchema=function(resource,schemaIds){if(schemaIds.length===1){return this.getOrAddSchemaHandle(schemaIds[0])}else{var combinedSchemaId="schemaservice://combinedSchema/"+encodeURIComponent(resource);var combinedSchema={allOf:schemaIds.map(function(schemaId){return{$ref:schemaId}})};return this.addSchemaHandle(combinedSchemaId,combinedSchema)}};return JSONSchemaService}();function toDisplayString(url){try{var uri=_vscode_uri_index_js__WEBPACK_IMPORTED_MODULE_1__["default"].parse(url);if(uri.scheme==="file"){return uri.fsPath}}catch(e){}return url}}]);